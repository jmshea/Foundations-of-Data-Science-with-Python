
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="7.5. Chapter Summary" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.fdsp.net/07-bayesian-methods/5-summary.html" />
<meta property="og:site_name" content="Foundations of Data Science with Python" />
<meta property="og:description" content="Key Take-Aways Bayes’ Rule A stochastic system is a system for which the outputs are not a deterministic function of the inputs., Sensitivity is the probability of detecting some phenomena when it ..." />
<meta property="og:image" content="https://www.fdsp.net/images/3d-book.png" />
<meta property="og:image:alt" content="Foundations of Data Science with Python" />
<meta name="description" content="Key Take-Aways Bayes’ Rule A stochastic system is a system for which the outputs are not a deterministic function of the inputs., Sensitivity is the probability of detecting some phenomena when it ..." />

    <title>7.5. Chapter Summary &#8212; Foundations of Data Science with Python &amp;mdash; Online Resources</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=1abeca60" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-51XGJJ29T3"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-51XGJJ29T3');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-51XGJJ29T3');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"loader": {"load": ["[tex]/boldsymbol"]}, "tex": {"macros": {"P": "\\operatorname{P}"}, "packages": {"[+]": ["boldsymbol"]}}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '07-bayesian-methods/5-summary';</script>
    <script src="../_static/structured_data.js?v=f66c9da7"></script>
    <link rel="canonical" href="https://www.fdsp.net/07-bayesian-methods/5-summary.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8. Random Variables" href="../08-random-variables/intro.html" />
    <link rel="prev" title="7.4. Bayesian Hypothesis Testing" href="4-bayesian-hypothesis-testing.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/normal-people.png" class="logo__image only-light" alt="Foundations of Data Science with Python &mdash; Online Resources - Home"/>
    <script>document.write(`<img src="../_static/normal-people.png" class="logo__image only-dark" alt="Foundations of Data Science with Python &mdash; Online Resources - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Foundations of Data Science with Python
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Online Resources for Book Chapters</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../01-intro/intro.html">1. Introduction</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../01-intro/1-who-for.html">1.1. Who is this book for?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01-intro/2-why-this-book.html">1.2. Why learn data science from this book?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01-intro/3-what-is-data-science.html">1.3. What is data science?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01-intro/4-what-book-covers.html">1.4. What data science topics does this book cover?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01-intro/5-what-book-does-not-cover.html">1.5. What data science topics does this book <strong>not</strong> cover?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01-intro/6-intro-jupyter-and-python.html">1.6. Extremely Brief Intro to Jupyter and Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01-intro/7-summary.html">1.7. Chapter Summary</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../02-first-stats/intro.html">2. First Simulations, Visualizations, and Statistical Tests</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../02-first-stats/1-motivating-problem.html">2.1. Motivating Problem: Is This Coin Fair?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-first-stats/2-first-sims.html">2.2. First Computer Simulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-first-stats/3-first-vis.html">2.3. First Visualizations: Scatter Plots and Histograms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-first-stats/4-first-stats.html">2.4. First Statistical Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-first-stats/5-summary.html">2.5. Chapter Summary</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../03-first-data/intro.html">3. First Visualizations and Statistical Tests with Real Data</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../03-first-data/1-pandas-start.html">3.1. Introduction to Pandas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03-first-data/2-visualization.html">3.2. Visualizing Multiple Data Sets - Part 1: Scatter Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03-first-data/3-partitions.html">3.3. Partitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03-first-data/4-summary-stats.html">3.4. Summary Statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03-first-data/5-histogram.html">3.5. Visualizing Multiple Data Sets - Part 2: Histograms for Partitioned Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03-first-data/6-hypothesis-testing.html">3.6. Null Hypothesis Testing with Real Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03-first-data/7-2d-statistics-preview.html">3.7. A Quick Preview of Two-Dimensional Statistical Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03-first-data/8-summary.html">3.8. Chapter Summary</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../04-probability1/intro.html">4. Introduction to Probability</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../04-probability1/1-outcomes-samplespaces-events.html">4.1. Outcomes, Sample Spaces, and Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04-probability1/2-relative-frequency.html">4.2. Relative Frequencies and Probabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04-probability1/3-fair-experiments.html">4.3. Fair Experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04-probability1/4-axiomatic-prob.html">4.4. Axiomatic  Probability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04-probability1/5-corollaries.html">4.5. Corollaries to the Axioms of Probability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04-probability1/6-combinatorics.html">4.6. Combinatorics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04-probability1/7-summary.html">4.7. Chapter Summary</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../05-null-hypothesis-testing/intro.html">5. Null Hypothesis Tests</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../05-null-hypothesis-testing/1-statistical-studies.html">5.1. Statistical Studies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05-null-hypothesis-testing/2-nhst.html">5.2. General Resampling Approaches for Null Hypothesis Significance Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05-null-hypothesis-testing/3-calculating-p-values.html">5.3. Calculating <span class="math notranslate nohighlight">\(p\)</span>-Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05-null-hypothesis-testing/4-how-to-sample.html">5.4. How to Sample from the Pooled Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05-null-hypothesis-testing/5-example-nhst.html">5.5. Example Null Hypothesis Significance Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05-null-hypothesis-testing/6-bootstrap-dist-confidence-intervals.html">5.6. Bootstrap Distribution and Confidence Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05-null-hypothesis-testing/7-errors-and-power.html">5.7. Types of Errors and Statistical Power</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05-null-hypothesis-testing/8-summary.html">5.8. Summary</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../06-conditional-prob/intro.html">6. Dependence and Independence</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../06-conditional-prob/1-simulating-cond-probs.html">6.1. Simulating and Counting Conditional Probabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06-conditional-prob/2-notation-and-intuition.html">6.2. Conditional Probability: Notation and Intuition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06-conditional-prob/3-definition.html">6.3. Formally Defining Conditional Probability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06-conditional-prob/4-relating-cond-uncond.html">6.4. Relating Conditional and Unconditional Probabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06-conditional-prob/5-more-on-simulating.html">6.5. More on Simulating Conditional Probabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06-conditional-prob/6-independence.html">6.6. Statistical Independence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06-conditional-prob/7-fair-exps.html">6.7. Conditional Probabilities and Independence in Fair Experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06-conditional-prob/8-conditional-independence.html">6.8. Conditioning and (In)dependence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06-conditional-prob/9-chain-rules-total-prob.html">6.9. Chain Rules and Total Probability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06-conditional-prob/10-summary.html">6.10. Summary</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="intro.html">7. Introduction to Bayesian Methods</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1-bayes-rule.html">7.1. Bayes’ Rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-bayes-hidden-state.html">7.2. Bayes’ Rule in Systems with Hidden State</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-optimal-decisions.html">7.3. Optimal Decisions for Discrete Stochastic Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-bayesian-hypothesis-testing.html">7.4. Bayesian Hypothesis Testing</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">7.5. Chapter Summary</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../08-random-variables/intro.html">8. Random Variables</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../08-random-variables/definition.html">8.1. Definition of a Real Random Variable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08-random-variables/discrete-rvs.html">8.2. Discrete Random Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08-random-variables/cdfs.html">8.3. Cumulative Distribution Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08-random-variables/important-discrete-rvs.html">8.4. Important Discrete RVs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08-random-variables/continuous-rvs.html">8.5. Continuous Random Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08-random-variables/important-continuous-rvs.html">8.6. Important Continuous Random Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08-random-variables/kernel-density-estimation.html">8.7. Histograms of Continuous Random Variables and Kernel Density Estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08-random-variables/conditioning-with-rvs.html">8.8. Conditioning with Random Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08-random-variables/summary.html">8.9. Chapter Summary</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../09-moments/intro.html">9. Moments, Parameter Estimation, and Binary Hypothesis Tests on Sample Means</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../09-moments/expected-value.html">9.1. Expected Value</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09-moments/expected-value-continuous.html">9.2. Expected Value of a Continuous Random Variable with SymPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09-moments/moments.html">9.3. Moments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09-moments/parameter-estimation.html">9.4. Parameter Estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09-moments/confidence-intervals-estimates.html">9.5. Confidence Intervals for Estimates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09-moments/mean-hypothesis-testing.html">9.6. Testing a Difference of Means</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09-moments/parameter-distributions.html">9.7. Sampling and Bootstrap Distributions of Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09-moments/sample-size-selection.html">9.8. Effect Size, Power, and Sample Size Selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09-moments/summary.html">9.9. Summary</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../10-conditional-stats/intro.html">10. Decision Making with Observations from Continuous Distributions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../10-conditional-stats/binary-decisions-nonbayesian.html">10.1. Binary Decisions from Continuous Data: Non-Bayesian Approaches</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10-conditional-stats/point-conditioning.html">10.2. Point Conditioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10-conditional-stats/bayesian-decisions.html">10.3. Optimal Bayesian Decision Making with Continuous Random Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10-conditional-stats/summary.html">10.4. Summary</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../11-categorical-data/intro.html">11. Categorical Data, Tests for Dependence, and Goodness of Fit for Discrete Distributions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../11-categorical-data/contingency-tables.html">11.1. Tabulating Categorical Data and Creating a Test Statistic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11-categorical-data/nhst.html">11.2. Null Hypothesis Significance Testing for Dependence in Contingency Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11-categorical-data/goodness-of-fit.html">11.3. Chi-Square Goodness-of-Fit Test</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11-categorical-data/summary.html">11.4. Summary</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../12-vector-regression/intro.html">12. Multidimensional Data: Vectors and Linear Regression</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../12-vector-regression/vector-stats.html">12.1. Summary Statistics for Vector Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12-vector-regression/linear-regression.html">12.2. Linear Regression</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12-vector-regression/nhst.html">12.3. Null Hypothesis Tests for Correlation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12-vector-regression/nonlinear-regression.html">12.4. Nonlinear Regression Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12-vector-regression/summary.html">12.5. Summary</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../13-multidim-dependence/intro.html">13. Working with Dependent Data in Multiple Dimensions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../13-multidim-dependence/joint-rvs.html">13.1. Jointly Distributed Pairs of Random Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13-multidim-dependence/linear-transforms.html">13.2. Standardization and Linear Transformation of Numerical Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13-multidim-dependence/decorrelation.html">13.3. Decorrelating Random Vectors and Multi-Dimensional Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13-multidim-dependence/pca.html">13.4. Principal Components Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13-multidim-dependence/summary.html">13.5. Summary</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Online Resources for Book Chapters</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../16-next-steps/next-steps.html">Next Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix.html">Appendix: Brief Introduction to Sets</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Buy the Book</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../buy.html">Buy <em>Foundations of Data Science with Python</em></a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jmshea/Foundations-of-Data-Science-with-Python" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jmshea/Foundations-of-Data-Science-with-Python/issues/new?title=Issue%20on%20page%20%2F07-bayesian-methods/5-summary.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Chapter Summary</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="chapter-summary">
<h1><span class="section-number">7.5. </span>Chapter Summary<a class="headerlink" href="#chapter-summary" title="Link to this heading">#</a></h1>
<p><strong>Key Take-Aways</strong></p>
<p><strong>Bayes’ Rule</strong></p>
<ul class="simple">
<li><p>A stochastic system is a system for which the outputs are not a deterministic function  of the inputs.</p></li>
<li><p><em>Sensitivity</em> is the probability of detecting some phenomena when it is actually there.</p></li>
<li><p>Given a system with inputs <span class="math notranslate nohighlight">\(A_i\)</span> and outputs <span class="math notranslate nohighlight">\(B_j\)</span>:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(P(A_i)\)</span> is an <em>a priori</em> probability (or prior).</p></li>
<li><p><span class="math notranslate nohighlight">\(P(B_j|A_i)\)</span> is a <em>likelihood</em>.</p></li>
<li><p><span class="math notranslate nohighlight">\(P(A_i|B_j)\)</span> is an <em>a posteriori</em> probability (APP, also called a posterior).</p></li>
</ul>
</li>
<li><p>We are often given likelihoods and <em>a priori</em> probabilities. <em>A posteriori</em> probabilities usually have to be calculated using Bayes’ Rule.</p></li>
<li><p>Bayes Rule:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
P(A_i|B_j) = \frac{P\left(B_j \left \vert A_i \right. \right) P\left( A_i \right)}
{ \sum_i P\left(B_j \left \vert A_i \right. \right) P\left( A_i \right)}.
\]</div>
<ul class="simple">
<li><p>The <em>base rate fallacy</em> is that people tend to ignore <em>a priori</em> information (base rates) when evaluating data. This is especially problematic when the <em>a priori</em> probabilities for some events are close to 0 or 1. To illustrate this, we studied an example about breast cancer detection. Mammograms are very reliable for detecting  breast cancer, but for younger women, where the probability of a woman having breast cancer is low, most cases where breast cancer is detected will turn out to be false alarms.</p></li>
</ul>
<p><strong>Systems with Hidden State</strong></p>
<ul class="simple">
<li><p>A system with hidden state has internal state (for example, memory) that is not directly observable but that can affect the system’s outputs.</p></li>
<li><p>Even though the hidden state in a system is not directly observable, information about that state can be determined using the inputs and outputs of the system.</p></li>
<li><p>We showed that in the Magician’s Coin problem, the coin that was selected can be considered to be hidden state, and we showed that Bayes Rule can be used to determine how observations of the system output change the probabilities of the hidden state.</p></li>
</ul>
<p><strong>Optimal Decisions for Discrete Stochastic Systems</strong></p>
<ul>
<li><p>A common problem in stochastic systems is to estimate a system’s input based on an observation of the output. For example, almost all communication systems fit this model.</p></li>
<li><p>We showed how to formulate the optimal decision problem for such systems in two common ways: maximum likelihood (ML) decisions and maximum <em>a posteriori</em> probability (MAP) decisions.</p></li>
<li><p>Consider a system with inputs <span class="math notranslate nohighlight">\(A_i\)</span> and outputs <span class="math notranslate nohighlight">\(B_j\)</span>. If the output <span class="math notranslate nohighlight">\(B_j\)</span> is observed, then:</p>
<ul class="simple">
<li><p>The ML decision rule is</p></li>
</ul>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
    \widehat{A}_i, \mbox{ where } i = \arg \max_{i \in \{0,1\}} P(B_j|A_i).
    \end{equation*}\]</div>
<ul class="simple">
<li><p>The MAP decision rule is</p></li>
</ul>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
    \hat{A}_i, ~ \mbox{where }  i = \arg \max_{i \in \{0,1\} } P \left( A_i \vert B_j \right).
    \end{equation*}\]</div>
</li>
<li><p>The MAP decision rule usually offers the best performance but requires knowing the <em>a priori</em> probabilities. If the <em>a priori</em> probabilities are not known, the ML decision rule is usually used.</p></li>
</ul>
<p><strong>Bayesian Hypothesis Testing and Confidence Intervals</strong></p>
<ul class="simple">
<li><p>Bayesian statistics can easily be created using bootstrap resampling to estimate the <em>a posteriori</em> probabilities.</p></li>
<li><p>When calculating Bayesian statistics, the <em>a priori</em> probabilities (or prior) must be chosen by the statistician.</p></li>
<li><p>Priors may either be:</p>
<ul>
<li><p><em>Uninformative</em>, which usually means that the probability is distributed equally or uniformly among the values</p></li>
<li><p><em>Informative</em>, in which the statistician uses information from other sources to choose a reasonable prior</p></li>
</ul>
</li>
<li><p>Credible intervals are the set of values that contain C% of the total <em>a posteriori</em> probability.</p></li>
<li><p>Unlike confidence intervals, credible intervals have a more straightforward interpretation:  given a C% credible interval for some parameter of interest, there is a C% probability that the true value will lie within the credible interval (given the data and choice of prior).</p></li>
<li><p>Bayesian statistics are gaining in popularity but can be subject to criticism because they require the statistician to specify a set of <em>a priori</em> probabilities.</p></li>
</ul>
<p><strong>Self Assessment Exercises</strong></p>
<p>Answer the questions below to assess your understanding of the material in this chapter.  Because there are many questions for this chapter, a random sample of 12 questions are shown. Reload this page to get a new random sample of 12 questions.</p>
<div class="cell tag_remove-input docutils container">
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="ipdAbXsleggl" data-shufflequestions="False"
               data-shuffleanswers="True"
               data-preserveresponses="false"
               data-numquestions="4"
               data-maxwidth="600"
               style="border-radius: 10px; text-align: left"> <style>
#ipdAbXsleggl {
   --jq-multiple-choice-bg: #345995;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #e26d5a;
   --jq-numeric-bg: #5bc0eb;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-incorrect-color: #666666;
   --jq-correct-color: #87a878;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 15px;
    padding-bottom: 4px;
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
    min-height: 2em;
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsipdAbXsleggl=[
    {
        "question": "For a 40 year-old woman whose mammogram does <b>not</b> detect cancer, what is the probability that she actually has cancer? Use the data from the Bayes' Rule section.",
        "type": "numeric",
        "precision": 5,
        "answers": [
            {
                "type": "value",
                "value": 0.0002,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    -0.1
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be negative. Your work may contain a math error."
            },
            {
                "type": "value",
                "value": 0.99,
                "correct": false,
                "feedback": "Note that $P(C|\\overline{D}) \\ne 1 - P(C|D)$. These are two different probability measures (since they have different conditional information)."
            },
            {
                "type": "range",
                "range": [
                    1.1,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be greater than 1. Your work may contain a math error."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Apply Bayes' rule to write $P(C|\\overline{D})$ in terms of likelihoods and <i>a priori</i> probabilities."
            }
        ]
    },
    {
        "question": "<b>True or False:</b> For all events $A$ and $B$, $P(A \\mid B) + P( \\overline{A} \\mid B ) =1.$",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "True",
                "correct": true,
                "feedback": "Correct. $A$ and $\\overline{A}$ are complementary events evaluated using the same conditional probability measure, so their probabilities add to 1."
            },
            {
                "answer": "False",
                "correct": false,
                "feedback": "Incorrect. $A$ and $\\overline{A}$ are complementary events evaluated using the same conditional probability measure, so their probabilities add to 1."
            },
            {
                "answer": "There is not enough information to decide.",
                "correct": false,
                "feedback": "Incorrect. "
            }
        ]
    },
    {
        "question": "<b>True or False:</b> For all events $A$ and $B$, $P(A \\mid B) + P( A \\mid \\overline{B} ) =1.$",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "True",
                "correct": false,
                "feedback": "Incorrect. This asks about the probability of the event $A$ using two <b>different conditional probability measures</b>. These generally will not add to 1."
            },
            {
                "answer": "False",
                "correct": true,
                "feedback": "Correct. This asks about the probability of the event $A$ using two <b>different conditional probability measures</b>. These generally will not add to 1."
            },
            {
                "answer": "There is not enough information to decide.",
                "correct": false,
                "feedback": "Incorrect. "
            }
        ]
    },
    {
        "question": "A cybersecurity researcher has developed a \"fuzzing\" tool that automatically tests operating systems for vulnerabilities by sending random requests to the OS application programming interfaces (APIs) and checking whether the input produces unexpected behavior (crashing or leakage of information). Over a standard battery of one million fuzzing inputs, the tool is 80% successful at identifying a vulnerable API but has a 10% probability of reporting a vulerability when none exists. For a particular OS, 95% of the APIs have no vulnerability. What is the probability that an API of that OS is vulnerable if the fuzzing tool indicates a vulerability? Give your answer to 3 significant digits.",
        "type": "numeric",
        "precision": 3,
        "answers": [
            {
                "type": "value",
                "value": 0.296,
                "correct": true,
                "feedback": "Correct! "
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. Use Bayes' Rule to solve this problem."
            },
            {
                "type": "range",
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilties must be between 0 and 1."
            },
            {
                "type": "range",
                "range": [
                    1.0000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilties must be between 0 and 1."
            }
        ]
    },
    {
        "question": "Suppose a magician has a fair coin and a two-headed coin in their pocket. They choose one at random and flip it 3 times. If it came up heads every time, what is the probability that it is the two-headed coin? Give your answer as a fraction or a decimal accurate to at least 2 decimal places.",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.89,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "value",
                "value": 0.5,
                "correct": false,
                "feedback": "Incorrect. If you believe that seeing 3 Heads doesn't change the chance that the magician is using the two-headed coin, what if you saw one million heads? Would you be willing to bet that the coin is fair?"
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    -0.01
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be negative. Your work may contain a math error."
            },
            {
                "type": "range",
                "range": [
                    1.01,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be greater than 1. Your work may contain a math error."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Apply Bayes' rule to write $P(\\overline{F}| H_1 \\cap H_2 \\cap H_3)$ in terms of likelihoods and <i>a priori</i> probabilities. "
            }
        ]
    },
    {
        "question": "A nuclear engineer has put two samples of Uranium in identical containers. However, one is naturally occurring Uranium and the other is enriched Uranium. She wishes to perform measurements to determine which container has the enriched Uranium.<br> She uses a Geiger counter to detect the release of alpha particles from radioactive decay. Even enriched Uranium decays slowly, and during a 10 minute observation period, an alpha particle will be released with probability 1/6 if the sample is naturally occuring Uranium and with probability 1/2 if the sample is enriched Uranium. (Otherwise no alpha particle is released.)<br> Suppose a sample is chosen at random and observed over two separate 10-minute observation periods. If an alpha particle is detected in both observation periods, what is the probability that the sample is the enriched Uranium? Provide your answer to 3 significant digits.",
        "type": "numeric",
        "precision": 3,
        "answers": [
            {
                "type": "value",
                "value": 0.9,
                "correct": true,
                "feedback": "Correct! "
            },
            {
                "type": "value",
                "value": 0.429,
                "correct": false,
                "feedback": "Incorrect. Note that we are asking about the probability that the sample is enriched Uraniaum if an alpha particle is observed in  <b>both</b> observation periods."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. Use Total Probability and conditional statistical independence to solve this problem. "
            },
            {
                "type": "range",
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilties must be between 0 and 1."
            },
            {
                "type": "range",
                "range": [
                    1.0000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilties must be between 0 and 1."
            }
        ]
    }
];
    // Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.textContent = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == "True") {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.textContent = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);
        console.log(submission);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
        //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                console.log(answer.value);
                console.log(submission == answer.value);
                if (submission == answer.value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }
                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        return false;
    }

}

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.textContent = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
function jaxify(string) {
    var mystring = string;

    var count = 0;
    var loc = mystring.search(/([^\\]|^)(\$)/);

    var count2 = 0;
    var loc2 = mystring.search(/([^\\]|^)(\$\$)/);

    //console.log(loc);

    while ((loc >= 0) || (loc2 >= 0)) {

        /* Have to replace all the double $$ first with current implementation */
        if (loc2 >= 0) {
            if (count2 % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\[");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\]");
            }
            count2++;
        } else {
            if (count % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\(");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\)");
            }
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
        //console.log(mystring,", loc:",loc,", loc2:",loc2);
    }

    //console.log(mystring);
    return mystring;
}


function show_questions(json, mydiv) {
    console.log('show_questions');
    //var mydiv=document.getElementById(myid);
    var shuffle_questions = mydiv.dataset.shufflequestions;
    var num_questions = mydiv.dataset.numquestions;
    var shuffle_answers = mydiv.dataset.shuffleanswers;
    var max_width = mydiv.dataset.maxwidth;

    if (num_questions > json.length) {
        num_questions = json.length;
    }

    var questions;
    if ((num_questions < json.length) || (shuffle_questions == "True")) {
        //console.log(num_questions+","+json.length);
        questions = getRandomSubarray(json, num_questions);
    } else {
        questions = json;
    }

    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);

    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        //iDiv.id = 'quizWrap' + id + index;
        iDiv.id = 'quizWrap' + id;
        iDiv.className = 'Quiz';
        iDiv.setAttribute('data-qnum', index);
        iDiv.style.maxWidth  =max_width+"px";
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;
        
        var outerqDiv = document.createElement('div');
        outerqDiv.id = "OuterquizQn" + id + index;
        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id = "quizQn" + id + index;
        
        if (qa.question) {
            iDiv.append(outerqDiv);

            //qDiv.textContent=qa.question;
            qDiv.innerHTML = jaxify(qa.question);
            outerqDiv.append(qDiv);
        }

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa) {
            codeDiv = document.createElement('div');
            codeDiv.id = "code" + id + index;
            codeDiv.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = qa.code;
            outerqDiv.append(codeDiv);
            //console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id = "quizAns" + id + index;
        aDiv.className = 'Answer';
        iDiv.append(aDiv);

        //console.log(qa.type);

        var num_correct;
        if ((qa.type == "multiple_choice") || (qa.type == "many_choice") ) {
            num_correct = make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
            if ("answer_cols" in qa) {
                //aDiv.style.gridTemplateColumns = 'auto '.repeat(qa.answer_cols);
                aDiv.style.gridTemplateColumns = 'repeat(' + qa.answer_cols + ', 1fr)';
            }
        } else if (qa.type == "numeric") {
            //console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id = "fb" + id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className = "Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
    var preserveResponses = mydiv.dataset.preserveresponses;
    console.log(preserveResponses);
    console.log(preserveResponses == "true");
    if (preserveResponses == "true") {
        console.log(preserveResponses);
        // Create Div to contain record of answers
        var iDiv = document.createElement('div');
        iDiv.id = 'responses' + mydiv.id;
        iDiv.className = 'JCResponses';
        // Create a place to store responses as an empty array
        iDiv.setAttribute('data-responses', '[]');

        // Dummy Text
        iDiv.innerHTML="<b>Select your answers and then follow the directions that will appear here.</b>"
        //iDiv.className = 'Quiz';
        mydiv.appendChild(iDiv);
    }
//console.log("At end of show_questions");
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    return false;
}
/* This is to handle asynchrony issues in loading Jupyter notebooks
           where the quiz has been previously run. The Javascript was generally
           being run before the div was added to the DOM. I tried to do this
           more elegantly using Mutation Observer, but I didn't get it to work.

           Someone more knowledgeable could make this better ;-) */

        function try_show() {
          if(document.getElementById("ipdAbXsleggl")) {
            show_questions(questionsipdAbXsleggl,  ipdAbXsleggl); 
          } else {
             setTimeout(try_show, 200);
          }
        };
    
        //console.log(element);
        {
        const jmscontroller = new AbortController();
        const signal = jmscontroller.signal;

        setTimeout(() => jmscontroller.abort(), 5000);

        fetch("https://raw.githubusercontent.com/jmshea/Foundations-of-Data-Science-with-Python/main/07-bayesian-methods/questions/5-summary1.json", {signal})
        .then(response => response.json())
        .then(json => show_questions(json, ipdAbXsleggl))
        .catch(err => {
        console.log("Fetch error or timeout");
        show_questions(questionsipdAbXsleggl, ipdAbXsleggl);
        });
        }
        </script></div>
</div>
<p><strong>Liver Cancer Test Problems 2</strong></p>
<p>The following problems all rely on the following information – <strong>note that
the numbers for this review are different than the numbers used earlier
in this chapter</strong>:</p>
<p>A new computerized scan of the liver is used to help
identify whether a person has a normal liver (<span class="math notranslate nohighlight">\(N\)</span>), benign tumors
(<span class="math notranslate nohighlight">\(B\)</span>), or liver cancer (<span class="math notranslate nohighlight">\(C\)</span>).  The computer will automatically
classify the output to indicate tumors (<span class="math notranslate nohighlight">\(T\)</span>) or no tumors
(<span class="math notranslate nohighlight">\(\overline{T}\)</span>).</p>
<p>For a normal liver, the computer will indicate that there are NO
tumors with probability 0.95.  For a benign tumor, the computer
will indicate that there are tumors with probability 0.25.  For a
cancerous liver, the computer will indicate that there are tumors
with probability 0.99.</p>
<p>If the test is repeated, the scan will observe the liver at a
different angle, and the results will be conditionally independent
given the patient’s true condition (ie., <span class="math notranslate nohighlight">\(N\)</span>, <span class="math notranslate nohighlight">\(B\)</span>, or <span class="math notranslate nohighlight">\(C\)</span>).</p>
<p>A healthy patient is one who has no other indications of liver
tumors or cancer before having the computerized scan.  Such a
patient has</p>
<ul class="simple">
<li><p>probability 0.98 of having a normal liver,</p></li>
<li><p>probability 0.018 of having benign liver tumors,</p></li>
<li><p>and probability 0.002 of having liver cancer.</p></li>
</ul>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="fgsFsilRYrMM" data-shufflequestions="False"
               data-shuffleanswers="True"
               data-preserveresponses="false"
               data-numquestions="10"
               data-maxwidth="600"
               style="border-radius: 10px; text-align: left"> <style>
#fgsFsilRYrMM {
   --jq-multiple-choice-bg: #345995;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #e26d5a;
   --jq-numeric-bg: #5bc0eb;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-incorrect-color: #666666;
   --jq-correct-color: #87a878;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 15px;
    padding-bottom: 4px;
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
    min-height: 2em;
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsfgsFsilRYrMM=[
    {
    "question": "For a healthy patient, if the computerized scan indicates a tumor, what is the probability that the patient has liver cancer? Give your answer to 2 significant digits.",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.036,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    -0.01
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be negative. Your work may contain a math error."
            },
            {
                "type": "range",
                "range": [
                    1.01,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be greater than 1. Your work may contain a math error."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Apply Bayes' rule to solve this problem."
            }
        ]
    },
{
    "question": "For a healthy patient, if the computerized scan indicates a tumor, what is the probability that the patient has a benign tumor? Give your answer to 2 significant digits.",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.081,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "value",
                "value": 0.4,
                "correct": false,
                "feedback": "Incorrect. This is the probability that a tumor is detected given that the patient has a benign tumor; i.e., $P(T|B)$. This problem asks for $P(B|T)$."
            },
{
                "type": "range",
                "range": [
                    -1000000,
                    -0.01
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be negative. Your work may contain a math error."
            },
            {
                "type": "range",
                "range": [
                    1.01,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be greater than 1. Your work may contain a math error."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Apply Bayes' rule to solve this problem."
            }
        ]
    },
{
    "question": "For a healthy patient, if the computerized scan indicates a tumor, what is the probability that the patient has a healthy liver? Give your answer to 2 significant digits.",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.88,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "value",
                "value": 0.02,
                "correct": false,
                "feedback": "Incorrect. This is the probability that a tumor is detected given that the patient has a healthy liver; i.e., $P(T|N)$. This problem asks for $P(N|T)$."
            },
{
                "type": "range",
                "range": [
                    -1000000,
                    -0.01
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be negative. Your work may contain a math error."
            }, {
                "type": "range",
                "range": [
                    1.01,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be greater than 1. Your work may contain a math error."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Apply Bayes' rule to solve this problem."
            }
        ]
    },
    {
        "question": "For a healthy patient, if the scan detects a tumor, what is the maximum likelihood (ML) decision?",
        "type": "multiple_choice",
        "answers": [
            {
            "answer": "Normal liver ($N$)",
            "correct": false,
            "feedback": "Incorrect. The ML decision should correspond to the maximum of $P(T|N)$, $P(T|B}$, and $P(T|C)$."
        },
            {
            "answer": "Benign tumor ($B$)",
            "correct": false,
            "feedback": "Incorrect. The ML decision should correspond to the maximum of $P(T|N)$, $P(T|B}$, and $P(T|C)$."
        },
            {
            "answer": "Liver cancer ($C$)",
            "correct": true
        }
        ]
    },
    {
        "question": "For a healthy patient, if the scan detects a tumor, what is the maximum <i>a posteriori</i>(MAP) decision?",
        "type": "multiple_choice",
        "answers": [
            {
            "answer": "Normal liver ($N$)",
            "correct": true
        },
            {
            "answer": "Benign tumor ($B$)",
            "correct": false,
            "feedback": "Incorrect. The MAP decision should correspond to the maximum of $P(N|T)$, $P(B|T}$, and $P(C|T)$."
        },
            {
            "answer": "Liver cancer ($C$)",
            "correct": false,
            "feedback": "Incorrect. The MAP decision should correspond to the maximum of $P(N|T)$, $P(B|T}$, and $P(C|T)$."
        }
        ]
    }
]
;
    // Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.textContent = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == "True") {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.textContent = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);
        console.log(submission);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
        //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                console.log(answer.value);
                console.log(submission == answer.value);
                if (submission == answer.value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }
                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        return false;
    }

}

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.textContent = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
function jaxify(string) {
    var mystring = string;

    var count = 0;
    var loc = mystring.search(/([^\\]|^)(\$)/);

    var count2 = 0;
    var loc2 = mystring.search(/([^\\]|^)(\$\$)/);

    //console.log(loc);

    while ((loc >= 0) || (loc2 >= 0)) {

        /* Have to replace all the double $$ first with current implementation */
        if (loc2 >= 0) {
            if (count2 % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\[");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\]");
            }
            count2++;
        } else {
            if (count % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\(");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\)");
            }
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
        //console.log(mystring,", loc:",loc,", loc2:",loc2);
    }

    //console.log(mystring);
    return mystring;
}


function show_questions(json, mydiv) {
    console.log('show_questions');
    //var mydiv=document.getElementById(myid);
    var shuffle_questions = mydiv.dataset.shufflequestions;
    var num_questions = mydiv.dataset.numquestions;
    var shuffle_answers = mydiv.dataset.shuffleanswers;
    var max_width = mydiv.dataset.maxwidth;

    if (num_questions > json.length) {
        num_questions = json.length;
    }

    var questions;
    if ((num_questions < json.length) || (shuffle_questions == "True")) {
        //console.log(num_questions+","+json.length);
        questions = getRandomSubarray(json, num_questions);
    } else {
        questions = json;
    }

    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);

    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        //iDiv.id = 'quizWrap' + id + index;
        iDiv.id = 'quizWrap' + id;
        iDiv.className = 'Quiz';
        iDiv.setAttribute('data-qnum', index);
        iDiv.style.maxWidth  =max_width+"px";
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;
        
        var outerqDiv = document.createElement('div');
        outerqDiv.id = "OuterquizQn" + id + index;
        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id = "quizQn" + id + index;
        
        if (qa.question) {
            iDiv.append(outerqDiv);

            //qDiv.textContent=qa.question;
            qDiv.innerHTML = jaxify(qa.question);
            outerqDiv.append(qDiv);
        }

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa) {
            codeDiv = document.createElement('div');
            codeDiv.id = "code" + id + index;
            codeDiv.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = qa.code;
            outerqDiv.append(codeDiv);
            //console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id = "quizAns" + id + index;
        aDiv.className = 'Answer';
        iDiv.append(aDiv);

        //console.log(qa.type);

        var num_correct;
        if ((qa.type == "multiple_choice") || (qa.type == "many_choice") ) {
            num_correct = make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
            if ("answer_cols" in qa) {
                //aDiv.style.gridTemplateColumns = 'auto '.repeat(qa.answer_cols);
                aDiv.style.gridTemplateColumns = 'repeat(' + qa.answer_cols + ', 1fr)';
            }
        } else if (qa.type == "numeric") {
            //console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id = "fb" + id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className = "Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
    var preserveResponses = mydiv.dataset.preserveresponses;
    console.log(preserveResponses);
    console.log(preserveResponses == "true");
    if (preserveResponses == "true") {
        console.log(preserveResponses);
        // Create Div to contain record of answers
        var iDiv = document.createElement('div');
        iDiv.id = 'responses' + mydiv.id;
        iDiv.className = 'JCResponses';
        // Create a place to store responses as an empty array
        iDiv.setAttribute('data-responses', '[]');

        // Dummy Text
        iDiv.innerHTML="<b>Select your answers and then follow the directions that will appear here.</b>"
        //iDiv.className = 'Quiz';
        mydiv.appendChild(iDiv);
    }
//console.log("At end of show_questions");
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    return false;
}
/* This is to handle asynchrony issues in loading Jupyter notebooks
           where the quiz has been previously run. The Javascript was generally
           being run before the div was added to the DOM. I tried to do this
           more elegantly using Mutation Observer, but I didn't get it to work.

           Someone more knowledgeable could make this better ;-) */

        function try_show() {
          if(document.getElementById("fgsFsilRYrMM")) {
            show_questions(questionsfgsFsilRYrMM,  fgsFsilRYrMM); 
          } else {
             setTimeout(try_show, 200);
          }
        };
    
        //console.log(element);
        {
        const jmscontroller = new AbortController();
        const signal = jmscontroller.signal;

        setTimeout(() => jmscontroller.abort(), 5000);

        fetch("https://raw.githubusercontent.com/jmshea/Foundations-of-Data-Science-with-Python/main/07-bayesian-methods/questions/5-summary2.json", {signal})
        .then(response => response.json())
        .then(json => show_questions(json, fgsFsilRYrMM))
        .catch(err => {
        console.log("Fetch error or timeout");
        show_questions(questionsfgsFsilRYrMM, fgsFsilRYrMM);
        });
        }
        </script></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">dir</span> <span class="o">=</span> <span class="s1">&#39;07-bayesian-methods/questions/&#39;</span>
<span class="n">display_quiz</span><span class="p">(</span><span class="n">github</span>
             <span class="o">+</span> <span class="nb">dir</span>
             <span class="o">+</span><span class="s1">&#39;5-summary3.json&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">&#39;fdsp&#39;</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div id="CyTHrwhTOxAN" data-shufflequestions="False"
               data-shuffleanswers="True"
               data-preserveresponses="false"
               data-numquestions="3"
               data-maxwidth="600"
               style="border-radius: 10px; text-align: left"> <style>
#CyTHrwhTOxAN {
   --jq-multiple-choice-bg: #345995;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #e26d5a;
   --jq-numeric-bg: #5bc0eb;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-incorrect-color: #666666;
   --jq-correct-color: #87a878;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 15px;
    padding-bottom: 4px;
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
    min-height: 2em;
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsCyTHrwhTOxAN=[
    {
    "question": "Choose all of the following that are limitations of null hypothesis significance testing (NHST) when compared to Bayesian hypothesis testing.",
    "type": "multiple_choice",
    "answers": [
        {
        "answer": "NHST cannot assign probabilities to the null and alternative hypotheses.",
        "correct": true
    },
        {
        "answer": "NHST cannot utilize information from other sources about the probability of a hypothesis being true.",
        "correct": true
    },
        {
        "answer": "NHST is not easily generalized to handle multiple possible hypotheses.",
        "correct": true
    },
        {
        "answer": "NHST requires specifying a prior distribution for the hypotheses.",
        "correct": false,
        "feedback":  "Incorrect. This is true of Bayesian hypothesis tests."
    }
    ]
},
    {
    "question": "Choose all of the following that are typically true of a Bayesian hypothesis test.",
    "type": "multiple_choice",
    "answers": [
        {
        "answer": "It involves estimating the a posteriori probability of possible hypotheses.",
        "correct": true
    },
        {
        "answer": "It assigns probabilities to both null and alternative hypotheses.",
        "correct": true
    },
        {
        "answer": "It can utilize information from other sources about the probability of a hypothesis being true.",
        "correct": true
    },
        {
        "answer": "It operates under the assumption that the null hypothesis is true.",
        "correct": false,
        "feedback":  "Incorrect. This is only true for a NHST."
    }
    ]
},
    {
    "question": "Which of these purposes does the <i>a priori</i> distribution serve in Bayesian hypothesis testing?",
    "type": "multiple_choice",
    "answers": [
        {
        "answer": "It is needed in determining <i>a posteriori</i> probabilities.",
        "correct": true
    },
        {
        "answer": "It allows for the incorporation of prior knowledge about the problem.",
        "correct": true
    },
        {
        "answer": "It is used to calculate significance thresholds.",
        "correct": false
    }
    ]
},
    {
    "question": "In Bayesian hypothesis testing, what does a credible interval represent?",
    "type": "multiple_choice",
    "answers": [
        {
        "answer": "The range of values for which the null hypothesis is rejected.",
        "correct": false
    },
        {
        "answer": "The range of values that contain a certain percentage of the a posteriori probability.",
        "correct": true
    },
        {
        "answer": "The range of values for which the alternative hypothesis is accepted.",
        "correct": false
    },
        {
        "answer": "The range of values for which the prior probability is highest.",
        "correct": false
    }
    ]
},
    {
    "question": "When choosing between an uninformative and an informative prior in Bayesian hypothesis testing, which of these is the primary consideration?",
    "type": "multiple_choice",
    "answers": [
        {
        "answer": "The complexity of the model.",
        "correct": false
    },
        {
        "answer": "The ease of calculation.",
        "correct": false
    },
        {
        "answer": "The relevance of prior knowledge to the problem.",
        "correct": true
    },
        {
        "answer": "The size of the data set.",
        "correct": false
    }
    ]
},
    {
    "question": "What is the primary advantage of using an informative prior in Bayesian hypothesis testing?",
    "type": "multiple_choice",
    "answers": [
        {
        "answer": "It avoids the need to establish a model for possible behaviors of the variable.",
        "correct": false
    },
        {
        "answer": "It assigns equal probabilities to all possible outcomes, simplifying calculations.",
        "correct": false
    },
        {
        "answer": "It allows incorporating existing knowledge about the problem into the analysis.",
        "correct": true
    },
        {
        "answer": "It ensures that the observed data are not biased by prior assumptions.",
        "correct": false
    }
    ]
},
    {
    "question": "Which approach is typically used to establish an uninformative prior in Bayesian hypothesis testing?",
    "type": "multiple_choice",
    "answers": [
        {
        "answer": "Choosing a prior based on existing knowledge about the problem.",
        "correct": false
    },
        {
        "answer": "Assigning equal probabilities or probability densities to all possible outcomes.",
        "correct": true
    },
        {
        "answer": "Maximizing the likelihood of the observed data under the null hypothesis.",
        "correct": false
    },
        {
        "answer": "Choosing the <i>a priori</i> distribution based on a histogram of the data.",
        "correct": false
    }
    ]
},
    {
    "question": "Choose all of the following that are accurate characterizations of confidence intervals and credible intervals.",
    "type": "many_choice",
    "answers": [
        {
        "answer": "Credible intervals depend on a prior distribution, while confidence intervals do not.",
        "correct": true
    },
        {
        "answer": "Confidence intervals have a straightforward interpretation, while credible intervals do not.",
        "correct": true
    },
        {
        "answer": "Confidence intervals are used in NHST, while credible intervals are used in Bayesian hypothesis testing.",
        "correct": true
    },
        {
        "answer": "Confidence intervals are generated using a posteriori probabilities, while credible intervals are generated using a priori probabilities.",
        "correct": false,
        "feedfback": "Credible intervals are generated using <i>a posteriori</i> probabilities. Confidence intervals can be generated in multiple ways but are based on likelihoods under the null hypothesis."
    }
    ]
}
]
;
    // Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.textContent = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == "True") {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.textContent = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);
        console.log(submission);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
        //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                console.log(answer.value);
                console.log(submission == answer.value);
                if (submission == answer.value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }
                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        return false;
    }

}

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.textContent = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
function jaxify(string) {
    var mystring = string;

    var count = 0;
    var loc = mystring.search(/([^\\]|^)(\$)/);

    var count2 = 0;
    var loc2 = mystring.search(/([^\\]|^)(\$\$)/);

    //console.log(loc);

    while ((loc >= 0) || (loc2 >= 0)) {

        /* Have to replace all the double $$ first with current implementation */
        if (loc2 >= 0) {
            if (count2 % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\[");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\]");
            }
            count2++;
        } else {
            if (count % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\(");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\)");
            }
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
        //console.log(mystring,", loc:",loc,", loc2:",loc2);
    }

    //console.log(mystring);
    return mystring;
}


function show_questions(json, mydiv) {
    console.log('show_questions');
    //var mydiv=document.getElementById(myid);
    var shuffle_questions = mydiv.dataset.shufflequestions;
    var num_questions = mydiv.dataset.numquestions;
    var shuffle_answers = mydiv.dataset.shuffleanswers;
    var max_width = mydiv.dataset.maxwidth;

    if (num_questions > json.length) {
        num_questions = json.length;
    }

    var questions;
    if ((num_questions < json.length) || (shuffle_questions == "True")) {
        //console.log(num_questions+","+json.length);
        questions = getRandomSubarray(json, num_questions);
    } else {
        questions = json;
    }

    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);

    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        //iDiv.id = 'quizWrap' + id + index;
        iDiv.id = 'quizWrap' + id;
        iDiv.className = 'Quiz';
        iDiv.setAttribute('data-qnum', index);
        iDiv.style.maxWidth  =max_width+"px";
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;
        
        var outerqDiv = document.createElement('div');
        outerqDiv.id = "OuterquizQn" + id + index;
        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id = "quizQn" + id + index;
        
        if (qa.question) {
            iDiv.append(outerqDiv);

            //qDiv.textContent=qa.question;
            qDiv.innerHTML = jaxify(qa.question);
            outerqDiv.append(qDiv);
        }

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa) {
            codeDiv = document.createElement('div');
            codeDiv.id = "code" + id + index;
            codeDiv.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = qa.code;
            outerqDiv.append(codeDiv);
            //console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id = "quizAns" + id + index;
        aDiv.className = 'Answer';
        iDiv.append(aDiv);

        //console.log(qa.type);

        var num_correct;
        if ((qa.type == "multiple_choice") || (qa.type == "many_choice") ) {
            num_correct = make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
            if ("answer_cols" in qa) {
                //aDiv.style.gridTemplateColumns = 'auto '.repeat(qa.answer_cols);
                aDiv.style.gridTemplateColumns = 'repeat(' + qa.answer_cols + ', 1fr)';
            }
        } else if (qa.type == "numeric") {
            //console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id = "fb" + id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className = "Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
    var preserveResponses = mydiv.dataset.preserveresponses;
    console.log(preserveResponses);
    console.log(preserveResponses == "true");
    if (preserveResponses == "true") {
        console.log(preserveResponses);
        // Create Div to contain record of answers
        var iDiv = document.createElement('div');
        iDiv.id = 'responses' + mydiv.id;
        iDiv.className = 'JCResponses';
        // Create a place to store responses as an empty array
        iDiv.setAttribute('data-responses', '[]');

        // Dummy Text
        iDiv.innerHTML="<b>Select your answers and then follow the directions that will appear here.</b>"
        //iDiv.className = 'Quiz';
        mydiv.appendChild(iDiv);
    }
//console.log("At end of show_questions");
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    return false;
}
/* This is to handle asynchrony issues in loading Jupyter notebooks
           where the quiz has been previously run. The Javascript was generally
           being run before the div was added to the DOM. I tried to do this
           more elegantly using Mutation Observer, but I didn't get it to work.

           Someone more knowledgeable could make this better ;-) */

        function try_show() {
          if(document.getElementById("CyTHrwhTOxAN")) {
            show_questions(questionsCyTHrwhTOxAN,  CyTHrwhTOxAN); 
          } else {
             setTimeout(try_show, 200);
          }
        };
    
        //console.log(element);
        {
        const jmscontroller = new AbortController();
        const signal = jmscontroller.signal;

        setTimeout(() => jmscontroller.abort(), 5000);

        fetch("https://raw.githubusercontent.com/jmshea/Foundations-of-Data-Science-with-Python/main/07-bayesian-methods/questions/5-summary3.json", {signal})
        .then(response => response.json())
        .then(json => show_questions(json, CyTHrwhTOxAN))
        .catch(err => {
        console.log("Fetch error or timeout");
        show_questions(questionsCyTHrwhTOxAN, CyTHrwhTOxAN);
        });
        }
        </script></div>
</div>
<p><strong>Terminology Review</strong></p>
<p>Use the flashcards below to help you review the terminology introduced in this chapter. <span class="math notranslate nohighlight">\(~~~~ ~~~~ ~~~~\)</span></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jupytercards</span> <span class="kn">import</span> <span class="n">display_flashcards</span>
<span class="nb">dir</span><span class="o">=</span><span class="s1">&#39;07-bayesian-methods/flashcards/&#39;</span>

<span class="n">display_flashcards</span><span class="p">(</span><span class="n">github</span><span class="o">+</span> <span class="nb">dir</span> <span class="o">+</span> <span class="s1">&#39;5-summary.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
:root{
  --asparagus: #87a878ff;
  --terra-cotta: #e26d5aff;
  --cyan-process: #5bc0ebff;
  --dark-blue-gray: #666a86ff;
  --snow: #fffafbff;
  --rich-black-fogra-39: #090c08ff;
}


/* entire container, keeps perspective */
.flip-container {
	perspective: 1000px;
  touch-action: pinch-zoom pan-y;
}


.flip-container.flip .flipper {
    box-sizing: content-box;
	  transform: rotateY(180deg);
	/* transform: rotateY(180deg)  translateX(-6%);  */
}


.flip-container.slide .flipper.frontcard {
    filter: brightness(90%);
    position:absolute;
    z-index: -20;
    /* left: 20px; */
}

.flip-container.prepare .flipper.backcard {
    opacity:1;
    transition: display 0s;
    transform:  translateX(20px); 
}


.flip-container.slide .flipper.backcard {
    filter: brightness(115%);
    /* height: 360px; */
    opacity:1;
	  transform:  rotateY(3deg)  translateX(700px) translateZ(20px) scale(1, 1.05) rotate(3deg);
    z-index: 20;
    /* left: -20px; */
}




.flip-container.slideback .flipper.backcard {
    filter: brightness(100%);
    opacity: 1;
	  transform: translateX(0px) translateZ(20px) rotateY(0deg);
    z-index: 10;
}

.flip-container.slideback .flipper.frontcard {
    filter: brightness(90%);
    transform: translateX(0px) translateZ(-20px);
    z-index: -10;
}


.flip-container, .front, .back {
	  height: 200px;
	  width: 95%;
}




.flipper.frontcard {
    position:absolute;
	  transform: translateX(0px) rotateY(0deg) translateZ(20px);
    z-index: 10;
}

.flipper.backcard {
    filter: brightness(90%);
    opacity:0;
    position:absolute;
    transform: translateX(0px) translateZ(-20px);
    z-index: -10;
}




/* flip speed goes here */
.flipper {
    cursor:pointer;
	  height: 200px;
    margin-left:10px;
	  position: absolute;
    top: 0;
	  transform-style: preserve-3d;
	  transition: 0.6s;
    /* width: 95%; */
    width: 100%;
}

.flashcardtext{
    color: var(--snow);
    margin-left:3%;
    position:absolute;
    text-align:center;
    top: 50%;
    transform: translate(0, -50%);
    width:90%;
    font-size: 1.5em;
}

.back .flashcardtext{
    font-size: 1.2em;
}



/* hide back of pane during swap */
.front, .back {
    -webkit-backface-visibility: hidden;
	  backface-visibility: hidden;
	  left: 0;
	  position: absolute;
	  top: 0;
}

/* front pane, placed above back */
.front {
	  backface-visibility: hidden;
    background: var(--asparagus);
    transform: rotateY(0deg);
	  z-index: 2;
}

/* back, initially hidden pane */
.back {
	  backface-visibility: hidden;
    background: var(--dark-blue-gray);
	  transform: rotateY(180deg);
    left: 8px;
}

.jp-OutputArea-output .back {
	  transform: rotateY(180deg) translateZ(20px);
}

.next {
    color: var(--rich-black-fogra-39);
    cursor:pointer;
    font-size: 1.5em;
    /*left:90%; */
    margin-left: 70%;
    width: 55pt;
    height: 22pt;
    opacity:0.3;
    position:relative; 
    top:-1em;
}

.next svg {
    height:16pt;
    width:16pt;
    position:relative;
    top:-2pt;
}

.jp-OutputArea-output .next svg {
    top: 1pt;
}

.next.flipped {
    opacity:1;
}

.next.hide {
    opacity:0;
}


.flashcard{
    border-radius: 10px;
    outline: none;
    color: #fafafa;
    display:block;
    padding:10px;
  
}

.flashcardtext li{
    text-align: left;
}

@media only screen and (min-width:700px) {

    .flip-container, .front, .back {
	      height: 300px;
	      width: min(95%, 640px);
    }

    .flipper {
        margin-left:20px;
	      height: 300px;
    }

    .flashcardtext{
        font-size: 20pt;
    }

    .next {
        font-size: 16pt;
        left:min(80%, 450pt);
        margin-left: 0;
        width: 55pt;
        height: 22pt;
        top:-0.5em;
    }

    .back .flashcardtext{
        font-size: 1.5em;
    }

}

@media only screen and (min-width:660px) and (max-width:999px) {
    .next {
        left:0;
        margin-left: 80%;
    }

}

@media only screen and (max-width:680px) and (min-height:376px) {
    .flip-container, .front, .back {
	      height: 300px;
    }

    .flipper {
	      height: 300px;
    }
    .back {
        left: 4px;
    }


}

@media only screen and (max-width:330px) and (max-height:600px) {

    .back .flashcardtext{
        font-size: 1em;
    }
    .next {
        margin-left: 65%;
    }
    .back {
        left: 4px;
    }
}

</style></div><div class="output text_html"><div style="height:40px"></div><div class="flip-container" id="JhNyYGtLEeRq" tabindex="0" style="outline:none;"></div><div style="height:40px"></div><div class="next" id="JhNyYGtLEeRq-next" onclick="window.checkFlip('JhNyYGtLEeRq')"> </div> <div style="height:40px"></div></div><script type="application/javascript">/*!
 * swiped-events.js - v1.1.4
 * Pure JavaScript swipe events
 * https://github.com/john-doherty/swiped-events
 * @inspiration https://stackoverflow.com/questions/16348031/disable-scrolling-when-touch-moving-certain-element
 * @author John Doherty <www.johndoherty.info>
 * @license MIT
 */
!function(t,e){"use strict";"function"!=typeof t.CustomEvent&&(t.CustomEvent=function(t,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var a=e.createEvent("CustomEvent");return a.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),a},t.CustomEvent.prototype=t.Event.prototype),e.addEventListener("touchstart",function(t){if("true"===t.target.getAttribute("data-swipe-ignore"))return;s=t.target,r=Date.now(),n=t.touches[0].clientX,a=t.touches[0].clientY,u=0,i=0},!1),e.addEventListener("touchmove",function(t){if(!n||!a)return;var e=t.touches[0].clientX,r=t.touches[0].clientY;u=n-e,i=a-r},!1),e.addEventListener("touchend",function(t){if(s!==t.target)return;var e=parseInt(l(s,"data-swipe-threshold","20"),10),o=parseInt(l(s,"data-swipe-timeout","500"),10),c=Date.now()-r,d="",p=t.changedTouches||t.touches||[];Math.abs(u)>Math.abs(i)?Math.abs(u)>e&&c<o&&(d=u>0?"swiped-left":"swiped-right"):Math.abs(i)>e&&c<o&&(d=i>0?"swiped-up":"swiped-down");if(""!==d){var b={dir:d.replace(/swiped-/,""),xStart:parseInt(n,10),xEnd:parseInt((p[0]||{}).clientX||-1,10),yStart:parseInt(a,10),yEnd:parseInt((p[0]||{}).clientY||-1,10)};s.dispatchEvent(new CustomEvent("swiped",{bubbles:!0,cancelable:!0,detail:b})),s.dispatchEvent(new CustomEvent(d,{bubbles:!0,cancelable:!0,detail:b}))}n=null,a=null,r=null},!1);var n=null,a=null,u=null,i=null,r=null,s=null;function l(t,n,a){for(;t&&t!==e.documentElement;){var u=t.getAttribute(n);if(u)return u;t=t.parentNode}return a}}(window,document);

function jaxify(string) {
    var mystring = string;
    //console.log(mystring);

    var count = 0;
    var loc = mystring.search(/([^\\]|^)(\$)/);

    var count2 = 0;
    var loc2 = mystring.search(/([^\\]|^)(\$\$)/);

    //console.log(loc);

    while ((loc >= 0) || (loc2 >= 0)) {

        /* Have to replace all the double $$ first with current implementation */
        if (loc2 >= 0) {
            if (count2 % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\[");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\]");
            }
            count2++;
        } else {
            if (count % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\(");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\)");
            }
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
        //console.log(mystring,", loc:",loc,", loc2:",loc2);
    }

    //console.log(mystring);
    return mystring;
}

window.flipCard = function flipCard(ths) {
    //console.log(ths);
    //console.log(ths.id);
    ths.classList.toggle("flip"); 
    ths.focus();
    var next=document.getElementById(ths.id+'-next');
    next.style.pointerEvents='none';
    /* ths.blur(); */
    next.classList.add('flipped');
    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        //console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([ths]);
        }
    } else {
        //console.log('MathJax not detected');
    }


    setTimeout(reenableNext, 600, ths, next);
}

window.checkKey = function checkKey(container, event) {
    event.stopPropagation();
    /*
    console.log(container);
    console.log(event.key);
    console.log(event.code);
    */
    /* JMS:  Working here*/
    var next=document.getElementById(container.id+'-next');
    /* Only react if not already sliding */
    if (! next.classList.contains("hide")) {
        if ((event.key == "j") || (event.key == "Enter") || (event.key == "ArrowRight")) {
            window.checkFlip(container.id);
        }
        if (event.key == " ") {
            window.flipCard(container);
        }
    }
    event.preventDefault();
}


function reenableNext(ths, next) {
    next.style.pointerEvents='auto';
    /* ths.tabIndex= 0;*/
    /* ths.focus(); */
}



function slide2(containerId) {
    var container = document.getElementById(containerId);
    var next=document.getElementById(containerId+'-next');
    var frontcard = container.children[0];
    var backcard = container.children[1];
    container.style.pointerEvents='none';
    /* container.removeAttribute("tabindex");*/
    /* container.blur(); */
    //backcard.style.pointerEvents='none';
    next.style.pointerEvents='none';
    next.classList.remove('flipped');
    next.classList.add('hide');

    //container.classList.add("prepare");
    
    container.className="flip-container slide";
    backcard.parentElement.removeChild(frontcard);
    backcard.parentElement.appendChild(frontcard);
    setTimeout(slideback, 600, container, frontcard, backcard, next);
    
}


window.checkFlip = function checkFlip(containerId) {
    var container = document.getElementById(containerId);


    if (container.classList.contains('flip')) {
        container.classList.remove('flip');
        setTimeout(slide2, 600, containerId);
    } 
    else {
        slide2(containerId);
    }
}


function slideback(container, frontcard, backcard, next) {
    container.className="flip-container slideback";
    setTimeout(cleanup, 550, container, frontcard, backcard, next);
}

function cleanup(container, frontcard, backcard, next) {
    container.removeChild(frontcard);
    backcard.className="flipper frontcard";
    container.className="flip-container";

    var cardnum=parseInt(container.dataset.cardnum);

    let cardOrder = JSON.parse(container.dataset.cardOrder);

    var cards=eval('cards'+container.id);

    var flipper=createOneCard(container, false, cards, cardOrder[cardnum], cardnum);
    container.append(flipper);
    cardnum= (cardnum+1) % parseInt(container.dataset.numCards);
    if ((cardnum == 0) && (container.dataset.shuffleCards == "True")) {
        cardOrder = randomOrderArray(parseInt(container.dataset.numCards));
        container.dataset.cardOrder = JSON.stringify(cardOrder);
        console.log(cardOrder);
    }

    container.dataset.cardnum=cardnum;
    if (cardnum != 1){
        next.innerHTML="Next >";
    } else {
        //next.innerHTML="Reload \\(\\circlearrowleft\\) ";
        next.innerHTML='Reload <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 25 26"> <path d="M7,6a10,10,0,1,0,9,0" style="fill:none;stroke:black;stroke-width:2px" id="e2_circleArc"/> <line id="e3_line" x1="17" y1="6.5" x2="17.5" y2="15" style="stroke:black;fill:none;stroke-width:2px"/> <line id="e4_line" x1="16.5" y1="6.5" x2="26" y2="8" style="stroke:black;fill:none;stroke-width:2px"/> </svg> '
        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            //console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([next]);
            }
        } else {
            //console.log('MathJax not detected');
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        //console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset();
        }
    } else {
        //console.log('MathJax not detected');
    }


    next.style.pointerEvents='auto';
    container.style.pointerEvents='auto';
    /* container.tabIndex= 0; */
    /* container.focus(); */
    next.classList.remove('hide');
    container.addEventListener('swiped-left', function(e) {
        /*
          console.log(e.detail);
          console.log(id);
        */
        checkFlip(container.id);
    }, {once: true });


}


function createOneCard  (mydiv, frontCard, cards, cardnum, seq) {
    var colors=eval('frontColors'+mydiv.id);
    var backColors=eval('backColors'+mydiv.id);
    var textColors=eval('textColors'+mydiv.id);
    //console.log(backColors)

    var flipper = document.createElement('div');
    if (frontCard){
        flipper.className="flipper frontcard";    
    }
    else {
        flipper.className="flipper backcard";   
    }

    var front = document.createElement('div');
    front.className='front flashcard';

    var frontSpan= document.createElement('span');
    frontSpan.className='flashcardtext';
    frontSpan.innerHTML=jaxify(cards[cardnum]['front']);
    frontSpan.style.color=textColors[seq % textColors.length];
    //frontSpan.textContent=jaxify(cards[cardnum]['front']);
    //front.style.background='var(' + colors[cardnum % colors.length] + ')';
    front.style.background=colors[seq % colors.length];

    front.append(frontSpan);
    flipper.append(front);

    var back = document.createElement('div');
    back.className='back flashcard';
    back.style.background=backColors[seq % backColors.length];

    var backSpan= document.createElement('span');
    backSpan.className='flashcardtext';
    backSpan.innerHTML=jaxify(cards[cardnum]['back']);
    backSpan.style.color=textColors[seq % textColors.length];
    back.append(backSpan);

    flipper.append(back);

    return flipper;

}

function randomOrderArray(N) {
    // Create an array with numbers from 0 to N-1
    let arr = Array.from({ length: N }, (_, index) => index);

    // Shuffle the array using Fisher-Yates algorithm
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }

    return arr;
}

function createStructuredData(mydiv, cards, title, subject) {
    var structuredData = {
        "@context": "https://schema.org/",
        "@type": "Quiz",
        "about": {
            "@type": "Thing"
        },
        "educationalAlignment": [
            {
                "@type": "AlignmentObject",
                "alignmentType": "educationalSubject"
            }
        ],
        "hasPart": []
    };

    structuredData["about"]["name"] = title;
    structuredData["educationalAlignment"][0]["targetName"] = subject;

    for (var i=0; i<cards.length; i++) {
        var newPart = {
            "@context": "https://schema.org/",
            "@type": "Question",
            "eduQuestionType": "Flashcard",
            "acceptedAnswer": {
                "@type": "Answer",
            }
        };

        newPart["text"] = cards[i]["front"];
        newPart["acceptedAnswer"]["text"] = cards[i]["back"];

        structuredData["hasPart"].push(newPart);
    }
    /*console.log(structuredData);*/

    var el = document.createElement('script');
    el.type = 'application/ld+json';
    el.text = JSON.stringify(structuredData);

    mydiv.parentElement.appendChild(el);

}



function createCards(id, keyControl, grabFocus, shuffleCards, title, subject) {
    console.log(id);

    var mydiv=document.getElementById(id);
    /*mydiv.onclick = window.flipCard(mydiv);*/
    /*
    mydiv.addEventListener('click', function(){window.flipCard(mydiv);}, false);
    mydiv.addEventListener('keydown', function(event){window.checkKey(mydiv,event);}, true);
    */
    mydiv.onclick = function(){window.flipCard(mydiv);};
    //console.log(keyControl);
    if (keyControl == "True"){
        mydiv.onkeydown = function(event){window.checkKey(mydiv,event);};
    }
    /* mydiv.addEventListener('keydown', function(event){event.stopPropagation(); console.log(event); event.preventDefault();}, true); */
    /*mydiv.onkeypress = function(event){console.log(event); event.preventDefault();};*/

    //console.log(mydiv);

    var cards=eval('cards'+id);
    mydiv.dataset.cardnum=0;
    mydiv.dataset.numCards=cards.length;

    mydiv.dataset.shuffleCards = shuffleCards;
    var cardOrder;
    if (shuffleCards == "True"){
        cardOrder = randomOrderArray(cards.length);
    } else {
        cardOrder = Array.from({ length: cards.length }, (_, index) => index);
    }
    mydiv.dataset.cardOrder = JSON.stringify(cardOrder);
    console.log(mydiv.dataset.cardOrder);


    mydiv.addEventListener('swiped-left', function(e) {
        /*
          console.log(e.detail);
          console.log(id);
        */
        checkFlip(id);
    }, {once: true});

    if ((title!="") || (subject != "")){
        createStructuredData(mydiv, cards, title, subject);
    }

    var cardnum=0;

    for (var i=0; i<2; i++) {



        var flipper;
        if (i==0){
            flipper=createOneCard(mydiv, true, cards, cardOrder[cardnum], cardnum);
        }
        else {
            flipper=createOneCard(mydiv, false, cards, cardOrder[cardnum], cardnum);
        }

        mydiv.append(flipper);
        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (typeof version == 'undefined') {
                setTimeout(function(){
                    var version = MathJax.version;
                    console.log('After sleep, MathJax version', version);
                    if (version[0] == "2") {
                        MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
                    } else if (version[0] == "3") {
                        if (MathJax.hasOwnProperty('typeset') ) {
                            MathJax.typeset([flipper]);
                        } else {
                            console.log('WARNING: Trying to force load MathJax 3');
                            window.MathJax = {
                                tex: {
                                    inlineMath: [['$', '$'], ['\\(', '\\)']]
                                },
                                svg: {
                                    fontCache: 'global'
                                }
                            };

                            (function () {
                                var script = document.createElement('script');
                                script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                                script.async = true;
                                document.head.appendChild(script);
                            })();
                        }
                        MathJax.typeset([flipper]);
                    }
                }, 500);
            } else{
                console.log('MathJax version', version);
                if (version[0] == "2") {
                    MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
                } else if (version[0] == "3") {
                    if (version[0] == "2") {
                        MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
                    } else if (version[0] == "3") {
                        if (MathJax.hasOwnProperty('typeset') ) {
                            MathJax.typeset([flipper]);
                        } else {
                            console.log('WARNING: Trying to force load MathJax 3');
                            window.MathJax = {
                                tex: {
                                    inlineMath: [['$', '$'], ['\\(', '\\)']]
                                },
                                svg: {
                                    fontCache: 'global'
                                }
                            };

                            (function () {
                                var script = document.createElement('script');
                                script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                                script.async = true;
                                document.head.appendChild(script);
                            })();
                        }
                        MathJax.typeset([flipper]);
                    }
                }
            }
        } else {
            console.log('MathJax not detected');
        }


        cardnum = (cardnum + 1) % mydiv.dataset.numCards;
    }
    mydiv.dataset.cardnum = cardnum;

    var next=document.getElementById(id+'-next');
    if (cards.length==1) {
        // Don't show next if no other cards!
        next.style.pointerEvents='none';
        next.classList.add('hide');
    } else {
        next.innerHTML="Next >";
    }

    if (grabFocus == "True" )
        mydiv.focus();

    return flipper;
}





        function try_create() {
          if(document.getElementById("JhNyYGtLEeRq")) {
            createCards("JhNyYGtLEeRq", "True", "False", "False", "", "");
          } else {
             setTimeout(try_create, 200);
          }
        };
    
var cardsJhNyYGtLEeRq=[
    {
        "front": "stochastic system",
        "back": "A system with one or more inputs and one or more outputs, for which the outputs are not a deterministic function of the inputs."
    },
    {
        "front": "sensitivity",
        "back": "In a detection test, the probability of detecting some presence or effect, given that presence or effect is actually there."
    },
    {
        "front": "likelihoods<br>(discrete stochastic systems)",
        "back": "For a stochastic system with a discrete input events $\\{ A_0, A_i, \\ldots \\}$ and  discrete output events $\\{B_0, B_1, \\ldots\\}$,  the <I>likelihoods</I> are the conditional probabilities of the output events given the input events:\n \\[ P(B_j| A_i). \\]"
    },
    {
        "front": "<I>a posteriori</I> probability<br>(discrete stochastic system)",
        "back": "For a stochastic system with discrete input events $\\{ A_0, A_i, \\ldots \\}$ and discrete output events $\\{B_0, B_1, \\ldots\\}$,  the <I>a posterior probabilities</I> (APPs) are the conditional probabilities of the input events given the observed outputs:\n \\[ P(A_i | B_j). \\]"
    },
    {
        "front": "<I>a priori</i> probability<br>(discrete stochastic system)",
        "back": "For a stochastic system with discrete input events $\\{ A_0, A_i, \\ldots \\}$,  the <I>a priori probabilities</I> are the probabilities of the input events before any output is observed:\n \\[ P(A_i). \\]"
    },
    {
        "front": "Bayes' Rule<br>(discrete stochastic system)",
        "back": "Given likelihoods $P(B_j|A_i)$ and <I>a prioris</I> $P(A_i)$, the <I>a posteriori</I> probabilities (APPs) can be written as \n \\[ P(A_i|B_j) = \\frac{P\\left(B_j \\left \\vert A_i \\right. \\right) P\\left( A_i \\right)} { \\sum_i P\\left(B_j \\left \\vert A_i \\right. \\right) P\\left( A_i \\right)} \\]"
    },
    {
        "front": "base rate fallacy",
        "back": "Assuming the likelihoods will determine the probabilities and negelecting the <I>a prioris</I>, which give some <B>base rate</B> at which one of the phenomena occurs."
    },
    {
        "front": "hidden state",
        "back": "An internal state (for example, memory contents) of a system that can affect outputs but that is not directly observable."
    },
    {
        "front": "decision rule<br>(discrete stochastic system)",
        "back": "For a discrete stochastic system with inputs (or hidden states) $\\{A_i\\}$ and outputs $\\{B_j\\}$, a <I>decision rule</I> for an observation $B_j$ gives a choice of corresponding input event $A_i$.<br> The decision rule may be chosen to optimize some function of the inputs and outputs (e.g., likelihood or APP)."
    },
    {
        "front": "maximum likelihood (ML) rule<br>(discrete stochastic system)",
        "back": "For a stochastic system with a discrete input events $\\{ A_0, A_i, \\ldots \\}$ and  discrete output events $\\{B_0, B_1, \\ldots\\}$,  the <I>maximum likelihood</I> decision rule given $B_j$ was received is <br> $$ \\hat{A}_i, \\mbox{ where } i = \\arg \\max_{i \\in \\{0,1\\}} P(B_j|A_i). $$ "
    },
    {
        "front": "MAP rule<br>(discrete stochastic system)",
        "back": "For a stochastic system with a discrete input events $\\{ A_0, A_i, \\ldots \\}$ and  discrete output events $\\{B_0, B_1, \\ldots\\}$,  the <I>maximum a posteriori (MAP)</I> decision rule given $B_j$ was received is <br> $$ \\hat{A}_i, \\mbox{ where } i = \\arg \\max_{i \\in \\{0,1\\}} P(A_i|B_j). $$ "
    },
    {
        "front": "uninformative prior",
        "back": "A collection of <i>a priori</i> probabilities that do not give preference to any of the outcomes; usually flat (constant) across the set of outcomes."
    },
    {
        "front": "informative prior",
        "back": "A collection of <i>a priori</i> probabilities that are based on information that are external to the data and that are usually not flat (constant) across the set of outcomes."
    },
    {
        "front": "credible interval",
        "back": "A $C$% <i>credible interval</i> is an interval of values that contains $C$% of the <i>a posteriori</i> probability."
    }
];
var frontColorsJhNyYGtLEeRq= ["var(--asparagus)", "var(--terra-cotta)", "var(--cyan-process)" ];
var backColorsJhNyYGtLEeRq= ["var(--dark-blue-gray)" ];
var textColorsJhNyYGtLEeRq= ["var(--snow)" ];


        {
        const jmscontroller = new AbortController();
        const signal = jmscontroller.signal;

        setTimeout(() => jmscontroller.abort(), 5000);

        fetch("https://raw.githubusercontent.com/jmshea/Foundations-of-Data-Science-with-Python/main/07-bayesian-methods/flashcards/5-summary.json", {signal})
        .then(response => response.json())
        .then(json => createCards("JhNyYGtLEeRq", "True", "False", "False", "", ""))
        .catch(err => {
        console.log("Fetch error or timeout");
        try_create(); 
        });
        }
        </script></div>
</div>
<p><strong>Spaced Repetition</strong></p>
<p>Use these questions to review material from previous chapter:</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="rBSEUpuhyWch" data-shufflequestions="False"
               data-shuffleanswers="True"
               data-preserveresponses="false"
               data-numquestions="5"
               data-maxwidth="600"
               style="border-radius: 10px; text-align: left"> <style>
#rBSEUpuhyWch {
   --jq-multiple-choice-bg: #345995;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #e26d5a;
   --jq-numeric-bg: #5bc0eb;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-incorrect-color: #666666;
   --jq-correct-color: #87a878;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 15px;
    padding-bottom: 4px;
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
    min-height: 2em;
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsrBSEUpuhyWch=[
    {
        "question": "A box contains 2 white balls and 1 black ball. I reach in the box and remove one ball. Without inspecting it, I place it in my pocket. I withdraw a second ball. What is the probability that the second ball is white?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "1/2",
                "correct": false
            },
            {
                "answer": "2/3",
                "correct": true
            },
            {
                "answer": "1/3",
                "correct": false
            },
            {
                "answer": "Impossible to know without knowing color of first ball",
                "correct": false
            },
            {
                "answer": "0",
                "correct": false
            },
            {
                "answer": "Something else",
                "correct": false
            }
        ]
    },
    {
        "question": "A box contains 2 white balls and 1 black ball. I reach in the box and remove one ball. Without inspecting it, I place it in my pocket. I withdraw a second ball. If the second ball is white, what is the probability that the ball in my pocket is white?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "1/2",
                "correct": true
            },
            {
                "answer": "2/3",
                "correct": false
            },
            {
                "answer": "1/3",
                "correct": false
            },
            {
                "answer": "Impossible to know without knowing color of first ball",
                "correct": false
            },
            {
                "answer": "0",
                "correct": false
            },
            {
                "answer": "Something else",
                "correct": false
            }
        ]
    },
    {
        "question": "A box contains 2 white balls and 1 black ball. I reach in the box and remove one ball. Without inspecting it, I place it in my pocket. I then look into the box and remove a white ball. What is the probability that the ball in my pocket is white?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "1/2",
                "correct": false
            },
            {
                "answer": "2/3",
                "correct": true
            },
            {
                "answer": "1/3",
                "correct": false
            },
            {
                "answer": "Impossible to know without knowing color of first ball",
                "correct": false
            },
            {
                "answer": "0",
                "correct": false
            },
            {
                "answer": "Something else",
                "correct": false
            }
        ]
    },
    {
        "question": "For the Monty Hall problem, does it matter if you switch doors?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "No. The car is behind any door with probability ${}^1{\\mskip -2.5mu/\\mskip -1mu}_3$",
                "correct": false
            },
            {
                "answer": "Yes. The host has eliminated a goat. The probability of selecting the car is now ${}^1{\\mskip -2.5mu/\\mskip -1mu}_2$",
                "correct": false
            },
            {
                "answer": "Yes. Switching can increase the probability of selecting the car to stricly more than ${}^1{\\mskip -2.5mu/\\mskip -1mu}_2$",
                "correct": true
            },
            {
                "answer": "No. Switching reduces the probability of selecting the car",
                "correct": false
            },
            {
                "answer": "Something else",
                "correct": false
            }
        ]
    },
    {
        "question": "Suppose a magician has three coins: one is a fair coin, and two are two-headed coins. The magician chooses a coin at random and flips it. If the coin comes up heads, what is the probability it will come up heads on a second flip of the same coin?",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.83,
                "correct": false,
                "feedback": "Incorrect. Having 2 two-headed coins is going to increase the probability of getting heads on the second flip in comparison to when there is only one fair coin. If you are simulating this probability, you only need to add one new coin to the original coins list in the simulation."
            },
            {
                "type": "value",
                "value": 0.9,
                "correct": true,
                "feedback": "Correct. "
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "Remember that probabilities must be non-negative. You can try again."
            },
            {
                "type": "range",
                "range": [
                    1,
                    1000000
                ],
                "correct": false,
                "feedback": "Remember that probabilities cannot be larger than 1. You can try again."
            }
        ]
    },
    {
        "question": "Suppose a magician has three coins: two are fair, and one is a two-headed coin. The magician chooses a coin at random and flips it. If the coin comes up heads, what is the probability it will come up heads on a second flip of the same coin?",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.83,
                "correct": true,
                "feedback": "Incorrect. Having two fair coins is going to reduce the probability of getting heads on the second flip in comparison to when there is only one fair coin. If you are simulating this probability, you only need to add one new coin to the original coins list in the simulation."
            },
            {
                "type": "value",
                "value": 0.75,
                "correct": true,
                "feedback": "Correct. "
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "Remember that probabilities must be non-negative. You can try again."
            },
            {
                "type": "range",
                "range": [
                    1,
                    1000000
                ],
                "correct": false,
                "feedback": "Remember that probabilities cannot be larger than 1. You can try again."
            }
        ]
    },
    {
        "question": "For the magician's coin problem, what do you believe is the value of $P(H_2|H_1)$? (You can enter a fraction or at least two decimal places).",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.83,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "value",
                "value": 0.75,
                "correct": false,
                "feedback": "It is tempting to think that these flips are independent of each other. But they are not!"
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "Remember that probabilities must be non-negative. You can try again."
            },
            {
                "type": "range",
                "range": [
                    1,
                    1000000
                ],
                "correct": false,
                "feedback": "Remember that probabilities cannot be larger than 1. You can try again."
            }
        ]
    },
    {
        "question": "For the Defective Computers in a Lab problem, the sample space can be written as $$S=\\left\\{AD, AN, BD_1, BD_2, BN\\right\\}.$$ A user sits down at a computer at random. Find $P(E_A)$, the probability that the computer is from manufacturer $A$. ",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 0.4,
                "correct": true,
                "feedback": "Correct! Since there are two computers from manufacturer $A$ (i.e. $AD$ and $AN$) among the total 5 computers, $P(E_A)=2/5$."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. This is a fair experiment, so $$P(E_A)=\\frac{|E_A|}{|S|}.$$"
            },
            {
                "type": "range",
                "range": [
                    1.0000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be more than 1."
            },
            {
                "type": "range",
                "range": [
                    -100000000,
                    0
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be less than 0."
            }
        ]
    },
    {
        "question": "For the Defective Computers in a Lab problem, the sample space can be written as $$S=\\left\\{AD, AN, BD_1, BD_2, BN\\right\\}.$$ A user sits down at a computer at random. Find $P(E_B)$, the probability that the computer is from manufacturer $A$. ",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 0.6,
                "correct": true,
                "feedback": "Correct! Since there are three computers from manufacturer $B$ (i.e. $BD_1$, $BD_2$,  and $BN$) among the total 5 computers, $P(E_B)=3/5$."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. This is a fair experiment, so $$P(E_B)=\\frac{|E_B|}{|S|}.$$"
            },
            {
                "type": "range",
                "range": [
                    1.0000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be more than 1."
            },
            {
                "type": "range",
                "range": [
                    -100000000,
                    0
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be less than 0."
            }
        ]
    },
    {
        "question": "For the Defective Computers in a Lab problem, the sample space can be written as $$S=\\left\\{AD, AN, BD_1, BD_2, BN\\right\\}.$$ A user sits down at a computer at random. Find $P(E_D)$, the probability that the computer is defective. ",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 0.6,
                "correct": true,
                "feedback": "Correct! Since there are three defective computers (i.e. $AD$, $BD_1$, and $BD_2$) among the total 5 computers, $P(E_D)=3/5$."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. This is a fair experiment, so $$P(E_D)=\\frac{|E_D|}{|S|}.$$"
            },
            {
                "type": "range",
                "range": [
                    1.0000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be more than 1."
            },
            {
                "type": "range",
                "range": [
                    -100000000,
                    0
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be less than 0."
            }
        ]
    },
    {
        "question": "For the Defective Computers in a Lab problem, find the conditional probability that the chosen computer is from manfacturer $A$ given that it is defective, $P(E_A|E_D)$.",
        "type": "numeric",
        "answers": [
            {
                "type": "range",
                "range": [
                    0.33,
                    0.34
                ],
                "correct": true,
                "feedback": "Correct! Given that the computer is defective, the possible outcomes are $\\{AD, BD_1, BD_2\\}$, one of which is from manufacturer $A$. Thus, $P(E_A|E_D)=1/3$."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. Find the set of outcomes based on the conditional information. Then find the probability assuming equally likely outcomes."
            },
            {
                "type": "range",
                "range": [
                    1.0000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be more than 1."
            },
            {
                "type": "range",
                "range": [
                    -100000000,
                    0
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be less than 0."
            }
        ]
    },
    {
        "question": "For the Defective Computers in a Lab problem, find the conditional probability that the chosen computer is from manfacturer $B$ given that it is defective, $P(E_B|E_D)$.",
        "type": "numeric",
        "answers": [
            {
                "type": "range",
                "range": [
                    0.66,
                    0.67
                ],
                "correct": true,
                "feedback": "Correct! Given that the computer is defective, the possible outcomes are $\\{AD, BD_1, BD_2\\}$, two of which is from manufacturer $A$. Thus, $P(E_B|E_D)=2/3$."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. Find the set of outcomes based on the conditional information. Then find the probability assuming equally likely outcomes."
            },
            {
                "type": "range",
                "range": [
                    1.0000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be more than 1."
            },
            {
                "type": "range",
                "range": [
                    -100000000,
                    0
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be less than 0."
            }
        ]
    },
    {
        "question": "For the Defective Computers in a Lab problem, find the conditional probability that the chosen computer is defective given that it is from manfacturer $A$, $P(E_D|E_A)$.",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 0.5,
                "correct": true,
                "feedback": "Correct! You should have calculated this using the ratio of $P(E_D \\cap E_A)= 1/5$ and $P(E_A) = 2/5.$"
            },
            {
                "type": "range",
                "range": [
                    0.33,
                    0.34
                ],
                "correct": true,
                "feedback": "Note that $P(E_D|E_A) \\ne P(E_A|E_D)$. Use the definition of conditional probability to calculate  $P(E_D|E_A) = P(E_D \\cap E_A)/ P(E_A)$."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. Use the definition of conditional probability to calculate $P(E_D|E_A) = P(E_D \\cap E_A)/ P(E_A)$."
            },
            {
                "type": "range",
                "range": [
                    1.0000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be more than 1."
            },
            {
                "type": "range",
                "range": [
                    -100000000,
                    0
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be less than 0."
            }
        ]
    },
    {
        "question": "For the Defective Computers in a Lab problem, find the conditional probability that the chosen computer is defective given that it is from manfacturer $B$, $P(E_D|E_B)$.",
        "type": "numeric",
        "answers": [
            {
                "type": "range",
                "range": [
                    0.66,
                    0.67
                ],
                "correct": true,
                "feedback": "Correct! You should have calculated this using the ratio of $P(E_D \\cap E_B)= 2/5$ and $P(E_B) = 3/5.$"
            },
            {
                "type": "value",
                "value": 0.5,
                "correct": false,
                "feedback": "Incorrect. Note that $P(E_D|E_B) \\ne P\\left(E_D\\left| \\overline{E_B} \\right. \\right)$. Use the definition of conditional probability to calculate $P(E_D|E_B) = P(E_D \\cap E_B)/ P(E_B)$."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. Use the definition of conditional probability to calculate $P(E_D|E_B) = P(E_D \\cap E_B)/ P(E_B)$."
            },
            {
                "type": "range",
                "range": [
                    1.0000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be more than 1."
            },
            {
                "type": "range",
                "range": [
                    -100000000,
                    0
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be less than 0."
            }
        ]
    },
    {
        "question": "For events $A$ and $B$ with $P(B)>0$, which of these define the conditional probability of $A$ given $B$?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "$|A \\cap B|/|B|$",
                "correct": false,
                "feedback": "Incorrect. This is true if the outcomes in $S$ are equally likely, but is not true in general."
            },
            {
                "answer": "$P(A)/P(B)$",
                "correct": false,
                "feedback": "Incorrect. This will hold if $A \\subset B$, but is not true in general."
            },
            {
                "answer": "$P(A \\cap B)/P(A)$",
                "correct": false,
                "feedback": "Incorrect. One way to remember this is that the conditioning bar $\\mid$ looks kind of like a divide sign &mdash; the denominator will be the probability of whatever is to the right of the conditioning bar."
            },
            {
                "answer": "$P(A \\cup B)/P(A)$",
                "correct": false
            },
            {
                "answer": "$P(A \\cup B)/P(B)$",
                "correct": false
            },
            {
                "answer": "$P(A \\cap B)/P(B)$",
                "correct": true
            }
        ]
    },
    {
        "question": "Consider a probability space $\\left( S, \\mathcal{F}, P\\right)$ and an event $C \\in \\mathcal{F}$ with $P(C)>0$.  Form a  conditional probability measure such that for any event $E \\in \\mathcal{F}$, $P(E \\mid C) = P(E \\cap C) / |(C)$.  Which of the following axioms axioms/properties hold if we apply $P(E|C)$ using the original sample space $S$ and event class $\\mathcal{F}$?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "$P(E \\mid C) \\ge 0$ for all $E \\in \\mathcal{F}$",
                "correct": true
            },
            {
                "answer": "$P(S \\mid B ) = 1$",
                "correct": true
            },
            {
                "answer": "If $A \\in \\mathcal{F}$ and $B \\in \\mathcal{F}$, then $P(A \\cup B \\mid C) = P(A \\mid C) + P(B \\mid C)$",
                "correct": true
            },
            {
                "answer": "If $E \\in \\mathcal{F}$ with $P(E)> 0$, then $P(E \\mid C) >0$",
                "correct": false,
                "feedback": "Incorrect. We will see that a conditional probability may be less than, equal to, or larger than the corresponding unconditioned probability."
            }
        ]
    },
    {
        "question": "Consider events $A$ and $B$ with both $P(A)>0$ and $P(B)>0.$ Which of the following statements are true?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "$$P(A|B) \\ge P(A)$$ (I.e., given some information, the probability increases or remains the same.)",
                "correct": false,
                "feedback": "Incorrect. Try again."
            },
            {
                "answer": "$$P(A|B) \\le P(A)$$ (I.e., given some information, the probability decreases or remains the same.)",
                "correct": false,
                "feedback": "Incorrect. Try again."
            },
            {
                "answer": "$$P(A|B) = P(A)$$ (Conditional information does not change the probability of an event.)",
                "correct": false,
                "feedback": "Incorrect. You should have already seen multiple examples to disprove this in Chapter 5. If you believed this answer was correct when you chose it, you should review Chapter 5 from the beginning."
            },
            {
                "answer": "$P(A|B)$ may be less than, equal to, or greater than $P(A),$ depending on the information given.",
                "correct": true,
                "feedback": "Correct. See the discussion below."
            }
        ]
    },
    {
        "question": "When estimating a conditional probability like $P(A \\mid B)$ via simulation, which of these probabilities will determine the number of simulation iterations needed to estimate $P(A \\mid B)$ accurately?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "$P(A \\mid B)$",
                "correct": false,
                "feedback": "Incorrect. This will often severely underestimate the number of simulation iterations needed."
            },
            {
                "answer": "$P(A)$",
                "correct": false
            },
            {
                "answer": "$P(B)$",
                "correct": false
            },
            {
                "answer": "$P(A \\cap B)$",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "$P(A \\cup B)$",
                "correct": false,
                "feedback": "Incorrect. Recall that $P(A \\mid B) = P(A \\cap B)/P(B)$. The probability of the union of $A$ and $B$ is not involved."
            }
        ]
    },
    {
        "question": "Researchers have developed a new blood test for patients in their 50s that can predict whether a patient will get Alzheimer's disease by age 75. The percentage of patients that will get Alzheimer's disease by age 75 is approximately 1%. Suppose the researchers believe their test will be approximately 60% accurate in identifying patients who will get Alzheimer's by age 75. Which of the following represents a reasonable number of patients that should be enrolled in the study to estimate the probability that a patient who will get Alzheimer's by age 75 will be identified by the test?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "1,000",
                "correct": false,
                "feedback": "Incorrect. 1,000 patients would result in approximately 10 patients who develop Alzheimer's. It will be hard to identify whether the test was effective with such a small group of people who develop Alzheimer's."
            },
            {
                "answer": "20 to 200",
                "correct": false,
                "feedback": "Incorrect. Even though the conditional probability of identifying Alzheimer's in people who will develop it by age 75 is large, we cannot use that conditional probability to choose the sample size. For example, even with 200 patients, the number of patients who will develop Alzheimer's will most likely be around 2."
            },
            {
                "answer": "20,000",
                "correct": true,
                "feedback": "Correct. With 20,000 patients, we will have approximately 100 people who both test positive and develop Alzheimer's. That should be sufficient to estimate the probability that the test accurately predicts who will develop Alzheimer's."
            },
            {
                "answer": "200,000",
                "correct": true,
                "feedback": "Correct. This should provide a very accurate estimate of the probability that the test accurately predicts who will develop Alzheimer's."
            },
            {
                "answer": "2,000,000",
                "correct": false,
                "feedback": "Incorrect. Although this will accurately estimate this probability, it will come at great expense in comparison to the additional accuracy achieved. 20,000 patients should be sufficient for a reasonable estimate of the probability."
            }
        ]
    },
    {
        "question": "Let $A$ and $B$ be events with non-zero probability on some probability space. Which of the following must be true for $P(A)$ and $P(B)$ to be statistically independent?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "$P(A \\cap B) = P(A) P(B)$ ",
                "correct": false
            },
            {
                "answer": "$P(A \\cap B) = P(A) $ ",
                "correct": false
            },
            {
                "answer": "$P(A \\cap B) = P(B) $ ",
                "correct": false
            },
            {
                "answer": "$P(A \\cup B) = P(A) + P(B)$ ",
                "correct": false
            },
            {
                "answer": "Something else",
                "correct": true,
                "feedback": "Correct. <b>Probabilities</b> cannot be statistically independent. We could ask what condition would be required for the <b>events</b> $A$ and $B$ to be independent, but that was not the question."
            }
        ]
    },
    {
        "question": "At a certain university, students access the Internet through either WiFi or cellular data. However, there are some places on campus where each of these do not offer connectivity. For a randomly selected location on the University's campus, the probability of a WiFi connection is 0.8 and  the probability of a cellular data connection is 0.9. If connectivity across these two technologies is independent, what is the probability of being able to connect to the Internet at a randomly selected location?",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 0.98,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "range": [
                    1e-11,
                    0.899999999999
                ],
                "correct": false,
                "feedback": "Incorrect. We are looking for the probability of a union of events. It cannot be less than the probability of either of the individual events."
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be greater than 1."
            }
        ]
    },
    {
        "question": "A fair six-sided die is rolled 4 times.  What is the probability of getting a 1 or 2 on any of the rolls? Give your answer as a fraction or to at least 3 significant digits.",
        "type": "numeric",
        "precision": 3,
        "answers": [
            {
                "type": "value",
                "value": 0.802,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "value",
                "value": 0.0123,
                "correct": false,
                "feedback": "Incorrect. This is the probability of getting a 1 or 2 on <b>every</b> one of the 4 rolls."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1.0000000001,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be greater than 1."
            }
        ]
    },
    {
        "question": "Consider two events $A$ and $B$ with $P(A)>0$. If these events are independent, then we expect that implies that knowledge of one event does not influence the probabilities of the other. What should $P(B|A)$ simplify to?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "$P(B)$",
                "correct": true,
                "feedback": "Correct. Knowing that $A$ occurred should not alter the probability of $B$ if $B$ is independent of $A$."
            },
            {
                "answer": "$P(A \\cap B)$",
                "correct": false,
                "feedback": "Incorrect. From the definition of conditional probability, this would imply $P(A)=1$."
            },
            {
                "answer": "$P(A)$",
                "correct": false,
                "feedback": "Incorrect. If this were true, then $A$ could definitely be changing the probabilities for $B$."
            },
            {
                "answer": "1",
                "correct": false,
                "feedback": "Incorrect. If this were true, then knowing that $A$ occurred would usually imply that $B$ occurred. So $A$ gives a lot of information about $B$."
            },
            {
                "answer": "0",
                "correct": false,
                "feedback": "Incorrect. If this were true, then knowing $A$ occurred would generally imply that $B$ did not occur. So $A$ gives a lot of information about $B$."
            }
        ]
    },
    {
        "question": "How are \"mutually exclusive\" and \"statistically independent\" related?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "If events are m.e., that implies that they will be s.i., except in some degenerate cases.",
                "correct": false,
                "feedback": "Incorrect. Try again."
            },
            {
                "answer": "If events are s.i., that implies that they will be m.e., except in some degenerate cases.",
                "correct": false,
                "feedback": "Incorrect. Try again."
            },
            {
                "answer": "Two events cannot be both s.i. and m.e., except in some degenerate cases.",
                "correct": true,
                "feedback": "Correct. Events cannot be both s.i. and m.e. unless at least one of those events has probability zero."
            },
            {
                "answer": "Statistically independent and mutually exclusive are equivalent conditions, except in some degenerate cases.",
                "correct": false,
                "feedback": "Incorrect. Try again."
            },
            {
                "answer": "None of the other choices.",
                "correct": false,
                "feedback": "Incorrect. Try again."
            }
        ]
    },
    {
        "question": "Highly reliable systems can be made from unreliable components. A high reliability computer is built using\n    four old hard drives that were found in the lab. The computer data is replicated to each hard drive. The\n    probability that a hard drive is working in any week is 0.75, 0.8, 0.85, and 0.9, respectively, for the four\n    different drives. If drives fail independently, what is the probability that the computer data is available on\n    at least one of the drives in a given week? Give your answer to 3 decimal places.",
        "type": "numeric",
        "precision": 3,
        "answers": [
            {
                "type": "value",
                "value": 0.999,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    -1e-10
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be negative. Your work may contain a math error."
            },
            {
                "type": "range",
                "range": [
                    1.0000000001,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be greater than 1. Your work may contain a math error."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Use the relation between the probability of an event and its complement to convert the union into an intersection of independent events."
            }
        ]
    },
    {
        "question": "Highly reliable systems can be made from unreliable components. A high reliability computer is to be built using\n    old hard drives that were found in a lab. Each hard drive has a probability of 0.7 of functioning properly in a given week, \n    and hard drive failures are independent. The system is built with data recorded redundantly across each of multiple \n    hard drives, such that the system will work properly as long as at least one of the hard drives is\n    functioning. How many hard drives should be used in the system for the system to work with probability of at \n    least 0.9999 in a given week?",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 8,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    -1e-10
                ],
                "correct": false,
                "feedback": "No. We are looking for the number of hard drives needed; it cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    0,
                    0.999999999999
                ],
                "correct": false,
                "feedback": "No. We are looking for the number of hard drives needed (an integer value), not a probability."
            },
            {
                "type": "range",
                "range": [
                    7.6,
                    7.7
                ],
                "correct": false,
                "feedback": "No. It looks like you are on the right track, but the number of hard drives should be an integer!"
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Let $n$ be the number of hard drives in the system and write a formula for the probability\n                that the system works as a function of $n$. Isolate $n$ and then take a logarithm of both sides to get $n$\n                out of the exponent."
            }
        ]
    },
    {
        "question": "If you roll a fair six-sided die twice, what is the probability that at least one of the rolls was a 3?",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.31,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "value",
                "value": 0.33,
                "correct": false,
                "feedback": "Don't forget that these events are not mutually exclusive &mdash; they are <b>independent</b>."
            },
            {
                "type": "value",
                "value": 0.028,
                "correct": false,
                "feedback": "Incorrect. This is the probability that 3 came up on both rolls."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1.0000000001,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "correct": false
            }
        ]
    },
    {
        "question": "A RAID 1 storage system uses two hard drives to keep identical copies of the information in a computer system.  If the two hard drives are identical and have an annual failure rate of approximately 1.4%,  determine the probability that at least one of the hard drives fails in a year. Give 3 significant digits in your answer.",
        "type": "numeric",
        "precision": 3,
        "answers": [
            {
                "type": "value",
                "value": 0.0278,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "value",
                "value": 0.028,
                "correct": false,
                "feedback": "Incorrect. This may be a rounding error or you may have treated these events as disjoint instead of independent."
            },
            {
                "type": "value",
                "value": 0.000196,
                "correct": false,
                "feedback": "Incorrect. This is the probability that both hard drives fail in a year."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1.0000000001,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "correct": false
            }
        ]
    },
    {
        "question": "A RAID 1 storage system uses two hard drives to keep identical copies of the information in a computer system.  If the two hard drives are identical and have an annual failure rate of approximately 1.4%,  determine the probability that both of the hard drives fails in a year. Give 3 significant digits in your answer.",
        "type": "numeric",
        "precision": 3,
        "answers": [
            {
                "type": "value",
                "value": 0.000196,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "value",
                "value": 0.0278,
                "correct": false,
                "feedback": "Incorrect. This is the probability that either of the drives fail in a year"
            },
            {
                "type": "value",
                "value": 0.0196,
                "correct": false,
                "feedback": "Incorrect. This is the probability that both hard drives fail in a year."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1.0000000001,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "correct": false
            }
        ]
    },
    {
        "question": "For a fair experiment, $A$ and $B$ will be independent if the proportion of outcomes of $B$ in $S$ is equal to:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "The proportion of outcomes of $A$ in $S$.",
                "correct": false
            },
            {
                "answer": "The proportion of outcomes of $A$ in $B$.",
                "correct": false
            },
            {
                "answer": "The proportion of outcomes of $B$ in $A$",
                "correct": true
            },
            {
                "answer": "None of these guarantee independence.",
                "correct": false
            },
            {
                "answer": "The proportion of outcomes of $B$ in $A \\cap B$",
                "correct": false,
                "feedback": "Incorrect. Note that all of the outcomes in $A \\cap B$  must come from $B$."
            }
        ]
    },
    {
        "question": "A surplus box contains 20 miscellaneous desktop and laptop computers from various manufacturers. There are a total of 5 laptops in the box, 2 of which are from Apple. Suppose that a computer is chosen randomly from the box. Let $L$ and $A$ denote the event that the chosen computer is a laptop and the event that the chosen computer is from Apple, respectively. How many computers from Apple must be in the box for $L$ and $A$ to be independent?",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 8,
                "correct": true,
                "feedback": "Correct. The proportion of laptops that are from Apple must equal the proportion of all computers from Apple, which requires $|A|=8$."
            },
            {
                "type": "range",
                "range": [
                    21,
                    1000000000000
                ],
                "correct": false,
                "feedback": "Incorrect. There are only 20 computers, so how can there be more than 20 from Apple?"
            },
            {
                "type": "range",
                "range": [
                    0,
                    1.01
                ],
                "correct": false,
                "feedback": "Incorrect. We are given in the problem that there are at least 2 computers from Apple (the two laptops)."
            },
            {
                "type": "range",
                "range": [
                    -1000000000,
                    -1e-11
                ],
                "correct": false,
                "feedback": "Incorrect. What would it mean to have a negative number of computers?"
            }
        ]
    },
    {
        "question": "A surplus box contains 20 miscellaneous desktop and laptop computers from various manufacturers. There are a total of 5 laptops in the box, 2 of which are from Apple. Suppose that a computer is chosen randomly from the box. Let $L$ and $A$ denote the event that the chosen computer is a laptop and the event that the chosen computer is from Apple, respectively. If $L$ and $A$ are independent, what is the proportion of laptop computers among all the Apple computers?",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 0.25,
                "correct": true,
                "feedback": "Correct. The proportion of laptop computers in the box is $1/4$. If $L$ and $A$ are independent, then then the proportion of laptops among Apple computers must also be $1/4$."
            },
            {
                "type": "range",
                "range": [
                    1.0000000001,
                    1000000000000
                ],
                "correct": false,
                "feedback": "Incorrect. What does it mean to have a proportion greater than 1?"
            },
            {
                "type": "value",
                "value": 0,
                "correct": false,
                "feedback": "Incorrect. We are given in the problem that there are at least 2 laptops computers from Apple, so the proportion cannot be 0."
            },
            {
                "type": "range",
                "range": [
                    -1000000000,
                    -1e-11
                ],
                "correct": false,
                "feedback": "Incorrect. What would it mean to have a negative proportion?"
            }
        ]
    },
    {
        "question": "<b>True of False:</b> Events can be statistically independent but become dependent when given that some other event has occurred.",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "False",
                "correct": false
            },
            {
                "answer": "True",
                "correct": true
            }
        ]
    },
    {
        "question": "<b>True of False:</b> Events can be dependent but become independent when given that some other event has occurred.",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "False",
                "correct": false
            },
            {
                "answer": "True",
                "correct": true
            }
        ]
    },
    {
        "question": "A fair coin is flipped two times. Let $H_i$ be the outcome of flip $i$. Let $B$ be the event that both coins land on the same face. Given $B$, are $H_1$ and $H_2$ conditionally statistically independent?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Yes",
                "correct": false,
                "feedback": "Incorrect. Determining conditional independence requires determining whether $P(H_1 \\cap H_2 \\mid B)$ equals $P(H_1 \\mid B)P(H_2 \\mid B$)."
            },
            {
                "answer": "No",
                "correct": true
            },
            {
                "answer": "There is not enough information to decide.",
                "correct": false,
                "feedback": "Incorrect. Determining conditional independence only requires calculating $P(H_1 \\cap H_2 |B)$ and $P(H_1|B)P(H_2|B)$. The problem gives the information you need."
            }
        ]
    },
    {
        "question": "<b>True or False:</b> If $A$ and $B$ are conditionally independent given $C$, then $P(A \\mid B \\cap C) = P(A \\mid C)$.",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "True",
                "correct": true
            },
            {
                "answer": "False",
                "correct": false,
                "feedback": "Incorrect. Show that $P(A \\mid B \\cap C) $ can be written as $P(A \\cap B\\mid C)P(C)/ P(B \\cap C)$ and then apply the definition for c.s.i."
            },
            {
                "answer": "There is not enough information to decide.",
                "correct": false,
                "feedback": "Incorrect. Show that $P(A \\mid B \\cap C) $ can be written as $P(A \\cap B\\mid C)P(C)/ P(B \\cap C)$ and then apply the definition for c.s.i."
            }
        ]
    }
];
    // Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.textContent = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == "True") {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.textContent = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);
        console.log(submission);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
        //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                console.log(answer.value);
                console.log(submission == answer.value);
                if (submission == answer.value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }
                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        return false;
    }

}

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.textContent = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
function jaxify(string) {
    var mystring = string;

    var count = 0;
    var loc = mystring.search(/([^\\]|^)(\$)/);

    var count2 = 0;
    var loc2 = mystring.search(/([^\\]|^)(\$\$)/);

    //console.log(loc);

    while ((loc >= 0) || (loc2 >= 0)) {

        /* Have to replace all the double $$ first with current implementation */
        if (loc2 >= 0) {
            if (count2 % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\[");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\]");
            }
            count2++;
        } else {
            if (count % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\(");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\)");
            }
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
        //console.log(mystring,", loc:",loc,", loc2:",loc2);
    }

    //console.log(mystring);
    return mystring;
}


function show_questions(json, mydiv) {
    console.log('show_questions');
    //var mydiv=document.getElementById(myid);
    var shuffle_questions = mydiv.dataset.shufflequestions;
    var num_questions = mydiv.dataset.numquestions;
    var shuffle_answers = mydiv.dataset.shuffleanswers;
    var max_width = mydiv.dataset.maxwidth;

    if (num_questions > json.length) {
        num_questions = json.length;
    }

    var questions;
    if ((num_questions < json.length) || (shuffle_questions == "True")) {
        //console.log(num_questions+","+json.length);
        questions = getRandomSubarray(json, num_questions);
    } else {
        questions = json;
    }

    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);

    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        //iDiv.id = 'quizWrap' + id + index;
        iDiv.id = 'quizWrap' + id;
        iDiv.className = 'Quiz';
        iDiv.setAttribute('data-qnum', index);
        iDiv.style.maxWidth  =max_width+"px";
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;
        
        var outerqDiv = document.createElement('div');
        outerqDiv.id = "OuterquizQn" + id + index;
        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id = "quizQn" + id + index;
        
        if (qa.question) {
            iDiv.append(outerqDiv);

            //qDiv.textContent=qa.question;
            qDiv.innerHTML = jaxify(qa.question);
            outerqDiv.append(qDiv);
        }

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa) {
            codeDiv = document.createElement('div');
            codeDiv.id = "code" + id + index;
            codeDiv.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = qa.code;
            outerqDiv.append(codeDiv);
            //console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id = "quizAns" + id + index;
        aDiv.className = 'Answer';
        iDiv.append(aDiv);

        //console.log(qa.type);

        var num_correct;
        if ((qa.type == "multiple_choice") || (qa.type == "many_choice") ) {
            num_correct = make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
            if ("answer_cols" in qa) {
                //aDiv.style.gridTemplateColumns = 'auto '.repeat(qa.answer_cols);
                aDiv.style.gridTemplateColumns = 'repeat(' + qa.answer_cols + ', 1fr)';
            }
        } else if (qa.type == "numeric") {
            //console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id = "fb" + id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className = "Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
    var preserveResponses = mydiv.dataset.preserveresponses;
    console.log(preserveResponses);
    console.log(preserveResponses == "true");
    if (preserveResponses == "true") {
        console.log(preserveResponses);
        // Create Div to contain record of answers
        var iDiv = document.createElement('div');
        iDiv.id = 'responses' + mydiv.id;
        iDiv.className = 'JCResponses';
        // Create a place to store responses as an empty array
        iDiv.setAttribute('data-responses', '[]');

        // Dummy Text
        iDiv.innerHTML="<b>Select your answers and then follow the directions that will appear here.</b>"
        //iDiv.className = 'Quiz';
        mydiv.appendChild(iDiv);
    }
//console.log("At end of show_questions");
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    return false;
}
/* This is to handle asynchrony issues in loading Jupyter notebooks
           where the quiz has been previously run. The Javascript was generally
           being run before the div was added to the DOM. I tried to do this
           more elegantly using Mutation Observer, but I didn't get it to work.

           Someone more knowledgeable could make this better ;-) */

        function try_show() {
          if(document.getElementById("rBSEUpuhyWch")) {
            show_questions(questionsrBSEUpuhyWch,  rBSEUpuhyWch); 
          } else {
             setTimeout(try_show, 200);
          }
        };
    
        //console.log(element);
        {
        const jmscontroller = new AbortController();
        const signal = jmscontroller.signal;

        setTimeout(() => jmscontroller.abort(), 5000);

        fetch("https://raw.githubusercontent.com/jmshea/Foundations-of-Data-Science-with-Python/main/06-conditional-prob/questions/10-summary.json", {signal})
        .then(response => response.json())
        .then(json => show_questions(json, rBSEUpuhyWch))
        .catch(err => {
        console.log("Fetch error or timeout");
        show_questions(questionsrBSEUpuhyWch, rBSEUpuhyWch);
        });
        }
        </script></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="xrOIWndoMNhb" data-shufflequestions="False"
               data-shuffleanswers="True"
               data-preserveresponses="false"
               data-numquestions="3"
               data-maxwidth="600"
               style="border-radius: 10px; text-align: left"> <style>
#xrOIWndoMNhb {
   --jq-multiple-choice-bg: #345995;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #e26d5a;
   --jq-numeric-bg: #5bc0eb;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-incorrect-color: #666666;
   --jq-correct-color: #87a878;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 15px;
    padding-bottom: 4px;
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
    min-height: 2em;
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsxrOIWndoMNhb=[
    {
        "question": "Which of these is considered the <i>gold standard</i> for research studies?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Randomized controlled trial",
                "correct": true
            },
            {
                "answer": "Cross-sectional study",
                "correct": false
            },
            {
                "answer": "Longitudinal cohort study",
                "correct": false
            },
            {
                "answer": "Population study",
                "correct": false
            }
        ]
    },
    {
        "question": "Which of these is most likely to result in <i>post hoc</i> analysis?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "A prospective study",
                "correct": false
            },
            {
                "answer": "A retrospective study",
                "correct": true
            },
            {
                "answer": "A population study",
                "correct": false
            }
        ]
    },
    {
        "question": "Which of these is most likely to result in sampling bias?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "A random sample",
                "correct": false
            },
            {
                "answer": "A convenience sample",
                "correct": true
            }
        ]
    },
    {
        "question": "Which of the following is true of a cross-sectional study?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "It collects data about a population at one point in time",
                "correct": true
            },
            {
                "answer": "It collects data about a population across time",
                "correct": false
            },
            {
                "answer": "It collects data about the same sample from a  population at different points in time",
                "correct": false
            }
        ]
    },
    {
        "question": "Which of the following is true of a longitudinal study?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "It collects data about a population at one point in time",
                "correct": false
            },
            {
                "answer": "It collects data about a population across time",
                "correct": true
            },
            {
                "answer": "It collects data about the same sample from a  population at different points in time",
                "correct": false,
                "feedback": "Not necessarily."
            }
        ]
    },
    {
        "question": "Which of the following is true of a longitudinal cohort study?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "It collects data about a population at one point in time",
                "correct": false
            },
            {
                "answer": "It collects data about a population across time",
                "correct": true,
                "feedback": "This is true but not the best answer."
            },
            {
                "answer": "It collects data about the same sample from a  population at different points in time",
                "correct": true
            }
        ]
    },
    {
        "question": "Resampling can be used in which of the following approaches to conduct a statistical test?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Model-free",
                "correct": true
            },
            {
                "answer": "Model-based",
                "correct": false
            }
        ]
    },
    {
        "question": "The distribution of a statistic computed from some data is called the:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Statistical distribution",
                "correct": false
            },
            {
                "answer": "Sampling distribution",
                "correct": true
            },
            {
                "answer": "Population distribution",
                "correct": false
            },
            {
                "answer": "Cross-sectional distribution",
                "correct": false
            }
        ]
    },
    {
        "question": "NHST stands for:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Nonlinear Hypothesis Screening Test",
                "correct": false
            },
            {
                "answer": "Null Hypothesis Significance Test",
                "correct": true
            },
            {
                "answer": "Normalized Hypothesis  Significance Test",
                "correct": false
            },
            {
                "answer": "Nonparametric Hypothesis  Screening Test",
                "correct": false
            }
        ]
    },
    {
        "question": "Topcoding is generally used in data sets to ",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Protect sensitive information",
                "correct": true
            },
            {
                "answer": "Limit the effects of outliers",
                "correct": false
            },
            {
                "answer": "Improve the accuracy of statistical models",
                "correct": false
            },
            {
                "answer": "Simplify the interpretation of results",
                "correct": false
            }
        ]
    },
    {
        "question": "Large data sets are often accompanied by information on how to interpret the codes and values for the different variables. This set of information is usually called a:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Guidebook",
                "correct": false
            },
            {
                "answer": "Codebook",
                "correct": true
            },
            {
                "answer": "Data set legend",
                "correct": false
            },
            {
                "answer": "Variable map",
                "correct": false
            }
        ]
    },
    {
        "question": "The process of dealing with incorrect, duplicate, missing, corrupt, or incomplete data is generally called:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Variable cleansing",
                "correct": false
            },
            {
                "answer": "Data cleaning",
                "correct": true
            },
            {
                "answer": "Dataset polishing",
                "correct": false
            },
            {
                "answer": "Data wrangling",
                "correct": false
            }
        ]
    },
    {
        "question": "Consider the research question: \"Do people who attend a STEM-focused high school score higher than those who attend a standard high school on the Math section of the SAT?\". If you are conducting a NHST on this, would it be justifiable to use a one-sided test?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Yes",
                "correct": true,
                "feedback": "Correct. Because the research question indicates a particular direction and not just a difference between the populations, a one-sided test is justified."
            },
            {
                "answer": "No",
                "correct": false,
                "feedback": "Incorrect. Check the question carefully."
            },
            {
                "answer": "It depends on other factors",
                "correct": false,
                "feedback": "Incorrect. Check the question carefully."
            }
        ]
    },
    {
        "question": "TikDeTox is a new drug that was developed to treat social media FOMO disease (SMFD). Consider the research question: \"Does data from a test show that college students who take this drug have less FOMO?\" If you are conducting a NHST on this, would it be justifiable to use a one-sided test?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Yes",
                "correct": true,
                "feedback": "Correct. Because the research question indicates a particular direction and not just a difference between the populations, a one-sided test is justified."
            },
            {
                "answer": "No",
                "correct": false,
                "feedback": "Incorrect. Check the question carefully."
            },
            {
                "answer": "It depends on other factors",
                "correct": false,
                "feedback": "Incorrect. Check the question carefully."
            }
        ]
    },
    {
        "question": "Consider the research question \"A professor uses two different routes to work. Does the data support that there is a statistically significant difference in the commute time between the two routes?\".  If you are conducting a NHST on this, would it be justifiable to use a one-sided test?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Yes",
                "correct": false,
                "feedback": "Incorrect. Because the research questions only asks if there is a difference between the two routes, a two-tailed test should be used."
            },
            {
                "answer": "No",
                "correct": true
            },
            {
                "answer": "It depends on other factors",
                "correct": false,
                "feedback": "Incorrect. Check the question carefully."
            }
        ]
    },
    {
        "question": "Consider the research question \"Is there a difference in performance on pilot qualification tests between people who play video games and those who do not?\".  If you are conducting a NHST on this, would it be justifiable to use a one-sided test?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Yes",
                "correct": false,
                "feedback": "Incorrect. Because the research questions only asks if there is a difference between the performances of the two groups, a two-tailed test should be used."
            },
            {
                "answer": "No",
                "correct": true
            },
            {
                "answer": "It depends on other factors",
                "correct": false,
                "feedback": "Incorrect. Check the question carefully."
            }
        ]
    },
    {
        "question": "The distribution of a statistic computed from some data is called the:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Statistical distribution",
                "correct": false
            },
            {
                "answer": "Sampling distribution",
                "correct": true
            },
            {
                "answer": "Population distribution",
                "correct": false
            },
            {
                "answer": "Cross-sectional distribution",
                "correct": false
            }
        ]
    },
    {
        "question": "NHST stands for:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Nonlinear Hypothesis Screening Test",
                "correct": false
            },
            {
                "answer": "Null Hypothesis Significance Test",
                "correct": true
            },
            {
                "answer": "Normalized Hypothesis  Significance Test",
                "correct": false
            },
            {
                "answer": "Nonparametric Hypothesis  Screening Test",
                "correct": false
            }
        ]
    },
    {
        "question": "Topcoding is generally used in data sets to ",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Protect sensitive information",
                "correct": true
            },
            {
                "answer": "Limit the effects of outliers",
                "correct": false
            },
            {
                "answer": "Improve the accuracy of statistical models",
                "correct": false
            },
            {
                "answer": "Simplify the interpretation of results",
                "correct": false
            }
        ]
    },
    {
        "question": "Large data sets are often accompanied by information on how to interpret the codes and values for the different variables. This set of information is usually called a:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Guidebook",
                "correct": false
            },
            {
                "answer": "Codebook",
                "correct": true
            },
            {
                "answer": "Data set legend",
                "correct": false
            },
            {
                "answer": "Variable map",
                "correct": false
            }
        ]
    },
    {
        "question": "The process of dealing with incorrect, duplicate, missing, corrupt, or incomplete data is generally called:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Variable cleansing",
                "correct": false
            },
            {
                "answer": "Data cleaning",
                "correct": true
            },
            {
                "answer": "Dataset polishing",
                "correct": false
            },
            {
                "answer": "Data wrangling",
                "correct": false
            }
        ]
    },
    {
        "question": "In an NHST, which of the following should be used to choose between a one-tailed and two-tailed test?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "The particular phrasing of the research question",
                "correct": true
            },
            {
                "answer": "The significance threshold",
                "correct": false
            },
            {
                "answer": "Whether the data is quantitative or qualitative",
                "correct": false
            },
            {
                "answer": "The size of the data set",
                "correct": false
            }
        ]
    },
    {
        "question": "Which is a more conservative test: a one-tailed test or a two-tailed test.",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "A two-tailed test",
                "correct": true,
                "feedback": "Correct. A two-tailed test is considered more conservative because it will produce a higher $p$-value than a one-sided test for the same data. Thus, it is less likely to indicate statistical significance."
            },
            {
                "answer": "A one-tailed test",
                "correct": false,
                "feedback": "Incorrect. A two-tailed test is considered more conservative because it will produce a higher $p$-value than a one-sided test for the same data. Thus, it is less likely to indicate statistical significance."
            }
        ]
    },
    {
        "question": "Which of these are resampling techniques?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "Shoelacing",
                "correct": false
            },
            {
                "answer": "Suspendering",
                "correct": false
            },
            {
                "answer": "Combination testing",
                "correct": false
            },
            {
                "answer": "Bootstrapping",
                "correct": true
            },
            {
                "answer": "Permutation testing",
                "correct": true
            },
            {
                "answer": "Monaco Permutation testing",
                "correct": false,
                "feedback": "Incorrect -- this was a tricky one. You are probably thinking of Monte Carlo Permutation testing."
            }
        ]
    },
    {
        "question": "In which of these resampling techniques can a single data value be repeated in a sample?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Permutation testing",
                "correct": false
            },
            {
                "answer": "Bootstrapping",
                "correct": true
            },
            {
                "answer": "Monte Carlo permutation testing",
                "correct": false
            }
        ]
    },
    {
        "question": "If the goal of resampling is to approximate drawing from the sampling distribution of the test statistic, which approach to resampling should usually be used?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Bootstrap sampling",
                "correct": true,
                "feedback": "Correct. Bootstrapping approximates drawing from the sampling distribution. More details are provided in Section 9.7 of <a url=\"https://www.fdsp.net/\">Foundations of Data Science with Python</a>\""
            },
            {
                "answer": "Permutation sampling",
                "correct": false
            }
        ]
    },
    {
        "question": "If the goal of resampling is to break up any dependence from the assignment to the underlying groups, which approach to resampling should usually be used?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Bootstrap sampling",
                "correct": false
            },
            {
                "answer": "Permutation sampling",
                "correct": true,
                "feedback": "Correct. Permutation sampling inherently reshuffles data, breaking up any dependence from the assignmen tto groups and is thus the most appropriate in this case."
            }
        ]
    },
    {
        "question": "Which approach to resampling is generally more conservative?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Bootstrapping",
                "correct": false
            },
            {
                "answer": "Permutation testing",
                "correct": true,
                "feedback": "Correct. Permutation testing generally produces higher $p$-values than bootstrapping. Thus, permutation testing is less likely to indicate statistical significance and is thus more conservative."
            }
        ]
    },
    {
        "question": "When using resampling with a significance threshold of 0.05, which of these is the minimum number of samples (simulation iterations) that will be needed?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "2,000",
                "correct": true,
                "feedback": "Correct. 2,000 is a good guideline for the minimum number of samples because it is equal to 100/$p$. A more conservative choice would be 10,000."
            },
            {
                "answer": "200",
                "correct": false
            },
            {
                "answer": "500",
                "correct": false
            },
            {
                "answer": "20,000",
                "correct": false
            },
            {
                "answer": "200,000",
                "correct": false
            }
        ]
    },
    {
        "question": "When using resampling with a significance threshold of 0.005 (i.e. $5 \\times 10^{-3}$), which of these is the minimum number of samples (simulation iterations) that will be needed?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "20,000",
                "correct": true,
                "feedback": "Correct. 20,000 is a good guideline for the minimum number of samples because it is equal to 100/$p$. A more conservative choice would be 100,000."
            },
            {
                "answer": "200",
                "correct": false
            },
            {
                "answer": "500",
                "correct": false
            },
            {
                "answer": "2,000",
                "correct": false
            },
            {
                "answer": "200,000",
                "correct": false
            }
        ]
    },
    {
        "question": "True or false: When reporting the results of a NHST, it is sufficient to report whether the null hypothesis was rejected.",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "True",
                "correct": false,
                "feedback": "Incorrect. Always report the measured p-value along with the conclusion. It is not su\ufb00icient to just report p > 0.05 because the specific p value gives additional insight into the results of the statistical test."
            },
            {
                "answer": "False",
                "correct": true,
                "feedback": "Correct. Always report the measured p-value along with the conclusion. It is not su\ufb00icient to just report p > 0.05 because the specific p value gives additional insight into the results of the statistical test."
            }
        ]
    },
    {
        "question": "Can multiple NHSTs be applied to the same data set?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Yes, without modification",
                "correct": false,
                "feedback": "Incorrect. Multiple NHSTs should not be applied to the same data set without applying a stricter criteria to achieve the target significance level."
            },
            {
                "answer": "Yes, with modification",
                "correct": true,
                "feedback": "Correct. Multiple NHSTs can be applied to the same data set, but  a stricter criteria must be applied to achieve the target significance level."
            },
            {
                "answer": "No",
                "correct": false,
                "feedback": "Incorrect. Multiple NHSTs can be applied to the same data set, but  a stricter criteria must be applied to achieve the target significance level."
            }
        ]
    },
    {
        "question": "True or False: A given 95% confidence interval has a 95% chance of containing the true value of the statistic being estimated.",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "False",
                "correct": true,
                "feedback": "Correct. A 95% confidence interval indicates that if confidence intervals created using this approach were created many times, then they would contain the true value of the statistic 95% of the time."
            },
            {
                "answer": "True",
                "correct": false,
                "feedback": "Incorrect. This is a common misinterpretation of what a C% confidence interval means. The C% confidence interval applies to the estimation technique for the statistic and indicates that if confidence intervals created using this approach were created many times, then they would contain the true value of the statistic 95% of the time."
            }
        ]
    },
    {
        "question": "Compared to a 95% confidence interval, the width of a 99% confidence interval would be:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Wider",
                "correct": true,
                "feedback": "Correct. To have higher confidence that intervals created in this way would contain the true value of the statistic being estimated, the confidence interval must be wider."
            },
            {
                "answer": "Narrower",
                "correct": false
            },
            {
                "answer": "The same -- the width of a CI is controlled by other factors",
                "correct": false
            }
        ]
    },
    {
        "question": "Confidence intervals can most readily be estimated from what type of histogram?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "True",
                "correct": false,
                "feedback": "Incorrect. Always report the measured p-value along with the conclusion. It is not su\ufb00icient to just report p > 0.05 because the specific p value gives additional insight into the results of the statistical test."
            },
            {
                "answer": "False",
                "correct": true,
                "feedback": "Correct. Always report the measured p-value along with the conclusion. It is not su\ufb00icient to just report p > 0.05 because the specific p value gives additional insight into the results of the statistical test."
            }
        ]
    },
    {
        "question": "Can multiple NHSTs be applied to the same data set?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Yes, without modification",
                "correct": false,
                "feedback": "Incorrect. Multiple NHSTs should not be applied to the same data set without applying a stricter criteria to achieve the target significance level."
            },
            {
                "answer": "Yes, with modification",
                "correct": true,
                "feedback": "Correct. Multiple NHSTs can be applied to the same data set, but  a stricter criteria must be applied to achieve the target significance level."
            },
            {
                "answer": "No",
                "correct": false,
                "feedback": "Incorrect. Multiple NHSTs can be applied to the same data set, but  a stricter criteria must be applied to achieve the target significance level."
            }
        ]
    },
    {
        "question": "If $H_0$ is true, but you fail to reject $H_0$, it is a:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "True Negative",
                "correct": true
            },
            {
                "answer": "False Positive",
                "correct": false
            },
            {
                "answer": "False Negative",
                "correct": false
            },
            {
                "answer": "True Positive",
                "correct": false
            }
        ]
    },
    {
        "question": "If $H_0$ is true, and you reject $H_0$, it is a:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "True Negative",
                "correct": false
            },
            {
                "answer": "False Positive",
                "correct": true
            },
            {
                "answer": "False Negative",
                "correct": false
            },
            {
                "answer": "True Positive",
                "correct": false
            }
        ]
    },
    {
        "question": "If the alternative hypothesis $H_a$ is true, and you fail to reject $H_0$, it is a:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "True Negative",
                "correct": false
            },
            {
                "answer": "False Positive",
                "correct": false
            },
            {
                "answer": "False Negative",
                "correct": true
            },
            {
                "answer": "True Positive",
                "correct": false
            }
        ]
    },
    {
        "question": "If the alternative hypothesis $H_a$ is true, and you reject $H_0$, it is a:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "True Negative",
                "correct": false
            },
            {
                "answer": "False Positive",
                "correct": false
            },
            {
                "answer": "False Negative",
                "correct": false
            },
            {
                "answer": "True Positive",
                "correct": true
            }
        ]
    },
    {
        "question": "Another name for a False Positive is a:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Type I Error",
                "correct": true
            },
            {
                "answer": "Type II Error",
                "correct": false
            }
        ]
    },
    {
        "question": "Another name for a False Negative is a:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Type II Error",
                "correct": true
            },
            {
                "answer": "Type I Error",
                "correct": false
            }
        ]
    },
    {
        "question": "The Greek letter $\\alpha$ is used to denote the probability of which event?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Type I Error",
                "correct": true
            },
            {
                "answer": "Type II Error",
                "correct": false
            }
        ]
    },
    {
        "question": "The Greek letter $\\beta is used to denote the probability of which event?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Type II Error",
                "correct": true
            },
            {
                "answer": "Type I Error",
                "correct": false
            }
        ]
    },
    {
        "question": "The statistical power of a test corresponds to the probability of:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Rejecting $H_0$ when $H_a$ is true",
                "correct": true
            },
            {
                "answer": "Failing to reject $H_0$ when $H_a$ is true",
                "correct": false
            },
            {
                "answer": "Rejecting $H_a$ when $H_0$ is true",
                "correct": false
            }
        ]
    },
    {
        "question": "If we have the probabilities $\\alpha$ and $\\beta$ for a test, the statistical power can be computed as :",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "$1-\\beta$",
                "correct": true
            },
            {
                "answer": "$1 - \\alpha$",
                "correct": false
            },
            {
                "answer": "$1- \\alpha - \\beta$",
                "correct": false
            },
            {
                "answer": "$\\alpha + \\beta$",
                "correct": false
            }
        ]
    }
];
    // Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.textContent = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == "True") {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.textContent = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);
        console.log(submission);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
        //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                console.log(answer.value);
                console.log(submission == answer.value);
                if (submission == answer.value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }
                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        return false;
    }

}

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.textContent = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
function jaxify(string) {
    var mystring = string;

    var count = 0;
    var loc = mystring.search(/([^\\]|^)(\$)/);

    var count2 = 0;
    var loc2 = mystring.search(/([^\\]|^)(\$\$)/);

    //console.log(loc);

    while ((loc >= 0) || (loc2 >= 0)) {

        /* Have to replace all the double $$ first with current implementation */
        if (loc2 >= 0) {
            if (count2 % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\[");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\]");
            }
            count2++;
        } else {
            if (count % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\(");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\)");
            }
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
        //console.log(mystring,", loc:",loc,", loc2:",loc2);
    }

    //console.log(mystring);
    return mystring;
}


function show_questions(json, mydiv) {
    console.log('show_questions');
    //var mydiv=document.getElementById(myid);
    var shuffle_questions = mydiv.dataset.shufflequestions;
    var num_questions = mydiv.dataset.numquestions;
    var shuffle_answers = mydiv.dataset.shuffleanswers;
    var max_width = mydiv.dataset.maxwidth;

    if (num_questions > json.length) {
        num_questions = json.length;
    }

    var questions;
    if ((num_questions < json.length) || (shuffle_questions == "True")) {
        //console.log(num_questions+","+json.length);
        questions = getRandomSubarray(json, num_questions);
    } else {
        questions = json;
    }

    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);

    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        //iDiv.id = 'quizWrap' + id + index;
        iDiv.id = 'quizWrap' + id;
        iDiv.className = 'Quiz';
        iDiv.setAttribute('data-qnum', index);
        iDiv.style.maxWidth  =max_width+"px";
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;
        
        var outerqDiv = document.createElement('div');
        outerqDiv.id = "OuterquizQn" + id + index;
        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id = "quizQn" + id + index;
        
        if (qa.question) {
            iDiv.append(outerqDiv);

            //qDiv.textContent=qa.question;
            qDiv.innerHTML = jaxify(qa.question);
            outerqDiv.append(qDiv);
        }

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa) {
            codeDiv = document.createElement('div');
            codeDiv.id = "code" + id + index;
            codeDiv.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = qa.code;
            outerqDiv.append(codeDiv);
            //console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id = "quizAns" + id + index;
        aDiv.className = 'Answer';
        iDiv.append(aDiv);

        //console.log(qa.type);

        var num_correct;
        if ((qa.type == "multiple_choice") || (qa.type == "many_choice") ) {
            num_correct = make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
            if ("answer_cols" in qa) {
                //aDiv.style.gridTemplateColumns = 'auto '.repeat(qa.answer_cols);
                aDiv.style.gridTemplateColumns = 'repeat(' + qa.answer_cols + ', 1fr)';
            }
        } else if (qa.type == "numeric") {
            //console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id = "fb" + id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className = "Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
    var preserveResponses = mydiv.dataset.preserveresponses;
    console.log(preserveResponses);
    console.log(preserveResponses == "true");
    if (preserveResponses == "true") {
        console.log(preserveResponses);
        // Create Div to contain record of answers
        var iDiv = document.createElement('div');
        iDiv.id = 'responses' + mydiv.id;
        iDiv.className = 'JCResponses';
        // Create a place to store responses as an empty array
        iDiv.setAttribute('data-responses', '[]');

        // Dummy Text
        iDiv.innerHTML="<b>Select your answers and then follow the directions that will appear here.</b>"
        //iDiv.className = 'Quiz';
        mydiv.appendChild(iDiv);
    }
//console.log("At end of show_questions");
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    return false;
}
/* This is to handle asynchrony issues in loading Jupyter notebooks
           where the quiz has been previously run. The Javascript was generally
           being run before the div was added to the DOM. I tried to do this
           more elegantly using Mutation Observer, but I didn't get it to work.

           Someone more knowledgeable could make this better ;-) */

        function try_show() {
          if(document.getElementById("xrOIWndoMNhb")) {
            show_questions(questionsxrOIWndoMNhb,  xrOIWndoMNhb); 
          } else {
             setTimeout(try_show, 200);
          }
        };
    
        //console.log(element);
        {
        const jmscontroller = new AbortController();
        const signal = jmscontroller.signal;

        setTimeout(() => jmscontroller.abort(), 5000);

        fetch("https://raw.githubusercontent.com/jmshea/Foundations-of-Data-Science-with-Python/main/05-null-hypothesis-testing/questions/8-summary.json", {signal})
        .then(response => response.json())
        .then(json => show_questions(json, xrOIWndoMNhb))
        .catch(err => {
        console.log("Fetch error or timeout");
        show_questions(questionsxrOIWndoMNhb, xrOIWndoMNhb);
        });
        }
        </script></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="fGGYGllDjBkW" data-shufflequestions="False"
               data-shuffleanswers="True"
               data-preserveresponses="false"
               data-numquestions="2"
               data-maxwidth="600"
               style="border-radius: 10px; text-align: left"> <style>
#fGGYGllDjBkW {
   --jq-multiple-choice-bg: #345995;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #e26d5a;
   --jq-numeric-bg: #5bc0eb;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-incorrect-color: #666666;
   --jq-correct-color: #87a878;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 15px;
    padding-bottom: 4px;
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
    min-height: 2em;
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsfGGYGllDjBkW=[
    {
        "question": "A card is drawn from a standard deck of 52 cards, and the face is observed. Choose all of the following that are an outcome of this experiment.",
        "type": "many_choice",
        "answers": [
            {
                "answer": "The card is the Ace of Clubs",
                "correct": true
            },
            {
                "answer": "The card is a Jack",
                "correct": false,
                "feedback": "Incorrect. Outcomes cannot be decomposed. There are 4 different ways to get a Jack."
            },
            {
                "answer": "The card is the 3 of Hearts",
                "correct": true
            },
            {
                "answer": "The card is a Heart",
                "correct": false,
                "feedback": "Incorrect. Outcomes cannot be decomposed. There are 13 different ways to get a Heart."
            },
            {
                "answer": "The card is a 7",
                "correct": false,
                "feedback": "Incorrect. Outcomes cannot be decomposed. There are 4 different ways to get a card with a value of 7."
            }
        ]
    },
    {
        "question": "A card is drawn from a standard deck of 52 cards, and the face is observed. Choose all of the following that are valid events for this experiment.",
        "type": "many_choice",
        "answers": [
            {
                "answer": "The card is the Ace of Clubs",
                "correct": true
            },
            {
                "answer": "The card is a Jack",
                "correct": true
            },
            {
                "answer": "The card is the 3 of Hearts",
                "correct": true
            },
            {
                "answer": "The card is a Heart",
                "correct": true
            },
            {
                "answer": "The card is a 7",
                "correct": true
            }
        ]
    },
    {
        "question": "Can the following be a sample space: $S=\\{ \\mbox{sunny}, \\mbox{partly cloudy}, \\mbox{cloudy} \\}$?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Yes",
                "correct": true,
                "feedback": "Correct. The sample space can contain the outcomes for any random experiment, such as how sunny tomorrow will be."
            },
            {
                "answer": "No",
                "correct": false
            }
        ]
    },
    {
        "question": "Select all of the following that can be an outcome of a random experiment.",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "A number",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "A color",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "A tuple",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "A set",
                "correct": true
            },
            {
                "answer": "An animal.",
                "correct": true
            }
        ]
    },
    {
        "question": "Which of the following types of mathematical object can be a sample space?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "set",
                "correct": true,
                "feedback": "Correct. The sample space is the <b>set</b> of all outcomes."
            },
            {
                "answer": "vector",
                "correct": false
            },
            {
                "answer": "function",
                "correct": false
            }
        ]
    },
    {
        "question": "Given the data set $[1,2,6,1,4]$, find the relative frequency of the outcome 1.",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 0.4,
                "correct": true,
                "feedback": "Correct. The value 1 appears 2 times out of the five total outcomes, so the relative frequency is 2/5 = 0.4"
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Relative frequencies cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Relative frequencies cannot be greater than 1."
            },
            {
                "type": "default",
                "feedback": "Incorrect."
            }
        ]
    },
    {
        "question": "Given the data set $[1,2,6,1,4]$, find the relative frequency of the outcome 2.",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 0.2,
                "correct": true,
                "feedback": "Correct. The value 2 appears 1 times out of the five total outcomes, so the relative frequency is 1/5 = 0.2"
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Relative frequencies cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Relative frequencies cannot be greater than 1."
            },
            {
                "type": "default",
                "feedback": "Incorrect."
            }
        ]
    },
    {
        "question": "Given the data set $[1,2,6,1,4]$, find the relative frequency of the outcome 3.",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 0,
                "correct": true,
                "feedback": "Correct. The value 3 appears 0 times out of the five total outcomes, so the relative frequency is 0/5 = 0"
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Relative frequencies cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Relative frequencies cannot be greater than 1."
            },
            {
                "type": "default",
                "feedback": "Incorrect."
            }
        ]
    },
    {
        "question": "Given the data set $[1,2,6,1,4]$, find the relative frequency of the outcome 4.",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 0.2,
                "correct": true,
                "feedback": "Correct. The value 4 appears 1 times out of the five total outcomes, so the relative frequency is 1/5 = 0.2"
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Relative frequencies cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Relative frequencies cannot be greater than 1."
            },
            {
                "type": "default",
                "feedback": "Incorrect."
            }
        ]
    },
    {
        "question": "If an experiment possess statistical regularity, the relative frequency of an outcome will converge to the:",
        "type": "many_choice",
        "answers": [
            {
                "answer": "The probability of the outcome",
                "correct": true
            },
            {
                "answer": "The mean value of the outcome",
                "correct": false
            },
            {
                "answer": "The total number of experiments",
                "correct": false
            },
            {
                "answer": "The value of the outcome",
                "correct": false
            }
        ]
    },
    {
        "question": "Which of the following are reasons <b>not</b> to define the probabilities of the outcomes of an experiment as the limit of the relative frequencies?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "The limits are not well defined",
                "correct": true
            },
            {
                "answer": "Not all experiments possess statistical regularity",
                "correct": true
            },
            {
                "answer": "Even for an experiment that possesses statistical regularity, the relative frequencies may not converge to the probabilities.",
                "correct": false,
                "feedback": "Statistical regularity requires the relative frequencies to converge to the probabilities."
            },
            {
                "answer": "Some experiments cannot be repeated without great difficulty or expense",
                "correct": true
            },
            {
                "answer": "Even for an experiment that possesses statistical regularity, the number of trials required to estimate a probability to some specified precision is not clear",
                "correct": true
            }
        ],
        "answer_cols": 1
    },
    {
        "question": "Can the following be a sample space: $S=\\{ \\mbox{sunny}, \\mbox{partly cloudy}, \\mbox{cloudy} \\}$?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Yes",
                "correct": true,
                "feedback": "Correct. The sample space can contain the outcomes for any random experiment, such as how sunny tomorrow will be."
            },
            {
                "answer": "No",
                "correct": false
            }
        ]
    },
    {
        "question": "Which of the following types of mathematical object can be a sample space?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "set",
                "correct": true,
                "feedback": "Correct. The sample space is the <b>set</b> of all outcomes."
            },
            {
                "answer": "vector",
                "correct": false
            },
            {
                "answer": "function",
                "correct": false
            },
            {
                "answer": "real number",
                "correct": false
            }
        ]
    },
    {
        "question": "Consider a standard deck of cards consists of 52 cards (excluding jokers). What is the probability of drawing the Ace of Hearts?",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.019,
                "correct": true,
                "feedback": "Correct. The probability of getting any particular card is $1/52 \\approx 0.019$."
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "feedback": "Incorrect. There are 52 total cards; i.e. $|S|=52$. For a fair experiment, all of the outcomes have equal probability, so what is the probability of any one outcome?"
            }
        ]
    },
    {
        "question": "In the children's game Candy Land, players uses a spinner wheel with six different colors to determine which space to move to next. If there are six different colors (red, orange, yellow, green, blue, and violet) that are equally spaced around the wheel, what is the probability the spinner lands on orange?",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.17,
                "correct": true,
                "feedback": "Correct. The probability of getting any particular color is $1/6 \\approx 0.17$."
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "feedback": "Incorrect. There are six colors, so  $|S|=6. For a fair experiment, all of the outcomes have equal probability, so what is the probability of any one outcome?"
            }
        ]
    },
    {
        "question": "An experimenter has a two-headed coin, and two-tailed coin, and a fair coin. He chooses one at random, flips it, and observes the top face. Is the resulting fair?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Yes",
                "correct": true,
                "feedback": "Correct. There are a total of 6 faces that are all equally likely to be chosen. 3 of those are Heads and 3 of those are Tails. Thus, $P(\\mbox{Heads} = P(\\mbox{Tails}) = 1/2$, and the experiment is fair."
            },
            {
                "answer": "No",
                "correct": false,
                "feedback": "Incorrect. There are a total of 6 faces. Are these 6 faces equally likely? How many are Heads and how many are Tails?"
            }
        ]
    },
    {
        "question": "An experimenter has a two-headed coin and 6-sided die that has been changed to have Heads on two sides and Tails on 4 sides. The experimenter chooses randomly between the coin and the die. Then she flips the coin or rolls the die and observes the top face. Is this a fair experiment?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Yes",
                "correct": false,
                "feedback": "Incorrect. Although there are a total of 4 faces of Heads and 4 faces of Tails, they are not equally likely. See if you can reason through why not. For instance,  what is the probability that the coin is chosen?"
            },
            {
                "answer": "No",
                "correct": true,
                "feedback": "Correct. Note that 1/2 the time, the coin will be chosen and the outcome will be Heads. In addition, 1/2 the time the die will be chosen and some of those times the outcome will be Heads. Thus $P(\\mbox{Heads})>1/2$, so the experiment is not fair."
            }
        ]
    },
    {
        "question": "Choose all of the following that are members of a probability space.",
        "type": "many_choice",
        "answers": [
            {
                "answer": "Sample Space",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "Probability Measure",
                "correct": true
            },
            {
                "answer": "Event Class",
                "correct": true
            },
            {
                "answer": "Random Variable",
                "correct": false
            },
            {
                "answer": "Distribution Function",
                "correct": false
            },
            {
                "answer": "State Space",
                "correct": false
            }
        ]
    },
    {
        "question": "Which of the following types of mathematical objects can be an event class?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "A set of numbers",
                "correct": false,
                "feedback": "Incorrect. The event class contains events. Events are not just numbers..."
            },
            {
                "answer": "A set of sets",
                "correct": true,
                "feedback": "Correct. For finite sample spaces, the event class can be taken to be the set of all subsets of the sample space."
            },
            {
                "answer": "A set of functions",
                "correct": false,
                "feedback": "Incorrect. The event class contains events. Events are not just numbers..."
            }
        ]
    },
    {
        "question": "Which of the following are true of a probability measure? (Choose all that apply.)",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "values are non-negative",
                "correct": true,
                "feedback": "Correct. Probabilty measures return the probability of an event, and probabilities are non-negative ($\\ge 0$)."
            },
            {
                "answer": "values are $\\le 1$",
                "correct": true,
                "feedback": "Correct. Probabilty measures return the probability of an event, and probabilities are $\\le 1$."
            },
            {
                "answer": "one-to-one",
                "correct": false,
                "feedback": "Incorrect. One-to-one would mean that the probability measure produces different values for every event. But multiple events can have the same probability."
            },
            {
                "answer": "maps from outcomes onto the real line",
                "correct": false,
                "feedback": "Incorrect. A probability measure measures events, not outcomes."
            },
            {
                "answer": "maps from events onto the real line",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "additive:<p> for any two events $A,B$ in the event class,<p>$$P(A \\cup B) = P(A) +P(B)$$",
                "correct": false,
                "feedback": "Incorrect. This only holds if $A$ and $B$ are disjoint."
            }
        ]
    },
    {
        "question": "Which of these are the standard Axioms of Probability for a finite sample space?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "If $E \\in \\mathcal{F}$, then $P(E) \\ge 0$",
                "correct": true
            },
            {
                "answer": "If $E \\in \\mathcal{F}$, then $P(E) \\le 1$",
                "correct": false,
                "feedback": "Incorrect. Although this is true, it is not one of the standard axioms; instead, it can be proven as a corollary of the axioms."
            },
            {
                "answer": "$P(S) = 1$",
                "correct": true
            },
            {
                "answer": "$P( \\emptyset) = 0$",
                "correct": false,
                "feedback": "Incorrect. Although this is true, it is not one of the standard axioms; instead, it can be proven as a corollary of the axioms."
            },
            {
                "answer": "If $A \\cap B = \\emptyset$, then $P(A \\cup B) = P(A) + P(B)$",
                "correct": true
            },
            {
                "answer": "If $A \\cap B = \\emptyset$, then $P(A \\cap B) = 0$",
                "correct": false,
                "feedback": "Incorrect. Although this is true, it is not one of the standard axioms; instead, it can be proven as a corollary of the axioms."
            },
            {
                "answer": "If $A \\cup B = \\emptyset$, then $P(A \\cap B) = P(A) + P(B)$",
                "correct": false,
                "feedback": "Incorrect. This turns out to be true only because it implies that both $P(A)=0$ and $P(B)=0$, which will also result in $P(A \\cap B) =0$."
            },
            {
                "answer": "If $A \\cap B = \\emptyset$, then $P(A \\cap B) = P(A)P(B)$",
                "correct": false,
                "feedback": "Incorrect. This can only be true if at least one of $P(A)=0$ or $P(B)=0$."
            }
        ],
        "answer_cols": 1
    },
    {
        "question": "Consider a standard deck of cards consists of 52 cards (excluding jokers). If you draw one card, what is the probability that its suit is Hearts?",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 0.25,
                "correct": true,
                "feedback": "Correct. There are 13 Hearts out of 52 cards, so the probability is 13/52 = 1/4."
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "feedback": "Incorrect. There are 52 total cards; i.e. $|S|=52$. Let $E$ denote the specified event. Count the number of cards in $E$ and calculate the probability as $|E|/|S|$."
            }
        ]
    },
    {
        "question": "Consider a standard deck of cards consists of 52 cards (excluding jokers). If you draw one card, what is the probability that it is an Ace?",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.077,
                "correct": true,
                "feedback": "Correct. There are a total of 4 Aces among the 52 total cards, so the probability is $4/52 = 1/13 \\approx 0.077$."
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "feedback": "Incorrect. There are 52 total cards; i.e. $|S|=52$. Let $E$ denote the specified event. Count the number of cards in $E$ and calculate the probability as $|E|/|S|$."
            }
        ]
    },
    {
        "question": "In a standard English Scrabble set, there are 42 vowel tiles, with the counts shown: \\[E \\times 12,\\, A \\times 9,\\, I \\times 9, \\, O \\times 8, \\, U \\times 4. \\] If you draw one tile from the set of vowels, what is the probability that it is an $E$?",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.29,
                "correct": true,
                "feedback": "Correct. There are 12 $E$ tiles out of 42 total tiles, so the probability is $12/42 \\approx 0.29$."
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "feedback": "Incorrect. For a fair experiment the probability of an outcome $"
            }
        ]
    },
    {
        "question": "Three fair dice are rolled. What is the probability that the sum of the top faces is equal to 4?",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.014,
                "correct": true,
                "feedback": "Correct. There are three ways to get a sum of 4: (1,1,2), (1,2,1), (2,1,1). There are $6 \\times 6 \\times 6 =216$ total outcomes. Thus, the probability is $3/216 = 1/72$."
            },
            {
                "type": "value",
                "value": 0.019,
                "correct": true,
                "feedback": "Incorrect. You look like you are on the right track, but are you sure you counted the number of ways to get a sum of 4 correctly? Try writing them down."
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "feedback": "Incorrect. How many ways are there to make a sum of 4? There are $6 \\times 6 \\times 6 =216$ total outcomes. "
            }
        ]
    },
    {
        "question": "If you roll a fair 6-sided die two times and observe the top faces, what is the probability that you see at least one 1? Answer using a fraction or at least 3 significant digits.",
        "type": "numeric",
        "precision": 3,
        "answers": [
            {
                "type": "value",
                "value": 0.306,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "value",
                "value": 0.333,
                "correct": false,
                "feedback": "Incorrect. Are these events mutually exclusive?"
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "feedback": "Incorrect. You can solve this problem using Corollary 5 or through careful counting over all 36 outcomes."
            }
        ]
    },
    {
        "question": "If you roll a fair 6-sided die two times, what is the probability of getting a 1 on both rolls of the die? Answer using a fraction or at least 3 significant digits.",
        "type": "numeric",
        "precision": 3,
        "answers": [
            {
                "type": "value",
                "value": 0.0278,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "feedback": "Incorrect. Consider all 36 outcomes that arise from rolling a die two times. How many of them correspond to getting a 1 on both rolls?"
            }
        ]
    },
    {
        "question": "The affiliations of attendees at a large conference are: 45% education, 20% government, and 35% industry. (Attendees are only allowed to specify one type of affiliation.) If you ask a random attendee about their affiliation, what is the probability that it will <b>not</b> be in education?",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 0.55,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "value",
                "value": 0.45,
                "correct": false,
                "feedback": "Incorrect. Note that we are looking for those attendees whose affiliation is <b>NOT</b> in education."
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "feedback": "Incorrect. Hint: this problem can be solved using either complements or using the probability of mutually exclusive events."
            }
        ]
    },
    {
        "question": "At a certain university, students access the Internet through either WiFi or cellular data. However, there are some places on campus where each of these do not offer connectivity. For a randomly selected location on the University's campus, the probability of a WiFi connection is 0.8, the probability of a cellular data connection is 0.9, and the probability of having both types of connections is 0.75. What is the probability of being able to connect to the Internet at a randomly selected location?",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.95,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "range": [
                    1e-11,
                    0.899999999999
                ],
                "correct": false,
                "feedback": "Incorrect. We are looking for the probability of a union of events. It cannot be less than the probability of either of the individual events."
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "feedback": "Incorrect."
            }
        ]
    },
    {
        "question": "In a standard English Scrabble set, there are 42 vowel tiles, with the counts shown: \\[E \\times 12,\\, A \\times 9,\\, I \\times 9, \\, O \\times 8, \\, U \\times 4. \\] If you draw one tile from the set of vowels, what is the probability that it is <b>neither</b> an $A$ nor an $E$?",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 0.5,
                "correct": true,
                "feedback": "Correct. There are 21 tiles that are not $A$ or $E$: $I \\times 9$, $O \\times 8$, $U \\times 4$. The probability is thus 21/42 = 1/2."
            },
            {
                "range": [
                    -100000000,
                    -1e-12
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be negative."
            },
            {
                "range": [
                    1.000000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "feedback": "Incorrect. How many vowel tiles are there that are not $A$ or $E$? What is the proportion of those tiles out of all vowel tiles?"
            }
        ]
    },
    {
        "question": "If I roll a fair 6-sided die two times, what is the probability that the values on the top face of the dice are different? Answer as a fraction or a decimal with at least 2 significant digits.",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.83,
                "correct": true,
                "feedback": "Correct! The exact answer is 5/6."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Suggestion: Write out all the outcomes in the event OR apply corollary 1 to make the problem simpler."
            },
            {
                "type": "range",
                "range": [
                    1.0000001,
                    100000000
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be more than 1."
            },
            {
                "type": "range",
                "range": [
                    -100000000,
                    0
                ],
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be less than 0."
            },
            {
                "type": "value",
                "answer": "0",
                "value": false,
                "feedback": "Incorrect. A probability of 0 would imply that it is not possible for the two dice to have different values? Clearly, that is not true."
            }
        ]
    },
    {
        "question": "Of the readers of a data science book, 80% have prior Python programming experience, and 40% have prior C/C++ programming experience. What can we say about the probability that a randomly selected reader has prior experience in programming in both Python and C/C++? (Choose all that are true.)",
        "type": "many_choice",
        "answers": [
            {
                "answer": "The probability is less than 80%",
                "correct": true
            },
            {
                "answer": "The probability is less than 40%",
                "correct": true
            },
            {
                "answer": "The probability is strictly greater than 0",
                "correct": true,
                "feedback": "Correct. Since $P(A \\cup B) = P(A) + P(B) - P(A \\cap B)$, it must be that $P(A \\cap B)>0$; otherwise, $P(A \\cup B) > 1$, which is not possible."
            },
            {
                "answer": "The probability is more than 40%",
                "correct": false,
                "feedback": "This is the probability of an intersection of events. That probability must be less than  or equal to the probabilities of either of the events."
            },
            {
                "answer": "The probability is more than 80%",
                "correct": false,
                "feedback": "This is the probability of an intersection of events. That probability must be less than  or equal to the probabilities of either of the events."
            },
            {
                "answer": "The probability is strictly less than 1",
                "correct": true
            }
        ]
    },
    {
        "question": "How many outcomes are in the event $H_3$ (there are 3 heads on 20 flips of a fair coin)?",
        "type": "numeric",
        "precision": 0,
        "answers": [
            {
                "type": "value",
                "value": 1140,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "value",
                "value": 6840,
                "correct": false,
                "feedback": "You may be overcounting different orders. Did you compute this using a triple summation, as suggested?"
            },
            {
                "type": "value",
                "value": 3420,
                "correct": false,
                "feedback": "You may be overcounting different orders. Did you compute this using a triple summation, as suggested?"
            },
            {
                "type": "value",
                "value": 1330,
                "correct": false,
                "feedback": "Check your bounds carefully. What is the last position that the first symbol could be in?"
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "No. We are counting a number of objects, so it cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1048577,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Recall that  the entire sample space only has 1048576 outcomes. $H_3$ cannot have more outcomes than $S$."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "You should have 3 for statements, with 3 different variables, and each of the nested for statements should have a range that depends on the index variable of the previous for statement."
            }
        ]
    },
    {
        "question": "How many outcomes are in the event $H_4$ (there are 4 heads on 20 flips of a fair coin)?",
        "type": "numeric",
        "precision": 0,
        "answers": [
            {
                "type": "value",
                "value": 4845,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "No. We are counting a number of outcomes, so it cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1048577,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Recall that  the entire sample space only has 1048576 outcomes. $H_3$ cannot have more outcomes than $S$."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "The number of outcomes is 20 choose 4 and can be calculated using the binom() function of SciPy.special."
            }
        ]
    },
    {
        "question": "How many outcomes are in the event $H_5$ (there are 5 heads on 20 flips of a fair coin)?",
        "type": "numeric",
        "precision": 0,
        "answers": [
            {
                "type": "value",
                "value": 15504,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "No. We are counting a number of outcomes, so it cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1048577,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Recall that  the entire sample space only has 1048576 outcomes. $H_3$ cannot have more outcomes than $S$."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "The number of outcomes is 20 choose 5 and can be calculated using the binom() function of SciPy.special."
            }
        ]
    },
    {
        "question": "How many outcomes are in the event $H_6$ (there are 6 heads on 20 flips of a fair coin)?",
        "type": "numeric",
        "precision": 0,
        "answers": [
            {
                "type": "value",
                "value": 38760,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "No. We are counting a number of outcomes, so it cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1048577,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Recall that  the entire sample space only has 1048576 outcomes. $H_3$ cannot have more outcomes than $S$."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "The number of outcomes is 20 choose 6 and can be calculated using the binom() function of SciPy.special."
            }
        ]
    },
    {
        "question": "How many outcomes are in the event $H_7$ (there are 7 heads on 20 flips of a fair coin)?",
        "type": "numeric",
        "precision": 0,
        "answers": [
            {
                "type": "value",
                "value": 77520,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "No. We are counting a number of outcomes, so it cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1048577,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Recall that  the entire sample space only has 1048576 outcomes. $H_3$ cannot have more outcomes than $S$."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "The number of outcomes is 20 choose 7 and can be calculated using the binom() function of SciPy.special."
            }
        ]
    },
    {
        "question": "How many outcomes are in the event $H_8$ (there are 8 heads on 20 flips of a fair coin)?",
        "type": "numeric",
        "precision": 0,
        "answers": [
            {
                "type": "value",
                "value": 125970,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "No. We are counting a number of outcomes, so it cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1048577,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Recall that  the entire sample space only has 1048576 outcomes. $H_3$ cannot have more outcomes than $S$."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "The number of outcomes is 20 choose 8 and can be calculated using the binom() function of SciPy.special."
            }
        ]
    },
    {
        "question": "Find the probability of 4 heads on 20 flips of a fair coin, $P(H_4)$ to 2 significant digits.",
        "type": "numeric",
        "precision": 4,
        "answers": [
            {
                "type": "value",
                "value": 0.0046,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1.0000000001,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. Find $|H_4|$ using the binomial coefficient and divide by the cardinality of $S$. "
            }
        ]
    },
    {
        "question": "Find the probability of 6 heads on 20 flips of a fair coin, $P(H_6)$ to 2 significant digits.",
        "type": "numeric",
        "precision": 3,
        "answers": [
            {
                "type": "value",
                "value": 0.037,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1.0000000001,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. Find $|H_6|$ using the binomial coefficient and divide by the cardinality of $S$. "
            }
        ]
    },
    {
        "question": "Find the probability of 8 heads on 20 flips of a fair coin, $P(H_8)$ to 2 significant digits.",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.12,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1.0000000001,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. Find $|H_8|$ using the binomial coefficient and divide by the cardinality of $S$. "
            }
        ]
    },
    {
        "question": "Find the probability of 10 heads on 20 flips of a fair coin, $P(H_{10})$ to 2 significant digits.",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.18,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1.0000000001,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. Find $|H_{10}|$ using the binomial coefficient and divide by the cardinality of $S$. "
            }
        ]
    },
    {
        "question": "Find the probability of 12 heads on 20 flips of a fair coin, $P(H_{12})$ to 2 significant digits.",
        "type": "numeric",
        "precision": 2,
        "answers": [
            {
                "type": "value",
                "value": 0.12,
                "correct": true,
                "feedback": "Correct."
            },
            {
                "type": "range",
                "range": [
                    -1000000,
                    0
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1.0000000001,
                    1000000000
                ],
                "correct": false,
                "feedback": "No. Probabilities cannot be greater than 1."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. Find $|H_{12}|$ using the binomial coefficient and divide by the cardinality of $S$. "
            }
        ]
    },
    {
        "question": "Poker dice is played by rolling five dice simultaneously.  How many ordered outcomes are there?",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 7776,
                "correct": true,
                "feedback": "Correct! This is an example of sampling with ordering and with replacement."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. This is an example of sampling with replacement, where each subexperiment has a sample space with 6 outcomes."
            },
            {
                "type": "range",
                "range": [
                    1e-15,
                    1
                ],
                "correct": false,
                "feedback": "Incorrect. We are looking for a count of the number of outcomes, not a probability."
            },
            {
                "type": "range",
                "range": [
                    -100000000,
                    0
                ],
                "correct": false,
                "feedback": "Incorrect. The number of outcomes cannot be less than zero."
            },
            {
                "type": "value",
                "answer": "0",
                "value": false,
                "feedback": "Incorrect. There are many possible outcomes, such as (1,1,1,1,1) or (1,2,3,4,5)."
            }
        ]
    },
    {
        "question": "Five cards are drawn from a deck of 52 cards (i.e., without jokers). Determine how many ways there are to get a hand with 4 aces if order IS NOT considered.",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 48,
                "correct": true,
                "feedback": "Correct! The answer is 48 because the 4 aces are determined, so the other card in the hand can be any of the other 48 cards in the deck."
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. How many ways are there to choose the aces in the hand? The other card(s)?"
            },
            {
                "type": "range",
                "range": [
                    -100000000,
                    0
                ],
                "correct": false,
                "feedback": "Incorrect. Counts cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1e-15,
                    1
                ],
                "correct": false,
                "feedback": "Incorrect. We are looking for a count of the number of outcomes, not a probability."
            }
        ]
    },
    {
        "question": "Five cards are drawn from a deck of 52 cards (i.e., without jokers). Determine how many ways there are to get a hand with 3 aces if order IS NOT considered.",
        "type": "numeric",
        "answers": [
            {
                "type": "value",
                "value": 4512,
                "correct": true,
                "feedback": "Correct!"
            },
            {
                "type": "default",
                "correct": false,
                "feedback": "Incorrect. How many ways are there to choose the aces in the hand? The other card(s)?"
            },
            {
                "type": "range",
                "range": [
                    -100000000,
                    0
                ],
                "correct": false,
                "feedback": "Incorrect. Counts cannot be negative."
            },
            {
                "type": "range",
                "range": [
                    1e-15,
                    1
                ],
                "correct": false,
                "feedback": "Incorrect. We are looking for a count of the number of outcomes, not a probability."
            }
        ]
    }
];
    // Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.textContent = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == "True") {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.textContent = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);
        console.log(submission);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
        //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                console.log(answer.value);
                console.log(submission == answer.value);
                if (submission == answer.value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }
                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        return false;
    }

}

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.textContent = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
function jaxify(string) {
    var mystring = string;

    var count = 0;
    var loc = mystring.search(/([^\\]|^)(\$)/);

    var count2 = 0;
    var loc2 = mystring.search(/([^\\]|^)(\$\$)/);

    //console.log(loc);

    while ((loc >= 0) || (loc2 >= 0)) {

        /* Have to replace all the double $$ first with current implementation */
        if (loc2 >= 0) {
            if (count2 % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\[");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\]");
            }
            count2++;
        } else {
            if (count % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\(");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\)");
            }
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
        //console.log(mystring,", loc:",loc,", loc2:",loc2);
    }

    //console.log(mystring);
    return mystring;
}


function show_questions(json, mydiv) {
    console.log('show_questions');
    //var mydiv=document.getElementById(myid);
    var shuffle_questions = mydiv.dataset.shufflequestions;
    var num_questions = mydiv.dataset.numquestions;
    var shuffle_answers = mydiv.dataset.shuffleanswers;
    var max_width = mydiv.dataset.maxwidth;

    if (num_questions > json.length) {
        num_questions = json.length;
    }

    var questions;
    if ((num_questions < json.length) || (shuffle_questions == "True")) {
        //console.log(num_questions+","+json.length);
        questions = getRandomSubarray(json, num_questions);
    } else {
        questions = json;
    }

    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);

    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        //iDiv.id = 'quizWrap' + id + index;
        iDiv.id = 'quizWrap' + id;
        iDiv.className = 'Quiz';
        iDiv.setAttribute('data-qnum', index);
        iDiv.style.maxWidth  =max_width+"px";
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;
        
        var outerqDiv = document.createElement('div');
        outerqDiv.id = "OuterquizQn" + id + index;
        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id = "quizQn" + id + index;
        
        if (qa.question) {
            iDiv.append(outerqDiv);

            //qDiv.textContent=qa.question;
            qDiv.innerHTML = jaxify(qa.question);
            outerqDiv.append(qDiv);
        }

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa) {
            codeDiv = document.createElement('div');
            codeDiv.id = "code" + id + index;
            codeDiv.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = qa.code;
            outerqDiv.append(codeDiv);
            //console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id = "quizAns" + id + index;
        aDiv.className = 'Answer';
        iDiv.append(aDiv);

        //console.log(qa.type);

        var num_correct;
        if ((qa.type == "multiple_choice") || (qa.type == "many_choice") ) {
            num_correct = make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
            if ("answer_cols" in qa) {
                //aDiv.style.gridTemplateColumns = 'auto '.repeat(qa.answer_cols);
                aDiv.style.gridTemplateColumns = 'repeat(' + qa.answer_cols + ', 1fr)';
            }
        } else if (qa.type == "numeric") {
            //console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id = "fb" + id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className = "Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
    var preserveResponses = mydiv.dataset.preserveresponses;
    console.log(preserveResponses);
    console.log(preserveResponses == "true");
    if (preserveResponses == "true") {
        console.log(preserveResponses);
        // Create Div to contain record of answers
        var iDiv = document.createElement('div');
        iDiv.id = 'responses' + mydiv.id;
        iDiv.className = 'JCResponses';
        // Create a place to store responses as an empty array
        iDiv.setAttribute('data-responses', '[]');

        // Dummy Text
        iDiv.innerHTML="<b>Select your answers and then follow the directions that will appear here.</b>"
        //iDiv.className = 'Quiz';
        mydiv.appendChild(iDiv);
    }
//console.log("At end of show_questions");
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    return false;
}
/* This is to handle asynchrony issues in loading Jupyter notebooks
           where the quiz has been previously run. The Javascript was generally
           being run before the div was added to the DOM. I tried to do this
           more elegantly using Mutation Observer, but I didn't get it to work.

           Someone more knowledgeable could make this better ;-) */

        function try_show() {
          if(document.getElementById("fGGYGllDjBkW")) {
            show_questions(questionsfGGYGllDjBkW,  fGGYGllDjBkW); 
          } else {
             setTimeout(try_show, 200);
          }
        };
    
        //console.log(element);
        {
        const jmscontroller = new AbortController();
        const signal = jmscontroller.signal;

        setTimeout(() => jmscontroller.abort(), 5000);

        fetch("https://raw.githubusercontent.com/jmshea/Foundations-of-Data-Science-with-Python/main/04-probability1/questions/7-summary.json", {signal})
        .then(response => response.json())
        .then(json => show_questions(json, fGGYGllDjBkW))
        .catch(err => {
        console.log("Fetch error or timeout");
        show_questions(questionsfGGYGllDjBkW, fGGYGllDjBkW);
        });
        }
        </script></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="PWMbYHtsEQzf" data-shufflequestions="False"
               data-shuffleanswers="True"
               data-preserveresponses="false"
               data-numquestions="1"
               data-maxwidth="600"
               style="border-radius: 10px; text-align: left"> <style>
#PWMbYHtsEQzf {
   --jq-multiple-choice-bg: #345995;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #e26d5a;
   --jq-numeric-bg: #5bc0eb;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-incorrect-color: #666666;
   --jq-correct-color: #87a878;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 15px;
    padding-bottom: 4px;
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
    min-height: 2em;
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsPWMbYHtsEQzf=[{"question": "If <code>df</code> is a Pandas dataframe with a column named \"state\", which of these commands will return that column?", "type": "multiple_choice", "answers": [{"code": "df.loc['state']", "correct": false, "feedback": "<code>df.loc</code> is used to index into the rows. "}, {"code": "df[state]", "correct": false, "feedback": "Incorrect. The column name must be passes as a string."}, {"code": "df['state']", "correct": true}, {"code": "df('state')", "correct": false, "feedback": "Square brackets are used for indexing, not parentheses"}]}, {"question": "If <code>df</code> is a Pandas dataframe with a columns named \"city\" and \"state\", which of these commands will return a dataframe that contains just those two columns?", "type": "multiple_choice", "answers": [{"code": "df('city', 'state')", "correct": false, "feedback": "Incorrect. Remember to use square brackets for indexing into dataframes."}, {"code": "df['city', 'state']", "correct": false, "feedback": "Incorrect. You cannot directly pass multiple column names as indexes."}, {"code": "df[ ['city', 'state'] ]", "correct": true, "feedback": "Correct."}, {"code": "df.loc[ ['city', 'state'] ]", "correct": false, "feedback": "Incorrect. <code>df.loc</code> is for indexing by rows"}], "answer_cols": 1}, {"question": "If <code>df</code> is a Pandas dataframe with a column named \"state\" what is the effect of the following command?", "code": "df.set_index('state')", "type": "multiple_choice", "answers": [{"answer": "The returned dataframe is now indexed by \"state\". The index of df is unchanged.", "correct": true, "feedback": "Correct. This command does not change the index of the <code>df</code> dataframe. You can instead change the index of the dataframe stored in <code>df</code> by using the <code>inplace=True</code> keyword argument."}, {"answer": "The index of <code>df</code> is changed to \"state\". There is no returned value.", "correct": false, "feedback": "Incorrect. Try again."}, {"answer": "The index of <code>df</code> is changed to \"state\" and the new dataframe is returned.", "correct": false, "feedback": "Incorrect. Try again."}, {"answer": "Something else.", "correct": false, "feedback": "Incorrect. Try again."}]}, {"question": "If <code>df</code> is a Pandas dataframe with an index that contains the name of the 50 United States,  which of these commands will return the data for Florida?", "type": "multiple_choice", "answers": [{"code": "df['Florida']", "correct": false, "feedback": "Incorrect. Using indexing with only square brackets returns columns, each of which contains one variable or feature. We want a row that contains all of the variables or features for Florida."}, {"code": "df.loc['Florida']", "correct": true, "feedback": "Correct."}, {"code": "df.loc('Florida')", "correct": false, "feedback": "Incorrect. Square brackets are used for indexing."}, {"code": "df.row['Florida']", "correct": false, "feedback": "Incorrect. You have the right idea, but \"row\" is not the correct keyword to use to access the rows."}]}, {"question": "If Matplotlib.pyplot has been imported as <code>plt</code>, which of these can be used to specify that the label for the $x$ axis of the current graph should be \"index\"?", "type": "multiple_choice", "answers": [{"code": "plt.labelx('index')", "correct": false, "feedback": ""}, {"code": "plt.xlabel('index')", "correct": true, "feedback": "Correct."}, {"code": "plt.xtitle('index')", "correct": false, "feedback": "Incorrect. There is a <code>plt.title()</code> function, but it is used for setting the title of the plot."}, {"code": "plt['xlabel']='index'", "correct": false, "feedback": "Incorrect. Although the label of the $x$-axis is a property of the graph, it cannot be accessed through indexing like this."}], "answer_cols": 1}, {"question": "Which of these Matplotlib functions can be used to add information about which visual indicators (like color or marker) in your plot correspond to which data?", "type": "multiple_choice", "answers": [{"code": "plt.legend()", "correct": true, "feedback": "Correct."}, {"code": "plt.guide()", "correct": false}, {"code": "plt.add_legend()", "correct": false}, {"code": "plt.add_guide()", "correct": false}]}, {"question": "Which type of plot is better for identifying outliers?", "type": "multiple_choice", "answers": [{"code": "Histogram", "correct": false, "feedback": "Incorrect. Histograms do not show all of the data points and so can hide outliers."}, {"code": "Scatter Plot", "correct": true}]}, {"question": "Suppose sets $A$ and $B$ are non-empty subsets of some sample space $S$. If $A$ and $B$ are disjoint, which of the following are true?", "type": "many_choice", "answers": [{"answer": "Every element in $S$ is either in $A$ or $B$", "correct": false, "feedback": "No. This is only true if $A$ and $B$ are a partition for $S$."}, {"answer": "$A$ and $B$ have no elements in common", "correct": true}, {"answer": "$A \\cap B = \\emptyset$", "correct": true}, {"answer": "$A \\cup B = \\emptyset$", "correct": false, "feedback": "Since $A$ and $B$ are nonempty, their union will also be nonempty."}]}, {"question": "Which of these is true of a partition of a set $S$?", "type": "many_choice", "answers": [{"answer": "Every member of  the set $S$ must be in some subset of the partition.", "correct": true}, {"answer": "The partition is a collection of subsets of $S$", "correct": true}, {"answer": "Elements may belong to more than one of the subsets in the partition", "correct": false}, {"answer": "No element in $S$ may belong to more than one of the subsets in the partition", "correct": true}, {"answer": "The union of the subsets in the partition is equal to $S$", "correct": true}, {"answer": "The intersection of the subsets in the partition is equal to $S$", "correct": false}, {"answer": "The intersection of the subsets in the partition is equal to $\\emptyset$ ", "correct": true}]}, {"question": "Which of the following is an example of a partition of the set {1, 2, 3, 4}?", "type": "multiple_choice", "answers": [{"answer": "$\\{1, 2\\}, \\{3\\}, \\{4\\}$", "correct": true}, {"answer": "$\\{1, 2\\}, \\{2, 3\\}, \\{4\\}$", "correct": false, "feedback": "No. The sets $\\{1,2\\}$ and $\\{2,3\\}$ are not disjoint."}, {"answer": "$\\{1\\}, \\{2\\}, \\{3\\}, \\{4\\}$", "correct": true}, {"answer": "$\\{1, 2\\}, \\{4\\}, $", "correct": false, "feedback": "No. None of the sets in the partition contain the element $3$ from $S$, so this is not a partition. "}]}, {"question": "Find the median of the data set $[4, 5, 3, 4, 4]$. ", "type": "numeric", "answers": [{"type": "value", "value": 4, "correct": true, "feedback": "Correct. The sorted data is $[3,4,4,4,5]$, so the middle value is 4."}, {"type": "value", "value": 3, "correct": false, "feedback": "Incorrect. Although 3 is the middle value of the data as displayed in the question, the median is the middle value of the sorted data."}, {"range": [-100000000, 2.9999], "correct": false, "feedback": "Incorrect. The median will always be a value in the data set, or the average of the middle two values if there are an even number of data points."}, {"range": [5.000000001, 100000000], "correct": false, "feedback": "Incorrect. The median will always be a value in the data set, or the average of the middle two values if there are an even number of data points."}, {"type": "default", "feedback": "Incorrect."}]}, {"question": "Find the mode of the data set $[4, 5, 3, 4, 4]$. ", "type": "numeric", "answers": [{"type": "value", "value": 4, "correct": true, "feedback": "Correct. The value 4 appears 3 times, whereas the other data values only appear 1 time each."}, {"range": [-100000000, 2.9999], "correct": false, "feedback": "Incorrect. The mode will always be a value in the data set, or the average of the middle two values if there are an even number of data points."}, {"range": [5.000000001, 100000000], "correct": false, "feedback": "Incorrect. The mode will always be a value in the data set, or the average of the middle two values if there are an even number of data points."}, {"type": "default", "feedback": "Incorrect."}]}, {"question": "Find the average (sample mean) of the data set $[4, 5, 3, 4, 4]$. ", "type": "numeric", "answers": [{"type": "value", "value": 4, "correct": true, "feedback": "Correct."}, {"range": [-100000000, 2.9999], "correct": false, "feedback": "Incorrect. Although the mean is not always a value in the data set, it will always be a value that lies between the minimum and maximum data values."}, {"range": [5.000000001, 100000000], "correct": false, "feedback": "Incorrect. Although the mean is not always a value in the data set, it will always be a value that lies between the minimum and maximum data values."}, {"type": "default", "feedback": "Incorrect."}]}, {"question": "Find the median of the data set $[4, 1, 2, 7, 1]$. ", "type": "numeric", "answers": [{"type": "value", "value": 2, "correct": true, "feedback": "Correct. The sorted data is $[1,1,2,4,7]$, so the middle value is 2."}, {"type": "value", "value": 2, "correct": false, "feedback": "Incorrect. Although 2 is the middle value of the data as displayed in the question, the median is the middle value of the sorted data."}, {"range": [-100000000, 0.9999], "correct": false, "feedback": "Incorrect. The median will always be a value in the data set, or the average of the middle two values if there are an even number of data points."}, {"range": [7.000000001, 100000000], "correct": false, "feedback": "Incorrect. The median will always be a value in the data set, or the average of the middle two values if there are an even number of data points."}, {"type": "default", "feedback": "Incorrect."}]}, {"question": "Find the mode of the data set $[4, 1, 2, 7, 1]$.", "type": "numeric", "answers": [{"type": "value", "value": 1, "correct": true, "feedback": "Correct. The value 1 appears 2 times, whereas the other data values only appear 1 time each."}, {"range": [-100000000, 0.9999], "correct": false, "feedback": "Incorrect. The mode will always be a value in the data set, or the average of the middle two values if there are an even number of data points."}, {"range": [7.000000001, 100000000], "correct": false, "feedback": "Incorrect. The mode will always be a value in the data set, or the average of the middle two values if there are an even number of data points."}, {"type": "default", "feedback": "Incorrect."}]}, {"question": "Find the average (sample mean) of the data set $[4, 1, 2, 7, 1]$. ", "type": "numeric", "answers": [{"type": "value", "value": 3, "correct": true, "feedback": "Correct."}, {"range": [-100000000, 0.9999], "correct": false, "feedback": "Incorrect. Although the mean is not always a value in the data set, it will always be a value that lies between the minimum and maximum data values."}, {"range": [7.000000001, 100000000], "correct": false, "feedback": "Incorrect. Although the mean is not always a value in the data set, it will always be a value that lies between the minimum and maximum data values."}, {"type": "default", "feedback": "Incorrect."}]}, {"question": "Find the median of the data set $[1, 4, 2, 1, 7, 3]$. Since there is an even number of data points, calculate the median as the average of the middle two data points.", "type": "numeric", "answers": [{"type": "value", "value": 2.5, "correct": true, "feedback": "Correct. The sorted data is $[1,1,2,4,7]$, so the middle value is 2."}, {"type": "value", "value": 2, "correct": false, "feedback": "Incorrect. Although 2 is the middle value of the data as displayed in the question, the median is the middle value of the sorted data."}, {"range": [-100000000, 0.9999], "correct": false, "feedback": "Incorrect. The median will always be a value in the data set, or the average of the middle two values if there are an even number of data points."}, {"range": [7.000000001, 100000000], "correct": false, "feedback": "Incorrect. The median will always be a value in the data set, or the average of the middle two values if there are an even number of data points."}, {"type": "default", "feedback": "Incorrect."}]}, {"question": "Find the mode of the data set $[1, 4, 2, 1, 7, 3]$.", "type": "numeric", "answers": [{"type": "value", "value": 1, "correct": true, "feedback": "Correct. The value 1 appears 2 times, whereas the other data values only appear 1 time each."}, {"range": [-100000000, 0.9999], "correct": false, "feedback": "Incorrect. The mode will always be a value in the data set, or the average of the middle two values if there are an even number of data points."}, {"range": [7.000000001, 100000000], "correct": false, "feedback": "Incorrect. The mode will always be a value in the data set, or the average of the middle two values if there are an even number of data points."}, {"type": "default", "feedback": "Incorrect."}]}, {"question": "Find the average (sample mean) of the data set $[1, 4, 2, 1, 7, 3]$. ", "type": "numeric", "answers": [{"type": "value", "value": 3, "correct": true, "feedback": "Correct."}, {"range": [-100000000, 0.9999], "correct": false, "feedback": "Incorrect. Although the mean is not always a value in the data set, it will always be a value that lies between the minimum and maximum data values."}, {"range": [7.000000001, 100000000], "correct": false, "feedback": "Incorrect. Although the mean is not always a value in the data set, it will always be a value that lies between the minimum and maximum data values."}, {"type": "default", "feedback": "Incorrect."}]}, {"question": "What are summary statistics?", "type": "multiple_choice", "answers": [{"answer": "Numerical values that summarize a dataset", "correct": true}, {"answer": "Graphical representations of a dataset", "correct": false}, {"answer": "Descriptive words that summarize a dataset", "correct": false}]}, {"question": "What is the sample mean?", "type": "multiple_choice", "answers": [{"answer": "The middle value of a dataset", "correct": false}, {"answer": "The most common value in a dataset", "correct": false}, {"answer": "A value that minimizes the mean-squared error to the data", "correct": true}]}, {"question": "What is the median?", "type": "multiple_choice", "answers": [{"answer": "A middle value of a dataset", "correct": true}, {"answer": "The most common value in a dataset", "correct": false}, {"answer": "A value that minimizes the mean-squared error to the data", "correct": false}]}, {"question": "What is the mode?", "type": "multiple_choice", "answers": [{"answer": "The middle value of a dataset", "correct": false}, {"answer": "A value that appears the most in a dataset", "correct": true}, {"answer": "A value that minimizes the mean-squared error to the data", "correct": false}]}, {"question": "Which of these summary statistics always has a unique value for a given dataset?", "type": "multiple_choice", "answers": [{"answer": "median", "correct": false, "feedback": "Incorrect. When the number of points in a dataset is even, there is not a single data value in the middle of the dataset. In this case, the value of the median can be defined in different ways."}, {"answer": "mode", "correct": false, "feedback": "Incorrect. There may be multiple values that all occur the same number of times, and there is no unique mode in such a case."}, {"answer": "mean", "correct": true}]}, {"question": "Which of these statistics is less sensitive to outliers?", "type": "multiple_choice", "answers": [{"answer": "sample mean", "correct": false, "feedback": "Incorrect. The sample mean can change significantly in the presence of outliers."}, {"answer": "median", "correct": true, "feedback": "Correct. Because the median returns a value in the middle of the dataset, it is not significantly affected by the particular values of outliers."}]}, {"question": "Given a Pandas dataframe <code>df</code> with a column called 'height', which of these can be used to get a dataframe that contains all the datapoints with height greater than the average within the dataset?", "type": "multiple_choice", "answers": [{"code": "avg = df.avg()\ndf.query('height > avg')", "correct": false, "feedback": "Pandas Dataframe and Series objects do not have an <code>avg()</code> method. Please try again."}, {"code": "avg = df.mean()\ndf.query('height > avg')", "correct": false, "feedback": "This will compare the values in the 'height' column with the values in the  'avg' column (if it exists) or else throw an error."}, {"code": "avg = df.mean()\ndf.query('height > @avg')", "correct": true}, {"code": "avg = df.mean()\ndf.query('height > $avg')", "correct": false, "feedback": "Incorrect. You are correct to recognize that we need to indicate to query that <code>avg</code> is a variable. However, $ is not the correct character for this purpose."}], "answer_cols": 1}, {"question": "Supposed the data used in Section 3.5 is partitioned using the <b>mean</b> of the normalized GDP. How many states have normalized GDP greater than or equal to the average?", "type": "numeric", "answers": [{"type": "value", "value": 22, "correct": true}, {"type": "value", "value": 28, "correct": false, "feedback": "Incorrect. You may want to check the direction of your inequality."}, {"type": "value", "value": 25, "correct": false, "feedback": "Incorrect. When we use the median to partition the data, the two groups are of equal size. However, that is not necessarily the case when we use the mean to partition the data."}, {"range": [-100000000, -1e-12], "correct": false, "feedback": "Incorrect. The number of states satisfying some condition can never be negative."}, {"range": [50.000000001, 100000000], "correct": false, "feedback": "Incorrect. There are a total of 50 states, so there cannot be more states than that satisfying any condition."}, {"type": "default", "feedback": "Incorrect."}]}, {"question": "When plotting two histograms on the same axes to compare the results, which of these should generally be used?", "type": "many_choice", "answers": [{"answer": "The same bins should be used for each histogram.", "correct": true, "feedback": "Correct. Using the same bins makes it easier to compare the distributions of values between the two histograms."}, {"answer": "The data should first be partitioned using the median.", "correct": false, "feedback": "Incorrect. The data was partitioned using the median in Section 3.5, but that was not critical the comparing the distributions of values by plotting two histograms on the same axes."}, {"answer": "The <code>alpha</code> parameter should be used to adjust the transparency of the two histograms.", "correct": true, "feedback": "Using transparency makes it easier to see the data when histogram bars overlap."}]}, {"question": "Suppose a histogram for the data $[4,6,2,4,2,4]$ is made using bins with edges at $[1,3,5,7]$. How many value are in the leftmost bin?", "type": "numeric", "answers": [{"type": "value", "value": 2, "correct": true}, {"range": [-100000000, -1e-12], "correct": false, "feedback": "Incorrect. The number of items in a bin cannot be negative."}, {"range": [6.000000001, 100000000], "correct": false, "feedback": "Incorrect. There are a total of 6 values in the data set. The number of items in any bin of the histogram cannot be greater than the total number of items."}, {"type": "default", "feedback": "Incorrect. The leftmost bin contains all values in the interval $[1,3)$."}]}, {"question": "Suppose a histogram for the data $[4,6,2,4,2,4]$ is made using bins with edges at $[1,3,5,7]$. How many value are in the center bin?", "type": "numeric", "answers": [{"type": "value", "value": 3, "correct": true}, {"range": [-100000000, -1e-12], "correct": false, "feedback": "Incorrect. The number of items in a bin cannot be negative."}, {"range": [6.000000001, 100000000], "correct": false, "feedback": "Incorrect. There are a total of 6 values in the data set. The number of items in any bin of the histogram cannot be greater than the total number of items."}, {"type": "default", "feedback": "Incorrect. The leftmost bin contains all values in the interval $[3,5)$."}]}, {"question": "Suppose a histogram for the data $[4,6,2,4,2,4]$ is made using bins with edges at $[1,3,5,7]$. How many value are in the rightmost bin?", "type": "numeric", "answers": [{"type": "value", "value": 1, "correct": true}, {"range": [-100000000, -1e-12], "correct": false, "feedback": "Incorrect. The number of items in a bin cannot be negative."}, {"range": [6.000000001, 100000000], "correct": false, "feedback": "Incorrect. There are a total of 6 values in the data set. The number of items in any bin of the histogram cannot be greater than the total number of items."}, {"type": "default", "feedback": "Incorrect. The leftmost bin contains all values in the interval $[5,7]$."}]}, {"question": "What is hypothesis testing?", "type": "multiple_choice", "answers": [{"answer": "A statistical method used to determine whether a hypothesis about a population is likely to be true or not.", "correct": true}, {"answer": "A method used to collect data about a population.", "correct": false}, {"answer": "A method used to manipulate data to fit a desired outcome.", "correct": false}, {"answer": "A method used to visualize data in a meaningful way.", "correct": false}]}, {"question": "What is the null hypothesis?", "type": "multiple_choice", "answers": [{"answer": "The assumption that there is no significant difference between a sample and the population it represents.", "correct": true}, {"answer": "The assumption that there is a significant difference between a sample and the population it represents.", "correct": false}, {"answer": "The hypothesis that is always rejected.", "correct": false}]}, {"question": "What is the alternative hypothesis?", "type": "multiple_choice", "answers": [{"answer": "An alternative explanation that is disjoint from the null hypothesis.", "correct": true}, {"answer": "The assumption that there is no significant difference between a sample and the population it represents.", "correct": false}, {"answer": "The hypothesis that is always rejected.", "correct": false}, {"answer": "The hypothesis that is always accepted.", "correct": false}]}, {"question": "What is the first step in hypothesis testing?", "type": "multiple_choice", "answers": [{"answer": "Formulating a null hypothesis and an alternative hypothesis.", "correct": true}, {"answer": "Collecting data.", "correct": false}, {"answer": "Calculating a test statistic.", "correct": false}, {"answer": "Comparing the test statistic to the critical value.", "correct": false}]}, {"question": "What is a test statistic?", "type": "multiple_choice", "answers": [{"answer": "A single numerical value that is computed from the data that can be used in a statistical test.", "correct": true}, {"answer": "The minimum number of data points you must have in your data set.", "correct": false}, {"answer": "The maximum number of data points you must have in your data set.", "correct": false}, {"answer": "The minimum separate between the means of two data sets for the result to be statistically significant.", "correct": false}]}, {"question": "Which of these are advantages of the model-free approach?", "type": "many_choice", "answers": [{"answer": "It provides exact mathematical formula for probabilities", "correct": false, "feedback": "Incorrect. Because no model is used, analytical approaches are generally not possible. Thus the results are computed using other techniques, such as resampling (simulation)."}, {"answer": "It does not require the data to be a certain size in order for the model to be accurate", "correct": true, "feedback": "Correct. Because there is not model, we do not need data to reach a certain size before we can accurately model the data. However, the data may still need to reach a certain size before the results will be accurate."}, {"answer": "It does not rely on mathematical formulas for determining factors such as statistical significance", "correct": true}, {"answer": "It can often be implemented using simulation", "correct": true}]}, {"question": "When is the null hypothesis rejected?", "type": "multiple_choice", "answers": [{"answer": "When the computed $p$-value is less than the specified significance threshold.", "correct": true}, {"answer": "When the computed $p$-value is greater than specified significance threshold.", "correct": false, "feedback": "Incorrect. In this case, we  would fail to reject the null hypothesis."}, {"answer": "When the test statistic is less than the significance threshold.", "correct": false, "feedback": "Incorrect. The test statistic is not what is compared to the signficance threshold."}, {"answer": "When a sample value of the test statistic exceeds the observed value of the test statistic.", "correct": false, "feedback": "Incorrect. When conducting a statistical test via resampling, we may compare the sample value of a test statistic to the observed value, and that affects the computed $p$-value. However, it does not cause the null hypothesis to be rejected directly."}]}, {"question": "When is the null hypothesis accepted?", "type": "multiple_choice", "answers": [{"answer": "When the computed $p$-value is greater than specified significance threshold.", "correct": false, "feedback": "Incorrect. An NHST is conducted under the assumption that the null hypothesis is true, so we can never accept the null hypothesis. We can only fail to reject it."}, {"answer": "When the computed $p$-value is less than the specified significance threshold.", "correct": false, "feedback": "Incorrect. In this case, we would <b>reject</b> the null hypothesis."}, {"answer": "When the test statistic is greater than the significance threshold.", "correct": false, "feedback": "Incorrect. An NHST is conducted under the assumption that the null hypothesis is true, so we can never accept the null hypothesis. We can only fail to reject it."}, {"answer": "When a sample value of the test statistic exceeds the observed value of the test statistic.", "correct": false, "feedback": "Incorrect. An NHST is conducted under the assumption that the null hypothesis is true, so we can never accept the null hypothesis. We can only fail to reject it."}]}, {"question": "What is the significance level?", "type": "multiple_choice", "answers": [{"answer": "The probability of rejecting the null hypothesis when it is actually true.", "correct": true}, {"answer": "The probability of accepting the null hypothesis when it is actually false.", "correct": false}, {"answer": "The probability of accepting the alternative hypothesis when it is actually false.", "correct": false}, {"answer": "The probability of rejecting the alternative hypothesis when it is actually true.", "correct": false}]}, {"question": "A research wishes to assess the impact of Caribbean ocean surface temperature on the number of hurricanes that form in the North Atlantic Ocean. She partitions the data on the number of hurricanes for each month in the last 100 years based on whether the ocean surface temperature measurement was above or below the median temperature. She then conducts a NHST using the partition data sets. This should be considered:", "type": "multiple_choice", "answers": [{"answer": "A one-dimensional test", "correct": true, "feedback": " Correct. The NHST is a one-dimensional test that is applied to the data on the number of hurricanes."}, {"answer": "A two-dimensional test", "correct": false, "feedback": "Incorrect. Even though the ocean surface temperature is used to partition the data, the resulting test is one-dimensional. The surface temperature and number of hurricanes are not used together in the statistical test."}, {"answer": "Something else", "correct": false}]}, {"question": "A research wishes to assess the impact of Caribbean ocean surface temperature on the number of hurricanes that form in the North Atlantic Ocean. She tries to find the best line that predicts the number of hurricanes in a month based on the observed ocean surface temperature. This should be considered:", "type": "multiple_choice", "answers": [{"answer": "A one-dimensional test", "correct": false, "feedback": " Incorrect. Ocean surface temperature and number of hurricanes are used together in finding the best line of fit. This is an example of linear regression."}, {"answer": "A two-dimensional test", "correct": true, "feedback": "Correct. Ocean surface temperature and number of hurricanes are used together in finding the best line of fit. This is an example of linear regression."}, {"answer": "Something else", "correct": false}]}];
    // Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.textContent = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == "True") {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.textContent = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);
        console.log(submission);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
        //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                console.log(answer.value);
                console.log(submission == answer.value);
                if (submission == answer.value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }
                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        return false;
    }

}

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.textContent = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
function jaxify(string) {
    var mystring = string;

    var count = 0;
    var loc = mystring.search(/([^\\]|^)(\$)/);

    var count2 = 0;
    var loc2 = mystring.search(/([^\\]|^)(\$\$)/);

    //console.log(loc);

    while ((loc >= 0) || (loc2 >= 0)) {

        /* Have to replace all the double $$ first with current implementation */
        if (loc2 >= 0) {
            if (count2 % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\[");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\]");
            }
            count2++;
        } else {
            if (count % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\(");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\)");
            }
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
        //console.log(mystring,", loc:",loc,", loc2:",loc2);
    }

    //console.log(mystring);
    return mystring;
}


function show_questions(json, mydiv) {
    console.log('show_questions');
    //var mydiv=document.getElementById(myid);
    var shuffle_questions = mydiv.dataset.shufflequestions;
    var num_questions = mydiv.dataset.numquestions;
    var shuffle_answers = mydiv.dataset.shuffleanswers;
    var max_width = mydiv.dataset.maxwidth;

    if (num_questions > json.length) {
        num_questions = json.length;
    }

    var questions;
    if ((num_questions < json.length) || (shuffle_questions == "True")) {
        //console.log(num_questions+","+json.length);
        questions = getRandomSubarray(json, num_questions);
    } else {
        questions = json;
    }

    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);

    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        //iDiv.id = 'quizWrap' + id + index;
        iDiv.id = 'quizWrap' + id;
        iDiv.className = 'Quiz';
        iDiv.setAttribute('data-qnum', index);
        iDiv.style.maxWidth  =max_width+"px";
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;
        
        var outerqDiv = document.createElement('div');
        outerqDiv.id = "OuterquizQn" + id + index;
        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id = "quizQn" + id + index;
        
        if (qa.question) {
            iDiv.append(outerqDiv);

            //qDiv.textContent=qa.question;
            qDiv.innerHTML = jaxify(qa.question);
            outerqDiv.append(qDiv);
        }

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa) {
            codeDiv = document.createElement('div');
            codeDiv.id = "code" + id + index;
            codeDiv.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = qa.code;
            outerqDiv.append(codeDiv);
            //console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id = "quizAns" + id + index;
        aDiv.className = 'Answer';
        iDiv.append(aDiv);

        //console.log(qa.type);

        var num_correct;
        if ((qa.type == "multiple_choice") || (qa.type == "many_choice") ) {
            num_correct = make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
            if ("answer_cols" in qa) {
                //aDiv.style.gridTemplateColumns = 'auto '.repeat(qa.answer_cols);
                aDiv.style.gridTemplateColumns = 'repeat(' + qa.answer_cols + ', 1fr)';
            }
        } else if (qa.type == "numeric") {
            //console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id = "fb" + id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className = "Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
    var preserveResponses = mydiv.dataset.preserveresponses;
    console.log(preserveResponses);
    console.log(preserveResponses == "true");
    if (preserveResponses == "true") {
        console.log(preserveResponses);
        // Create Div to contain record of answers
        var iDiv = document.createElement('div');
        iDiv.id = 'responses' + mydiv.id;
        iDiv.className = 'JCResponses';
        // Create a place to store responses as an empty array
        iDiv.setAttribute('data-responses', '[]');

        // Dummy Text
        iDiv.innerHTML="<b>Select your answers and then follow the directions that will appear here.</b>"
        //iDiv.className = 'Quiz';
        mydiv.appendChild(iDiv);
    }
//console.log("At end of show_questions");
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    return false;
}
/* This is to handle asynchrony issues in loading Jupyter notebooks
           where the quiz has been previously run. The Javascript was generally
           being run before the div was added to the DOM. I tried to do this
           more elegantly using Mutation Observer, but I didn't get it to work.

           Someone more knowledgeable could make this better ;-) */

        function try_show() {
          if(document.getElementById("PWMbYHtsEQzf")) {
            show_questions(questionsPWMbYHtsEQzf,  PWMbYHtsEQzf); 
          } else {
             setTimeout(try_show, 200);
          }
        };
    
        //console.log(element);
        {
        const jmscontroller = new AbortController();
        const signal = jmscontroller.signal;

        setTimeout(() => jmscontroller.abort(), 5000);

        fetch("https://raw.githubusercontent.com/jmshea/Foundations-of-Data-Science-with-Python/main/03-first-data/questions/8-summary.json", {signal})
        .then(response => response.json())
        .then(json => show_questions(json, PWMbYHtsEQzf))
        .catch(err => {
        console.log("Fetch error or timeout");
        show_questions(questionsPWMbYHtsEQzf, PWMbYHtsEQzf);
        });
        }
        </script></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="MvHjYNRpRClc" data-shufflequestions="False"
               data-shuffleanswers="True"
               data-preserveresponses="false"
               data-numquestions="1"
               data-maxwidth="600"
               style="border-radius: 10px; text-align: left"> <style>
#MvHjYNRpRClc {
   --jq-multiple-choice-bg: #345995;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #e26d5a;
   --jq-numeric-bg: #5bc0eb;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-incorrect-color: #666666;
   --jq-correct-color: #87a878;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 15px;
    padding-bottom: 4px;
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
    min-height: 2em;
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsMvHjYNRpRClc=[
    {
        "question": "Which of these are valid probabilities?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "$1 \\times 10^{-6}$",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "0",
                "correct": true,
                "feedback": "Correct"
            },
            {
                "answer": "95%",
                "correct": true,
                "feedback": "Correct. 95% = 0.95 is a valid probability."
            },
            {
                "answer": "-0.01",
                "correct": false,
                "feedback": "Incorrect. Probabilities cannot be negative."
            },
            {
                "answer": "150%",
                "correct": false,
                "feedback": "Incorrect. 150% = 1.5. Probabilities cannot be greater than 1."
            }
        ]
    },
    {
        "question": "What are two ways to determine a probability that are mentioned in Section 2.1?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Estimate it using simulation",
                "correct": true,
                "feedback": "Correct. Using simulations to estimate probabilities is one of the fundamental techniques used in this book."
            },
            {
                "answer": "Guess the value",
                "correct": false,
                "feedback": "Incorrect. This technique is not reliable and not mentioned in this section."
            },
            {
                "answer": "Determine the probability using mathematical analysis",
                "correct": true,
                "feedback": "Correct. This is another technique that will be introduced in this book."
            },
            {
                "answer": "Ask ChatGPT",
                "correct": false,
                "feedback": "Incorrect. Although this may work in some instances, values returned by ChatGPT are not necessarily reliable, and hence this technique is not mentioned in this section."
            }
        ]
    },
    {
        "question": "If you calculate that the probability of something occurring is very close to (but less than) 1, then:",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "That thing is almost certain to occur",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "That thing is very unlikely to occur",
                "correct": false,
                "feedback": "Incorrect. Things that are unlikely to occur have probabilities close to zero."
            },
            {
                "answer": "You must have made a mistake",
                "correct": false,
                "feedback": "Incorrect. Probabilities that are close to, but less than, 1 are valid probabilities. Thus, there is not reason that this must have been a mistake."
            }
        ]
    },
    {
        "question": "Which of these are listed as reasons to use simulations instead of experiments?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "Experiments would require a lot of time",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "Experiments would require a lot of resources",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "The experiment cannot be repeated in real life",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "The experiment does not accurately model the system",
                "correct": false,
                "feedback": "Incorrect. Generally experiments include the true system, whereas simulations are just an approximation of that system."
            }
        ]
    },
    {
        "question": "Which of these functions from the random module can be used to choose a random item from a sequence (such as a list)?",
        "type": "multiple_choice",
        "answers": [
            {
                "code": "random.choice()",
                "correct": true,
                "feedback": "Correct. The function random.choice() returns one item from a sequence."
            },
            {
                "code": "random.choices()",
                "correct": true,
                "feedback": "Correct. The function random.choices() returns a list of one or more items from a sequence."
            },
            {
                "code": "random.choose()",
                "correct": false,
                "feedback": "Incorrect."
            },
            {
                "code": "random.select()",
                "correct": false,
                "feedback": "Incorrect."
            }
        ]
    },
    {
        "question": "True or False: the functions in the random module must always choose from a sequence of numerical values",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "True",
                "correct": false,
                "feedback": "Incorrect."
            },
            {
                "answer": "False",
                "correct": true,
                "feedback": "Correct. Methods like random.choice() can choose from sequences, such as a list, which can contain any types of items."
            }
        ]
    },
    {
        "question": "What is a scatter plot?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "A graph that plots a marker to representing two different values associated with each data point",
                "correct": true
            },
            {
                "answer": "A graph that shows the frequency distribution of some data",
                "correct": false,
                "feedback": "No. Histograms are used to show the frequency distribution of data"
            },
            {
                "answer": "A graph that shows the statistics of some data",
                "correct": false,
                "feedback": "Scatter plots show the data values directly, rather than statistics of the data"
            }
        ]
    },
    {
        "question": "What is a histogram? (Choose all correct answers.)",
        "type": "many_choice",
        "answers": [
            {
                "answer": "A graph that visualizes how some data is distributed",
                "correct": true
            },
            {
                "answer": "A graph that shows the relationship between two variables",
                "correct": false,
                "feedback": "The one-dimensional histograms we discuss in this section only provide information about one variable of a data set"
            },
            {
                "answer": "A graph that plots a marker for each data point",
                "correct": false,
                "feedback": "Histograms do not use markers and do not produce separate graphics for each data point"
            },
            {
                "answer": "A specialized type of bar graph",
                "correct": true
            }
        ]
    },
    {
        "question": "Which of the following is true of histograms",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Can only be used with discrete data",
                "correct": false,
                "feedback": "False. Histograms bin data together, and this allows it to be used with continuous data"
            },
            {
                "answer": "Can only be used with continuous data",
                "correct": false,
                "feedback": "False. Histograms can be used to count discrete data, either with one value per bin or multiple values per bin"
            },
            {
                "answer": "Can be used with continuous or discrete data",
                "correct": true
            }
        ]
    },
    {
        "question": "Which of the following is used to generate a scatter plot in Python using Matplotlib?",
        "type": "multiple_choice",
        "answers": [
            {
                "code": "plt.plot()",
                "correct": false,
                "feedback": "Incorrect. The function plt.plot() makes line plots."
            },
            {
                "code": "plt.hist()",
                "correct": false,
                "feedback": "False. The function plt.hist() makes a histogram plot."
            },
            {
                "code": "plt.scatter()",
                "correct": true,
                "feedback": "Correct."
            }
        ]
    },
    {
        "question": "The following code can be used to estimate which probability?",
        "code": "event_count=0\nfor i in range(10_000):\ndice = random.choices( range(1,7), k=10)\nif dice.count(1) >= 3:\n    event_count+=1\n\nprint(event_count/10_000)",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "The probability of getting 3 or more 1s on 10 rolls of a 6-sided die.",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "The probability of getting 3 or more 1s on 10 rolls of a 7-sided die.",
                "correct": false,
                "feedback": "Incorrect. Recall that the upper value of a range is not included in the range."
            },
            {
                "answer": "The probability of getting 1 or more 3s on 10 rolls of a 6-sided die.",
                "correct": false,
                "feedback": "Incorrect. Note that dice.count(1) counts how many 1s occur."
            },
            {
                "answer": "The probability of getting 1 or more 3s on 10 rolls of a 7-sided die.",
                "correct": false,
                "feedback": "Incorrect. Recall that the upper value of a range is not included in the range."
            },
            {
                "answer": "Something else.",
                "correct": false,
                "feedback": "Incorrect. "
            }
        ]
    }
]
;
    // Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.textContent = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == "True") {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.textContent = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);
        console.log(submission);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
        //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                console.log(answer.value);
                console.log(submission == answer.value);
                if (submission == answer.value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }
                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        return false;
    }

}

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.textContent = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
function jaxify(string) {
    var mystring = string;

    var count = 0;
    var loc = mystring.search(/([^\\]|^)(\$)/);

    var count2 = 0;
    var loc2 = mystring.search(/([^\\]|^)(\$\$)/);

    //console.log(loc);

    while ((loc >= 0) || (loc2 >= 0)) {

        /* Have to replace all the double $$ first with current implementation */
        if (loc2 >= 0) {
            if (count2 % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\[");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\]");
            }
            count2++;
        } else {
            if (count % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\(");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\)");
            }
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
        //console.log(mystring,", loc:",loc,", loc2:",loc2);
    }

    //console.log(mystring);
    return mystring;
}


function show_questions(json, mydiv) {
    console.log('show_questions');
    //var mydiv=document.getElementById(myid);
    var shuffle_questions = mydiv.dataset.shufflequestions;
    var num_questions = mydiv.dataset.numquestions;
    var shuffle_answers = mydiv.dataset.shuffleanswers;
    var max_width = mydiv.dataset.maxwidth;

    if (num_questions > json.length) {
        num_questions = json.length;
    }

    var questions;
    if ((num_questions < json.length) || (shuffle_questions == "True")) {
        //console.log(num_questions+","+json.length);
        questions = getRandomSubarray(json, num_questions);
    } else {
        questions = json;
    }

    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);

    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        //iDiv.id = 'quizWrap' + id + index;
        iDiv.id = 'quizWrap' + id;
        iDiv.className = 'Quiz';
        iDiv.setAttribute('data-qnum', index);
        iDiv.style.maxWidth  =max_width+"px";
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;
        
        var outerqDiv = document.createElement('div');
        outerqDiv.id = "OuterquizQn" + id + index;
        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id = "quizQn" + id + index;
        
        if (qa.question) {
            iDiv.append(outerqDiv);

            //qDiv.textContent=qa.question;
            qDiv.innerHTML = jaxify(qa.question);
            outerqDiv.append(qDiv);
        }

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa) {
            codeDiv = document.createElement('div');
            codeDiv.id = "code" + id + index;
            codeDiv.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = qa.code;
            outerqDiv.append(codeDiv);
            //console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id = "quizAns" + id + index;
        aDiv.className = 'Answer';
        iDiv.append(aDiv);

        //console.log(qa.type);

        var num_correct;
        if ((qa.type == "multiple_choice") || (qa.type == "many_choice") ) {
            num_correct = make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
            if ("answer_cols" in qa) {
                //aDiv.style.gridTemplateColumns = 'auto '.repeat(qa.answer_cols);
                aDiv.style.gridTemplateColumns = 'repeat(' + qa.answer_cols + ', 1fr)';
            }
        } else if (qa.type == "numeric") {
            //console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id = "fb" + id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className = "Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
    var preserveResponses = mydiv.dataset.preserveresponses;
    console.log(preserveResponses);
    console.log(preserveResponses == "true");
    if (preserveResponses == "true") {
        console.log(preserveResponses);
        // Create Div to contain record of answers
        var iDiv = document.createElement('div');
        iDiv.id = 'responses' + mydiv.id;
        iDiv.className = 'JCResponses';
        // Create a place to store responses as an empty array
        iDiv.setAttribute('data-responses', '[]');

        // Dummy Text
        iDiv.innerHTML="<b>Select your answers and then follow the directions that will appear here.</b>"
        //iDiv.className = 'Quiz';
        mydiv.appendChild(iDiv);
    }
//console.log("At end of show_questions");
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    return false;
}
/* This is to handle asynchrony issues in loading Jupyter notebooks
           where the quiz has been previously run. The Javascript was generally
           being run before the div was added to the DOM. I tried to do this
           more elegantly using Mutation Observer, but I didn't get it to work.

           Someone more knowledgeable could make this better ;-) */

        function try_show() {
          if(document.getElementById("MvHjYNRpRClc")) {
            show_questions(questionsMvHjYNRpRClc,  MvHjYNRpRClc); 
          } else {
             setTimeout(try_show, 200);
          }
        };
    
        //console.log(element);
        {
        const jmscontroller = new AbortController();
        const signal = jmscontroller.signal;

        setTimeout(() => jmscontroller.abort(), 5000);

        fetch("https://raw.githubusercontent.com/jmshea/Foundations-of-Data-Science-with-Python/main/02-first-stats/questions/5-summary.json", {signal})
        .then(response => response.json())
        .then(json => show_questions(json, MvHjYNRpRClc))
        .catch(err => {
        console.log("Fetch error or timeout");
        show_questions(questionsMvHjYNRpRClc, MvHjYNRpRClc);
        });
        }
        </script></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="xGeIVPLBQlsU" data-shufflequestions="False"
               data-shuffleanswers="True"
               data-preserveresponses="false"
               data-numquestions="1"
               data-maxwidth="600"
               style="border-radius: 10px; text-align: left"> <style>
#xGeIVPLBQlsU {
   --jq-multiple-choice-bg: #345995;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #e26d5a;
   --jq-numeric-bg: #5bc0eb;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-incorrect-color: #666666;
   --jq-correct-color: #87a878;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 15px;
    padding-bottom: 4px;
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
    min-height: 2em;
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsxGeIVPLBQlsU=[
    {
        "question": "Choose all of the following that are <b>quantitative</b> variables.",
        "type": "many_choice",
        "answers": [
            {
                "answer": "Daily caloric intake",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "Academic degree",
                "correct": false,
                "feedback": "May have order (ordinal), such as BS, MS, PhD, but not quantitative (a measurable quantity)."
            },
            {
                "answer": "Miles per gallon",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "Heart rate",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "Language spoken",
                "correct": false,
                "feedback": "Not a numerical, measurable quantity."
            }
        ]
    },
    {
        "question": "Choose all of the following that are <b>quantitative</b> variables.",
        "type": "many_choice",
        "answers": [
            {
            "answer": "Percent completion for a project",
            "correct": false,
            "feedback": "This is a numerical, measurable quantity. Thus, it is quantitative."
        },
            {
            "answer": "Steps walked in a day",
            "correct": false,
            "feedback": "This is a numerical, measurable quantity. Thus, it is quantitative."
        },
            {
                "answer": "Religion",
                "correct": true,
                "feedback": "Correct."
        },
            {
                "answer": "Business sector",
                "correct": true,
                "feedback": "Correct."
        },
            {
            "answer": "Marital status",
            "correct": true,
            "feedback": "Correct."
        }
        ]
    },
    {
    "question": "According to Section 1.4 of <i>Foundations of Data Science with Python</i>, which of these topics are covered in the book?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "machine learning",
                "correct": false,
            "feedback": "Although machine learning is a popular and important data science topic, \"Foundations of Data Science with Python\" focuses on *Foundations*, meaning more fundamental topics."
            },
            {
                "answer": "data manipulation",
                "correct": true,
                "feedback": "\"Foundations of Data Science with Python\" introduces important data manipulation techniques, such as loading data from files, working with dataframes, and merging data."
            },
            {
                "answer": "data visualization",
                "correct": true,
                "feedback": "Data visualization is one of the first steps of exploratory data analysis and is a major way to communicate results in data science."
            },
            {
                "answer": "data engineering",
                "correct": false,
                "feedback": "Data engineering is concerned with the process of how data is collected, stored, and processed. Most of these topics are outside the scope of this book."
            },
            {
                "answer": "probability",
                "correct": true,
                "feedback": "Understanding probability is important in many areas of data science."
            }
        ]
    },
    {
    "question": "According to Section 1.5 of \"Foundations of Data Science with Python\", which of these topics are <b>not</b> covered in the book?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "machine learning",
                "correct": true,
            "feedback": "ML is a popular and important data science topic, but this book focuses on more fundamental topics. See the \"Next Steps\" section of this website for suggested resources."
            },
            {
                "answer": "databases",
                "correct": true,
                "feedback": "Databases are important in many real data science systems, but this topic could not be included in this book. See the \"Next Steps\" section for suggested resources."
            },
            {
                "answer": "linear algebra",
                "correct": true,
                "feedback": "Linear algebra is an important tool for working with data,  but this topic could not be included in this book. See the companion book \"Introduction to Linear Algebra for Data Science with Python\"."
            },
            {
                "answer": "statistics",
                "correct": false,
                "feedback": ""
            },
            {
                "answer": "data ethics",
                "correct": true,
                "feedback": "The ethics of data science is an important topic that could not be included in this book. See the \"Next Steps\" section for some suggested resources."
            }
        ]
    },
    {   "question": "JupyterLab has two main interface modes. Select them below:",
        "type": "many_choice",
        "answers": [
            {
            "answer": "Insert Mode",
            "correct": false,
            "feedback": "Incorrect. This is not one of the interface modes."
            },
            {
                "answer": "Edit Mode",
                "correct": true,
                "feedback": "Correct. Use Edit Mode to edit the content of a single cell."
            },
            {
                "answer": "Markdown Mode",
                "correct": false,
                "feedback": "Incorrect. This is a cell type and not a mode of the JuptyerLab interface."
            },
            {
                "answer": "Command Mode",
                "correct": true,
                "feedback": "Correct. Use Command mode to select cells and take actions on them, such as moving them or copying and pasting them."
            },
            {
                "answer": "LaTeX Mode",
                "correct": false,
                "feedback": "Incorrect. LaTeX is not an interface mode of JupyterLab. It is a way to specify mathematics within Markdown cells."
            }
        ]
    },
    {   "question": "Which of the following are ways to evaluate a cell?",
        "type": "many_choice",
        "answers": [
            {
            "answer": "Press Alt-Enter or Command-Enter",
            "correct": true,
            "feedback": "Correct. This is the most common way to evaluate a cell."
            },
            {
            "answer": "Press the Enter key",
            "correct": false,
            "feedback": "Incorrect. In Edit mode, the Enter key starts a new line. In Command mode, the Enter key switches to Edit mode on the selected cell."
            },
            {
                "answer": "Press the triangular Play button in the tooblar",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "Press Control-M from Edit mode.",
                "correct": false,
                "feedback": "Incorrect. In Edit mode, Control-M switches to Command mode."
            },
            {
                "answer": "Use Run Selected Cell from the Run menu",
                "correct": true,
                "feedback": "Correct. The Run menu provides many different choices for evaluating cells and shows keyboard shortcuts for those commands."
            }
        ]
    },
    {
        "question": "Choose all of the following that can be included in Jupyter notebooks?",
        "type": "many_choice",
        "answers": [
            {
                "answer": "Text and graphics output from Python",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "Typeset mathematics",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "Python executable code",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "Formatted text",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "Live snakes via Python",
                "correct": false,
                "feedback": "I hope not."
            }
        ]
    },
    {
        "question": "Which of these are used to create formatted text in Jupyter notebooks?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "Wiki markup",
                "correct": false,
            "feedback": "Incorrect. Although Wiki markup or Wiki Text is a way to specify formatted text, it is not the markup language supported in Jupyter notebooks." 
            },
            {
                "answer": "SVG",
                "correct": false,
                "feedback": "Incorrect. SVG is way for specifying scalable vector graphics."
            },
            {
                "answer": "Markdown",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "Rich Text",
                "correct": false,
                "feedback": "Incorrect. Rich text can refer to any markup language or to Rich Text Format, which was created Microsoft. It is not the markup language used in Jupyter notebooks."
            }
        ]
    },
    {
        "question": "Which of these are used to typeset mathematics in Jupyter notebooks?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "SiliCoN",
                "correct": false,
                "feedback": "Incorrect. This is a made-up name."
            },
            {
                "answer": "AcrYliC",
                "correct": false,
                "feedback": "Incorrect. This is a made-up name."
            },
            {
                "answer": "MS Equation",
                "correct": false,
                "feedback": "Incorrect. Although MS Equation is a way to enter equations, it is not the technology used in Jupyter notebooks."
            },
            {
                "answer": "LaTeX",
                "correct": true,
                "feedback": "Correct. Jupter notebooks support the mathematical typsetting language from the LaTeX document writing system."
            }
        ]
    },
 {
        "question": "Which of these would you use to create a variable called <code>data</code> with value 10 in Python?",
        "type": "multiple_choice",
        "answers": [
            {
                "code": "data <- 10",
                "correct": false,
                "feedback": "Incorrect. This is how to create that variable in R."
            },
            {
                "code": "let data = 10",
                "correct": false,
                "feedback": "Incorrect. Python does not use the let operator."
            },
            {
                "code": "data := 10",
                "correct": false,
                "feedback": "Incorrect. Although there is a := operator (called the Walrus operator) that performs assignment, it cannot be used alone like this."
            },
            {
                "code": "data = 10",
                "correct": true,
                "feedback": "Correct. The variable is created upon assignment using the = operator"
            },
            {
                "code": "def data\ndata = 10",
                "correct": false,
                "feedback": "Incorrect. The <code>def</code> keyword is to declare a function, not a variable."
            },
            {
                "code": "int data = 10",
                "correct": false,
                "feedback": "Incorrect. This is C/C++ style. Python uses implicit typing and require declaring the type when creating a new variable."
            }
        ]
    },
   {
        "question": "Which of the following are used to create functional code blocks in Python?",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "curly braces {}",
                "correct": false,
                "feedback": "Incorrect. Curly braces are used to group code in C, C++, and other languages, but not Python"
            },
            {
                "answer": "parentheses ()",
                "correct": false,
                "feedback": "Incorrect."
            },
            {
                "answer": "blank lines",
                "correct": false,
                "feedback": "Incorrect. Blank lines can help distinguish the end of code blocks visually, but do not affect the functional grouping"
            },
            {
                "answer": "indentation",
                "correct": true,
                "feedback": "Correct. The only way to specify functional code blocks in Python is via indentation."
            }
        ]
    },
    {
        "question": "Choose all of the following that are used to create comments in Python:",
        "type": "many_choice",
        "answers": [
            {
                "answer": "//",
                "correct": false,
                "feedback": "Incorrect. This is the format of a single-line comment in C."
            },
            {
                "answer": "# comment",
                "correct": true,
                "feedback": "Correct. A single hash is used to create a single-line comment"
            },
            {
                "answer": "''' comment'''",
                "correct": true,
                "feedback": "Correct. This is used for multi-line comments."
            },
            {
                "answer": "/* comment */",
                "correct": false,
                "feedback": "Incorrect. This is a C-style comment."
            }
        ]
    },
    {
        "question": "Determine the output of the following Python code:",
	      "code": "a=\"1\"\nb=\"2\"\nprint(a+b)",
        "type": "multiple_choice",
        "answers": [
            {
                "answer": "1",
                "correct": false,
                "feedback": "No. When strings are operated on by +, they are concatenated."
            },
            {
                "answer": "2",
                "correct": false,
                "feedback": "No. When strings are operated on by +, they are concatenated."
            },
            {
                "answer": "3",
                "correct": false,
                "feedback": "No. When strings are operated on by +, they are concatenated."
            },
            {
                "answer": "12",
                "correct": true,
                "feedback": "Yes. The + operator will concatenate the strings \"1\" and \"2\"."
            },
            {
                "answer": "error",
                "correct": false,
                "feedback": "No. The + operator for strings performs string concatenation."
            }
        ]
    },
    {
        "question": "What is the output of the following Python program?",
        "code": "dogs=['Amber', 'Madden', 'Roxy', 'Annie']\nprint(dogs[2])",
        "answers": [
            {
                "answer": "Amber",
                "correct": false,
                "feedback": "Because of 0-based indexing, Amber would be dogs[0]"
            },
            {
                "answer": "Madden",
                "correct": false,
                "feedback": "Because of 0-based indexing, Madden would be dogs[1]"
            },
            {
                "answer": "Roxy",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "Annie",
                "correct": false,
                "feedback": "Because of 0-based indexing, Annie would be dogs[3]"
            }
        ],
        "type": "multiple_choice"
    },
    {
        "question": "What numbers are printed by the following Python program?",
        "code": "for k in range(3,9,3):\n    print(k)",
        "answers": [
            {
                "answer": "0, 3",
                "correct": false,
                "feedback": "No. The first argument is the starting value for the range. Try again."
            },
            {
                "answer": "3, 6",
                "correct": true,
                "feedback": "Correct."
            },
            {
                "answer": "3, 6, 9",
                "correct": false,
                "feedback": "No. Although the second argument (9) is the end of this range, remember that the end values are not included in the range."
            },
            {
                "answer": "3, 9",
                "correct": false,
                "feedback": "No. The second argument (9) is the end of this range, and the third argument (3) is the increment."
            }
        ],
        "type": "multiple_choice"
    },
    {
        "question": "The variable mylist is a Python list. Choose which code snippet will append the item 3 to mylist.",
        "type": "multiple_choice",
        "answers": [
            {
                "code": "mylist+=3",
                "correct": false,
                "feedback": "The Python + operator is not defined for a list and an integer."
            },
            {
                "code": "mylist+=[3]",
                "correct": true,
                "feedback": "Correct. When operating on two lists, the Python + operator performs list concatenation."
            },
            {
                "code": "mylist+={3}",
                "correct": false,
                "feedback": "Incorrect. In Python, {3} will be a set, and the + operator is not defined for a list and a set."
            }
        ]
    },
    {
        "question": "Which of these are valid ways to get access to the functions from the NumPy library?",
        "type": "multiple_choice",
        "answers": [
            {
            "code": "import numpy",
            "correct": true,
            "feedback": "Correct. The simplest way to import a library is to just use the import keyword like this."
        },
            {
            "code": "import numpy as np",
            "correct": true,
            "feedback": "Correct. This is the typical way to import NumPy. The functions are imported into the np namespace, which is easier to type than numpy."
        },
            {
            "code": "load numpy",
            "correct": false,
            "feedback": "Incorrect. There is no load keyword in Python. There is a %load magic in JupyterLab/Jupyter Notebook."
        },
            {
            "code": "import NumPy",
            "correct": false,
            "feedback": "Incorrect. Even though the name of the library is NumPy, in Python, it is loaded as numpy (all lowercase)."
        },
            {
            "code": "load NumPy",
            "correct": false,
            "feedback": "Incorrect. There is no load keyword in Python. There is a %load magic in JupyterLab/Jupyter Notebook. The library is referred to as numpy (all lowercase) within Python."
        },
            {
            "code": "#import numpy",
            "correct": false,
            "feedback": "Incorrect. This is C/C++ style."
        },
            {
            "code": "library(numpy)",
            "correct": false,
            "feedback": "Incorrect. This is how to import a library in R."
        }
        ]
    }
]
;
    // Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.textContent = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == "True") {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.textContent = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);
        console.log(submission);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
        //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                console.log(answer.value);
                console.log(submission == answer.value);
                if (submission == answer.value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }
                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        return false;
    }

}

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.textContent = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
function jaxify(string) {
    var mystring = string;

    var count = 0;
    var loc = mystring.search(/([^\\]|^)(\$)/);

    var count2 = 0;
    var loc2 = mystring.search(/([^\\]|^)(\$\$)/);

    //console.log(loc);

    while ((loc >= 0) || (loc2 >= 0)) {

        /* Have to replace all the double $$ first with current implementation */
        if (loc2 >= 0) {
            if (count2 % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\[");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\]");
            }
            count2++;
        } else {
            if (count % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\(");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\)");
            }
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
        //console.log(mystring,", loc:",loc,", loc2:",loc2);
    }

    //console.log(mystring);
    return mystring;
}


function show_questions(json, mydiv) {
    console.log('show_questions');
    //var mydiv=document.getElementById(myid);
    var shuffle_questions = mydiv.dataset.shufflequestions;
    var num_questions = mydiv.dataset.numquestions;
    var shuffle_answers = mydiv.dataset.shuffleanswers;
    var max_width = mydiv.dataset.maxwidth;

    if (num_questions > json.length) {
        num_questions = json.length;
    }

    var questions;
    if ((num_questions < json.length) || (shuffle_questions == "True")) {
        //console.log(num_questions+","+json.length);
        questions = getRandomSubarray(json, num_questions);
    } else {
        questions = json;
    }

    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);

    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        //iDiv.id = 'quizWrap' + id + index;
        iDiv.id = 'quizWrap' + id;
        iDiv.className = 'Quiz';
        iDiv.setAttribute('data-qnum', index);
        iDiv.style.maxWidth  =max_width+"px";
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;
        
        var outerqDiv = document.createElement('div');
        outerqDiv.id = "OuterquizQn" + id + index;
        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id = "quizQn" + id + index;
        
        if (qa.question) {
            iDiv.append(outerqDiv);

            //qDiv.textContent=qa.question;
            qDiv.innerHTML = jaxify(qa.question);
            outerqDiv.append(qDiv);
        }

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa) {
            codeDiv = document.createElement('div');
            codeDiv.id = "code" + id + index;
            codeDiv.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = qa.code;
            outerqDiv.append(codeDiv);
            //console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id = "quizAns" + id + index;
        aDiv.className = 'Answer';
        iDiv.append(aDiv);

        //console.log(qa.type);

        var num_correct;
        if ((qa.type == "multiple_choice") || (qa.type == "many_choice") ) {
            num_correct = make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
            if ("answer_cols" in qa) {
                //aDiv.style.gridTemplateColumns = 'auto '.repeat(qa.answer_cols);
                aDiv.style.gridTemplateColumns = 'repeat(' + qa.answer_cols + ', 1fr)';
            }
        } else if (qa.type == "numeric") {
            //console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id = "fb" + id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className = "Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
    var preserveResponses = mydiv.dataset.preserveresponses;
    console.log(preserveResponses);
    console.log(preserveResponses == "true");
    if (preserveResponses == "true") {
        console.log(preserveResponses);
        // Create Div to contain record of answers
        var iDiv = document.createElement('div');
        iDiv.id = 'responses' + mydiv.id;
        iDiv.className = 'JCResponses';
        // Create a place to store responses as an empty array
        iDiv.setAttribute('data-responses', '[]');

        // Dummy Text
        iDiv.innerHTML="<b>Select your answers and then follow the directions that will appear here.</b>"
        //iDiv.className = 'Quiz';
        mydiv.appendChild(iDiv);
    }
//console.log("At end of show_questions");
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    return false;
}
/* This is to handle asynchrony issues in loading Jupyter notebooks
           where the quiz has been previously run. The Javascript was generally
           being run before the div was added to the DOM. I tried to do this
           more elegantly using Mutation Observer, but I didn't get it to work.

           Someone more knowledgeable could make this better ;-) */

        function try_show() {
          if(document.getElementById("xGeIVPLBQlsU")) {
            show_questions(questionsxGeIVPLBQlsU,  xGeIVPLBQlsU); 
          } else {
             setTimeout(try_show, 200);
          }
        };
    
        //console.log(element);
        {
        const jmscontroller = new AbortController();
        const signal = jmscontroller.signal;

        setTimeout(() => jmscontroller.abort(), 5000);

        fetch("https://raw.githubusercontent.com/jmshea/Foundations-of-Data-Science-with-Python/main/01-intro/questions/7-summary.json", {signal})
        .then(response => response.json())
        .then(json => show_questions(json, xGeIVPLBQlsU))
        .catch(err => {
        console.log("Fetch error or timeout");
        show_questions(questionsxGeIVPLBQlsU, xGeIVPLBQlsU);
        });
        }
        </script></div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./07-bayesian-methods"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="4-bayesian-hypothesis-testing.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">7.4. </span>Bayesian Hypothesis Testing</p>
      </div>
    </a>
    <a class="right-next"
       href="../08-random-variables/intro.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">8. </span>Random Variables</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By John M. Shea
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2021-2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>